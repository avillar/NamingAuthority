
iso19112.xsd
 
 
 This contains classes which are direct implementations of the ISO19112 model. These have been duplicated because this ISO model is not encoded in a form compatible with automated schema generation. 

 
 

 
 
 
 
 
 
 
 
 
 
 

 


 
 
 
 

 


 
 
 
 




 
 
 

 

 
 
 
 This is an implementation facade for ISO19112 model concepts. 

 
 
 
 
 
 
 

 


 
 
 
 
 

 


 
 
 
 

 


 
 
 




 
 
 

 

 
 
 
 
 
 
 
 
 

 


 
 
 
 
 
 
 

 


 




 
 
 

 





05-035r2.doc
Best Practices Document


OGC 05-035r2

OGC 05-035r2



Open Geospatial Consortium Inc. 


Date: 2006-06-05


Reference number of this OGC™ document: OGC 05‑035r2


Version: 0.9.3


Category: OGC™ Candidate Implementation Specification


Editor: Jens Fitzke, Rob Atkinson


OGC Best Practices Document:


Gazetteer Service -
Application Profile of the Web Feature Service Implementation Specification

Copyright © 2006 Open Geospatial Consortium. All Rights Reserved.
To obtain additional rights of use, visit http://www.opengeospatial.org/legal/

Warning


This document is not an OGC Standard. It is distributed for review and comment. It is subject to change without notice and may not be referred to as an OGC Standard. Recipients of this document are invited to submit, with their comments, notification of any relevant patent rights of which they are aware and to provide supporting documentation.


Contents
Page


101
Scope



122
Conformance



133
Normative references



134
Terms and definitions



135
Conventions



135.1
Abbreviated terms



145.2
UML notation



145.3
Document terms and definitions



146
Gazetteer Service overview



146.1
Processing Requests



157
Shared aspects



157.1
Introduction



157.2
Operation request encoding



168
GetCapabilities operation (required)



168.1
Introduction



168.2
Operation request



168.3
GetCapabilities operation response



16Normal response



179
DescribeFeatureType operation (required)



179.1
Introduction



179.2
Examples



1910
GetFeature operation (required)



1910.1
Introduction



2010.2
Examples



25Annex A: Abstract test suite



25A.1
Test module for general capabilities



25A.1.1
General capabilities



26A.1.2
Required capabilities



26A.2
Test module for Accessible Content conformance



26A.2.1
Gazetteer Service advertised



26A.2.2
SI_Gazetteer Feature Type response conformance



26A.2.2
Gazetteers refer to available feature types



27A.2.2
SI_LocationInstance conformance



27A.2.2
SI_LocationInstance extensions conformance



28Annex B: XML schemas



28Annex C: Use Cases



28D.1 Navigation Use Case



29D.2 “Geocoding” Use Case



29D.3 Service Invocation Use Case



30D.4 Geographic Selection Use Case







Figures


10Figure 1 Gazetteer class diagram (from ISO 19112)



11Figure 2 ISO19112 model refactored to conform to ISO19118






i. Preface


There is growing interest in the development of a common feature-based model for access to named features, often referred to as a gazetteer. Two major activities form the basis of this specification, an OGC Discussion paper on gazetteers, and an ISO draft standard for geographic identifiers.


As a result of the OGC Geospatial Fusion Services Testbed Phase I and the Web Mapping Testbed Phase II, an Open GIS Gazetteer Interface was defined and published as an OGC Discussion Paper [OGC 2001]. The standardization process in the ISO TC 211 led to a separate mature draft standard defining "Spatial referencing by geographic identifiers" [ISO19112] that defines an abstract model to be implemented by a gazetteer service.


The outcomes of these activities have been taken into account and a consolidated Gazetteer Service implementation specification has been developed and published as a discussion paper [OGC 02-076r3]. As the underlying specifications have been further developed the present document makes the necessary adjustments.


The Gazetteer Service is a specialized Application Profile (hereafter referred to as “profile”) of a Web Feature Service that specifies a minimum set of Feature Types and operations required to support an instance of a gazetteer service. Instances within a collection of gazetteer features may be – as the terms in a thesaurus – related to each other and constitute a hierarchical vocabulary of geographic places. The overall information model is here implemented as a GML application schema that defines a general feature type to be served by a Gazetteer Service.


By using the capabilities of a Web Feature Server, the Gazetteer Service as proposed here exposes the following interfaces to query location instances in a gazetteer database:


· Get or Query features based on thesaurus-specific properties (broader term (BT), narrower term (NT), related term (RT)


· Retrieve properties of the gazetteer database, such as the location type class definitions and the spatial reference system definitions


Suggested additions, changes, and comments on this draft report are welcome and encouraged. Such suggestions may be submitted by OGC portal message, email message, or by making suggested changes in an edited copy of this document.


The changes made in this document version, relative to the previous version, are tracked by Microsoft Word, and can be viewed if desired. If you choose to submit suggested changes by editing this document, please first accept all the current changes, and then make your suggested changes with change tracking on.


ii. Submitting organizations


The following organizations submitted this document to the Open Geospatial Consortium Inc. 


a) lat/lon GmbH


b) US Federal Geographic Data Committee


c) GeoConnections / Natural Resources Canada (Environment Canada)


d) Social Change Online Pty Ltd


iii. Document contributor contact points


All questions regarding this document should be directed to the editor or the contributors:


		Contact

		Company

		Email



		Jens Fitzke

		lat/lon GmbH

		fitzke@lat-lon.de



		Rob Atkinson

		Social Change Online 

		rob@socialchange.net.au



		Doug Nebert

		US Federal Geographic Data Committee

		ddnebert@fgdc.gov



		Tom Kralidis

		GeoConnections / Natural Resources Canada (Environment Canada)

		tom.kralidis@ec.gc.ca





iv. Revision history


		Date

		Release

		Editor

		Primary clauses modified

		Description



		2005-04-12

		

		

		

		New Document structure according to 05-009



		2005-10-11

		0.9.1

		Fitzke

		all

		Complete revision.



		2005-

		0.9.1

		Carl Reed

		Numerous

		Edits for consistency, grammar, etc.



		2006-01-09

		0.9.1

		Jens Fitzke

		GetFeature examples

		Added more examples. Minor corrections on document and schema / example files.



		2006-03-16

		0.9.2

		Rob Atkinson

		all

		ISO 19112 data model conformance



		2006-05-29

		0.9.3

		Rob Atkinson

		All

		Editorial revision filling in missing clauses. Added abstract conformance tests. Some reorganisation of order



		2006-05-29

		0.9.3

		Jens Fitzke

		All





		2006-06-03

		0.93

		Rob Atkinson

		Appendix C

		Samples, formatting





v. Changes to the OGC Abstract Specification


The OpenGIS™ Abstract Specification does not require changes to accommodate this OpenGIS™ standard. It is recommended however that the Abstract Specification be extended to explicitly incorporate the ISO 19112 standards to be consistent with current practice with regards to implementation of ISO TC211 standards.


vi. Future work


This profile implements the minimal set of elements from the ISO 19112 model to provide useful, standardised services.


Future extensions may include convenience methods to traverse parent/child relationships, vocabulary-oriented access protocols.


The main area requiring standardisation relates to the definition of Feature Types and the correspondence to SI_LocationType. Currently, the implementation supports a token or a URL reference, whose semantics are clear, but the details of the target object is unspecified.


In the future, Gazetteer Services may have transactional interfaces added to enable updates by ad-hoc authorities. This could be implemented using WFS transactional capabilities but may require constraints over the content model to conform to ISO 19112 semantics. 


Foreword


This document cancels and replaces OGC 02-076r3. It represents a complete revision of this former document version, especially with respect to WFS, Geography Markup Language (GML), and ISO 19139 (Geographic Metadata Implementation Model). The Gazetteer Service is considered a profile of the WFS specification. It is related to and makes use of the WFS, Filter Encoding, GML, and ISO 19139 specifications.


This document includes 4 annexes; Annexes A, B are normative, and Annexes C, D are informative.


Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. The OGC shall not be held responsible for identifying any or all such patent rights.


Introduction


This document defines a Gazetteer Service profile of the OGC Web Feature Service Specification. The OGC Gazetteer Service allows a client to search and retrieve elements of a georeferenced vocabulary of well-known place-names.


This profile extends the WFS interface in a way that a client is able to


· Determine if a WFS implementation is acting as a Gazetteer Service. 


· Query the Gazetteer Service in order to retrieve place-name features without closer examination of the feature type definitions


· Access metadata about the gazetteer(s) provided by the service


To ensure semantic interoperability this profile defines the response schema elements according to the gazetteer data model defined in [ISO 19112].


The overall design principle of this profile is to make gazetteer service behaviour to be completely predictable, and allowing setup as easy as possible – provided that a web feature service instance is available. The following list gives an overview of the specific characteristics of a gazetteer service in comparison to a web feature service:


· The service type is “WFS” (this allows a server instance to act both as a general web feature service and a gazetteer service).


· The gazetteers (collection of locations) are described by metadata objects of a well defined feature type (SI_Gazetteer). Presence of this feature type is sufficient to determine that a service acts a gazetteer for the FeatureTypes described by the collection of SI_Gazetteer objects.


· The Gazetteer WFS serves at least one FeatureType derived from SI_LocationInstance and described by a feature of type SI_Gazetteer


· To support absolute URL references to single instances of a place-name database a  gazetteer service is able to process KVP-encoded GetFeature requests issued by using HTTP GET.


Gazetteer Profile of the Web Feature Service Implementation Specification


Scope


This OpenGIS™ document specifies the OpenGIS Gazetteer Service operations as a profile of the Web Feature Service (WFS-G). Services compliant with this specification shall provide Feature Types derived by extension from the well-known Feature Type SI_LocationInstance. In Addition, they may support queries based on the (parent/child) relationships of feature instances, as defined in ISO 19112.


Geographic Features: SI_LocationInstance


The following UML class diagram illustrates the concept of the base Feature Types SI_Gazetteer and SI_LocationInstance:


cd Gazeteer


Gazetteer::SI_Gazetteer


{root,leaf}


+ name:  RS_Identifier


+ scope[0..1]:  CharacterString


+ territoryOfUse:  EX_GeographicExtent


+ custodian:  


+ coordinate_system[0..1]:  SC_CRS


+ isGlobal:  Boolean


+ acceptableClassList:  Set<TypeName> = {Any}


ReferenceSystem by Identifier::SI_LocationType


{root,leaf}


+ name:  RS_Identifier


+ theme:  CharacterString


+ identifier:  CharacterString


+ definition:  CharacterString


+ owner:  


+ territoryOfUse:  EX_GeographicExtent


positions must be recorded if the geographic identifier 


contains insufficient information to identify location


Gazetteer::SI_LocationInstance


{root,leaf}


+ geographicIdentifier:  CharacterString


+ alterrnativeGeographicIdentifier[0..*]:  CharacterString


+ geographicExtent[0..1]:  EX_GeographicExtent


+ temporalExtent[0..1]:  EX_TemporalExtent


+ administrator:  


+ position[0..1]:  GM_Point


ReferenceSystem by Identifier::


SI_SpatialReferenceSystemUsingGeographicIdentifiers


{leaf}


+ theme:  CharacterString


+ overallOwner:  


+ territoryOfUse:  EX_GeographicExtent


1..*+locationType


1..*+locationTypes


0..*+referenceSystem


+child 0..*


+parent 0..*


1..*+comprises


1..*+gazetteer


+parent 0..*


+child 0..*


1


+locationType




Figure 1 Gazetteer class diagram (from ISO 19112)


The scope of the gazetteer service is to provide SI_LocationInstance derived objects, and metadata via SI_Gazetteer objects. FeatureTypes (SI_LocationType) are assumed to be implemented in a Feature Type Catalog in accordance with [ISO 19110] and so no requirement to serve these non-spatial definition objects is specified. This clause also allows purely 2D-spatial WFS services to conform to the WFS-G profile.


SI_LocationType Feature Types may be supported by a Gazetteer Service to describe the Gazetteer’s internal organization.


Note that the object model for ISO 19112 has been refactored according to the rules of ISO19118 to allow generation of normative GML 3 application schemas. Figure 2 shows the extent of the refactored model (named ISO19112_Impl)


cd ISO19112_Context


«FeatureType»


SI_LocationInstance


+ geographicIdentifier:  CharacterString


+ alternativeGeographicIdentifier:  CharacterString [0..*]


+ geographicExtent:  EX_GeographicExtent [0..1]


+ temporalExtent:  EX_TemporalExtent [0..1]


+ position:  GM_Point [0..1]


«Type»


Names::GenericName


+ depth() : Integer


+ getObject() : Any


+ parsedName() : Sequence<LocalName>


«FeatureType»


SI_Gazetteer


+ name:  RS_Identifier


+ scope:  CharacterString [0..1]


+ custodian:  CI_ResponsibleParty


+ territoryOfUse:  EX_GeographicExtent


+ isGlobal:  Boolean


+ srsName:  anyURI


Gazetteer is a 


"NameSpace" - 


not shown here 


due to issues in 


schema 


generation


SI_LocationType


+ name:  RS_Identifier


+ identifier:  CharacterString


+ theme:  CharacterString


+ definition:  CharacterString


+ territoryOfUse:  EX_GeographicExtent


+ owner:  CI_ResponsibleParty


SI_LocationType probably ought 


to be subtyped from a ISO19126 


Feature - to reinforce the issue of 


governance of the definition and 


the fact that the features 


referenced in the gazetter may 


have authoritative 


implementations accessible using 


these feature types.


The SI_LocationType may be referenced only, and provides a way to 


identify which FeatureTypes served by a gazetteer implement which 


gazetteer (location collection).


1


+featureType


+parent 0..1


1+locationType


0..1+gazetteer




Figure 2 ISO19112 model refactored to conform to ISO19118


Operations


To support query processing, a gazetteer service has the following operations:


GetCapabilities


As a web feature service, a gazetteer service must be able to describe its capabilities. Specifically, it must indicate which feature types it can service, what operations are supported on each feature type, and what the structure of the gazetteer database is like.


DescribeFeatureType


As a web feature service, a gazetteer service must be able, upon request, to describe the structure of any feature type it can service. Gazetteer service feature types are derived from the base type SI_LocationInstance.


GetFeature


As a web feature service, a gazetteer service must be able to service a request to retrieve feature instances. In addition, the client should be able to specify which feature properties to fetch and should be able to constrain the query spatially and non-spatially.


The above operations are common to versions 1.0 and 1.1 of the WFS specification. Additional constraints are that WFS 1.0 must support the GML 2.1 implementation of each FeatureType, whereas WFS 1.1 must support the GML 3.1.1 implementation. Each may optionally advertise and support the alternative format, thus a WFS 1.0 conformant service may support GML3.1.1 as an optional output format.


Additionally, a gazetteer service supporting WFS 1.1 interface may implement the GetGMLObject operation:


GetGMLObject


A gazetteer service may be able to service a request to retrieve element instances by traversing XLinks that refer to their XML Ids.


Based on the operation descriptions above, two classes of gazetteer services can be defined:


Basic Gazetteer Service


A basic Gazetteer Service would implement the GetCapabilities, DescribeFeatureType and GetFeature operations.


XLink Gazetteer Service


An XLink Gazetteer Service would support all the operations of a basic gazetteer service and in addition it would implement the GetGmlObject operation for local and/or remote XLinks, and offer the option for the GetGmlObject operation to be performed during GetFeature operations.


1 Conformance


Conformance with this specification shall be checked using all the relevant tests specified in Annex A (normative).


2 Normative references


The following normative documents contain provisions that, through reference in this text, constitute provisions of this document. For dated references, subsequent amendments to, or revisions of, any of these publications do not apply. For undated references, the latest edition of the normative document referred to applies.


ISO 19105:2000, Geographic information — Conformance and Testing


ISO 19112:2003, Geographic information — Spatial Referencing by Geographic Identifiers


OGC 05-008, OGC Web Services Common Specification


OGC 03-105r1, Geography Markup Language (GML) Implementation Specification version 3.1.1


OGC 04-094,Web Feature Service Implementation Specification version 1.1


OGC 04-095, Filter Encoding Implementation Specification version 1.1


The OWS Common Specification contains a list of normative references that are also applicable to this candidate Implementation Specification.


In addition to this document, this specification includes several normative XML Schema files. These are posted online at the URL http://schemas.opengis.net/gazetteer/1.0/. These XML Schema files are also bundled with the present document. In the event of a discrepancy between the bundled and online versions of the XML Schema files, the online files shall be considered authoritative.


3 Terms and definitions


For the purposes of this specification, the definitions specified in Clause 4 of the OWS Common Implementation Specification [OGC 05-008] shall apply. In addition, the following terms and definitions apply.


Gazetteer: A database used to translate between different representations of geospatial references, such as place names and geographic coordinates


4 Conventions


4.1 Abbreviated terms


Most of the abbreviated terms listed in Subclause 5.1 of the OWS Common Implementation Specification [OGC 05-008] apply to this document, plus the following abbreviated terms.


FTC: Feature Type Catalog


4.2 UML notation


Most diagrams that appear in this specification are presented using the Unified Modeling Language (UML) static structure diagram, as described in Subclause 5.2 of [OGC 05-008].


4.3 Document terms and definitions


This document uses the specification terms defined in Subclause 5.3 of [OGC 05-008].


5 Gazetteer Service overview


A Gazetteer defines a set of location instances, each of which provides a binding between representations of a location within a CRS and as an identifier. Each location instance is a Feature, and is a (possibly one of many) representation of a “real-world” object. The representation of the real-world object within the Gazetteer is designed to be used to perform this translation, and to allow the set of such Features to be discovered and searched.


The gazetteer service is thus a WFS serving a predictably structured set of features representing Gazetteers and the sets of location instances they contain.


The constraints are common to versions 1.0 and 1.1 of the WFS specification. Additional constraints are that WFS 1.0 must support a GML 2.1 implementation of each FeatureType, whereas WFS 1.1 must support the GML 3.1.1 implementation. Each may optionally advertise and support the alternative format, thus a WFS 1.0 conformant service may support GML3.1.1 as an optional output format.


5.1 Processing Requests


This section of the document outlines, in general terms, the protocol to be followed in order to process Gazetteer Service requests. Processing requests would proceed as follows:


1. A client application (optionally) would request a capabilities document from the WFS-G.  Such a document contains a description of all the operations that the WFS-G supports, a list of all feature types that it can service, and a description of the structure of the underlying gazetteer datastore.


2. A client application (optionally) makes a request to a web feature service for the definition of one or more of the feature or element types that the WFS-G can service. (This is optional, and may be used to discover additional elements 


3. A client application (optionally) requests the set of gazetteer metadata SI_Gazetteer objects to identify the feature types that implement the gazetteer data model. (These feature types will be SI_LocationInstance or a type derived from this by extension)


4. Based on the definition of the SI_LocationInstance Feature Type, and possibly other properties of a specified Feature Type that extends this, the client application generates a request as specified in the WFS interface [OGC 04-094] 


5. The WFS-G is invoked to read and service the request.  


6. When the WFS-G has completed processing the request, it will generate a status report and hand it back to the client. In the event that an error has occurred, the status report will indicate that fact.


Note that “client application” may include Registries and other middleware, as well as conventionally understood “end-users”.


Note also that a client may be “bound” to the Gazetteer service content by configuration, or discover the implementing SI_LocationInstance FeatureTypes through a services registry and may thus be able to skip steps 1,2 and 3. 


The definition of the WFS-G profile is intended to make the discovery and invocation of WFS-G services possible through service registries.


6 Shared aspects


6.1 Introduction


This clause specifies aspects of the Gazetteer Service behavior that are shared by several operations.


6.2 Operation request encoding


The encoding of operation requests shall use HTTP GET with KVP encoding and HTTP POST with XML and/or KVP encoding as specified in Clause 11 of [OGC 05-008]. Table 1 summarizes the Gazetteer Service operations and their encoding methods defined in this specification.


Table 1 — Operation Request Encoding


		Operation

		Request Encoding



		GetCapabilities (required)

		XML and mandatory KVP



		DescribeFeatureType (required)

		XML and mandatory KVP 



		GetFeature (required)

		XML and optional KVP 





7 GetCapabilities operation (required)


7.1 Introduction


This is a standard WFS requirement, with both the request and response requirements unchanged by the WFS-G profile.


The mandatory GetCapabilities operation allows clients to retrieve service metadata from a Gazetteer server. The response to a GetCapabilities request shall be an XML document containing service metadata about the server, including specific information about the feature types it can service, and the supported operations on each feature type. This clause specifies the XML document that a Gazetteer server must return to describe its capabilities.


7.2 Operation request


The GetCapabilities operation request shall be as specified in Subclauses 7.2.2 through 7.2.4 of [OGC 05-008]. The “service”, “request”, and “AcceptVersions” parameters shall be implemented by all gazetteer services. The “Sections” and “updateSequence” parameters are optional implementation by gazetteer services. All gazetteer services shall implement HTTP GET transfer of the GetCapabilities operation request, using KVP encoding. Services can also implement HTTP POST transfer of the GetCapabilities operation request, using XML encoding only.


The value of the “service” parameter shall be “WFS”. The allowed set of service metadata (or Capabilities) XML document section names and meanings shall be as specified in Tables 3 and 7 of [OGC 05-008].


7.3 GetCapabilities operation response


Normal response


The WFS-G profile creates no additional requirements of the WFS GetCapabilities operation beyond the ability to serve the nominated Feature Types:


SI_Gazetteer and SI_LocationInstance (or a derived type advertised in SI_Gazetteer records).


8 DescribeFeatureType operation (required)


8.1 Introduction


The DescribeFeatureType operation allows gazetteer clients to retrieve schema descriptions which define, how the gazetteer server will generate feature instances on output (in response to GetFeature requests).


This profile makes no further changes to this WFS operation except that it defines a base schema for certain FeatureTypes.


8.2 Examples


To request a feature type schema document, a client could issue the following DescribeFeatureType operation request with minimum contents:


http://ogc.a-domain.org/wfs-g? 



service=WFS



&request=DescribeFeatureType



&typename=iso19112:SI_LocationInstance



&namespace=xmlns(iso19112=http://www.opengis.net/iso19112)


The corrsponding minimum request encoded in XML is:


<?xml version="1.0" ?>


<wfs:DescribeFeatureType


   version="1.1.0"


   service="WFS" 


   xmlns:iso19112="http://www.opengis.net/iso19112"


   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"


   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.1.0/WFS.xsd">


   <TypeName>iso19112:SI_LocationInstance</TypeName>


</wfs:DescribeFeatureType>


In response to such a request, the gazetteer server might generate a document that looks like the following example:


<?xml version="1.0" encoding="UTF-8"?>


<schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:gmd="http://www.isotc211.org/2005/gmd" xmlns:gml="http://www.opengis.net/gml" xmlns:iso19112="http://www.opengis.net/iso19112" elementFormDefault="qualified" targetNamespace="http://www.opengis.net/iso19112" version="1.0">


<import namespace="http://www.opengis.net/gml" schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd"/>


  <import namespace="http://www.isotc211.org/2005/gmd" schemaLocation="http://www.seegrid.csiro.au/xsd/iso19139/gml3.1.1version/gmd/gmd.xsd"/>


  <element name="SI_LocationInstance" substitutionGroup="gml:_Feature" type="iso19112:SI_LocationInstanceType"/>


  <complexType name="SI_LocationInstanceType">


    <complexContent>


      <extension base="gml:AbstractFeatureType">


        <sequence>


          <element name="geographicIdentifier" type="string"/>


          <element maxOccurs="unbounded" minOccurs="0" name="alternativeGeographicIdentifier" type="string"/>


          <element minOccurs="0" name="geographicExtent">


            <complexType>


              <sequence minOccurs="0">


                <element ref="gmd:EX_GeographicExtent_PropertyType"/>


              </sequence>


              <attributeGroup ref="gml:AssociationAttributeGroup"/>


            </complexType>


          </element>


          <element minOccurs="0" name="temporalExtent">


            <complexType>


              <sequence minOccurs="0">


                <element ref="gmd:EX_TemporalExtent_PropertyType"/>


              </sequence>


              <attributeGroup ref="gml:AssociationAttributeGroup"/>


            </complexType>


          </element>


          <element minOccurs="0" name="position" type="gml:PointPropertyType"/>


          <element minOccurs="0" name="gazetteer" type="iso19112:SI_GazetteerPropertyType"/>


          <element name="locationType" type="iso19112:SI_LocationTypePropertyType"/>


          <element minOccurs="0" name="parent" type="iso19112:SI_LocationInstancePropertyType"/>


        </sequence>


      </extension>


    </complexContent>


  </complexType>


  <complexType name="SI_LocationInstancePropertyType">


    <sequence minOccurs="0">


      <element ref="iso19112:SI_LocationInstance"/>


    </sequence>


    <attributeGroup ref="gml:AssociationAttributeGroup"/>


  </complexType>


  <complexType name="SI_GazetteerPropertyType">


    <sequence minOccurs="0">


      <element ref="iso19112:SI_Gazetteer"/>


    </sequence>


    <attributeGroup ref="gml:AssociationAttributeGroup"/>


  </complexType>


  <element name="SI_LocationType" substitutionGroup="gml:_Feature" type="iso19112:SI_LocationTypeType"/>


  <complexType name="SI_LocationTypeType">


    <complexContent>


      <extension base="gml:AbstractFeatureType">


        <sequence>


          <element name="name">


            <complexType>


              <sequence minOccurs="0">


                <element ref="gmd:RS_Identifier_PropertyType"/>


              </sequence>


              <attributeGroup ref="gml:AssociationAttributeGroup"/>


            </complexType>


          </element>


          <element name="identifier" type="string"/>


          <element name="theme" type="string"/>


          <element name="definition" type="string"/>


          <element name="territoryOfUse">


            <complexType>


              <sequence minOccurs="0">


                <element ref="gmd:EX_GeographicExtent_PropertyType"/>


              </sequence>


              <attributeGroup ref="gml:AssociationAttributeGroup"/>


            </complexType>


          </element>


          <element name="owner" type="string"/>


        </sequence>


      </extension>


    </complexContent>


  </complexType>


  <complexType name="SI_LocationTypePropertyType">


    <sequence minOccurs="0">


      <element ref="iso19112:SI_LocationType"/>


    </sequence>


    <attributeGroup ref="gml:AssociationAttributeGroup"/>


  </complexType>


</schema>


9 GetFeature operation (required)


9.1 Introduction


The GetFeature operation allows retrieval of features from a gazetteer service.  A GetFeature request is processed by a WFS-G and when the value of the outputFormat attribute is set to text/gml; subtype=gml/3.1.1, a GML instance document, containing the result set, is returned to the client


This profile makes no changes to this WFS operation.


The GetFeature operation must support the following behaviour:


1. get all entries in a gazetteer (empty filter)


2. get all entries in each separate gazetteer (see clause “Supporting Multiple Gazetteers”)


3. get entry by name


4. get entry by id


5. get entries within a bounding box


6. get entries within a polygon geometry


7. Each of the above queries for a specified featureType


9.2 Examples


A client would start to retrieve gazetteer metadata from SI_Gazetteer feature instances:


<?xml version="1.0" ?>


<wfs:GetFeature


   version="1.0.0"


   service="WFS-G" 


   xmlns="http://www.opengis.net/wfs-g"


   xmlns:iso19112="http://www.opengis.net/iso19112"


   xmlns:wfs="http://www.opengis.net/wfs"


   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"


   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.1.0/WFS.xsd">


   <TypeName>iso19112:SI_LocationInstance</TypeName>


</wfs:GetFeature>

The server returns a feature collection with SI_Gazetteer feature instances:


<?xml version="1.0" encoding="UTF-8"?>


<wfs:FeatureCollection xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:iso19112="http://www.opengis.net/iso19112" xmlns:gco="http://www.isotc211.org/2005/gco" xmlns:gmd="http://www.isotc211.org/2005/gmd" xmlns:xlink="http://www.w3.org/1999/xlink">



<gml:featureMember>




<iso19112:SI_Gazetteer gml:id="ID_1">





<iso19112:identifier>NGA GNS (Germany subset)</iso19112:identifier>





<iso19112:scope>A scope description goes here</iso19112:scope>





<iso19112:territoryOfUse>






<gmd:EX_GeographicBoundingBox gml:id="ID_BOX_1">







<gmd:westBoundLongitude>








<gco:Decimal>










-180.00









</gco:Decimal>







</gmd:westBoundLongitude>







<gmd:eastBoundLongitude>








<gco:Decimal>










180.00









</gco:Decimal>







</gmd:eastBoundLongitude>







<gmd:southBoundLatitude>








<gco:Decimal>










-90.00









</gco:Decimal>







</gmd:southBoundLatitude>







<gmd:northBoundLatitude>








<gco:Decimal>










90.00









</gco:Decimal>







</gmd:northBoundLatitude>






</gmd:EX_GeographicBoundingBox>





</iso19112:territoryOfUse>





<iso19112:custodian>






<gmd:CI_ResponsibleParty gml:id="ID_RP_1">







<gmd:organisationName>








<gco:CharacterString>NGA</gco:CharacterString>







</gmd:organisationName>







<gmd:role>








<gmd:CI_RoleCode codeList="http://www.example.com" codeListValue="owner"/>







</gmd:role>






</gmd:CI_ResponsibleParty>





</iso19112:custodian>





<iso19112:coordinatesystem>WGS84</iso19112:coordinatesystem>





<iso19112:featureType>






<iso19112:locationType gml:id="ID_ADM1">







<iso19112:name>FIRST-ORDER ADMINISTRATIVE DIVISION</iso19112:name>







<iso19112:theme>Administrative Boundary Features</iso19112:theme>







<iso19112:identifier>name</iso19112:identifier>







<iso19112:owner xlink:href="#ID_RP_1"/>







<iso19112:territoryOfUse xlink:href="#ID_BOX_1"/>






</iso19112:locationType>






<iso19112:locationType gml:id="ID_ADM2">







<iso19112:name>SECOND-ORDER ADMINISTRATIVE DIVISION</iso19112:name>







<iso19112:theme>Administrative Boundary Features</iso19112:theme>







<iso19112:identifier>name</iso19112:identifier>







<iso19112:owner xlink:href="#ID_RP_1"/>







<iso19112:territoryOfUse xlink:href="#ID_BOX_1"/>






</iso19112:locationType>





<!-- more iso19112:locationType instances go here -->






<iso19112:locationType gml:id="ID_PPL">







<iso19112:name>POPULATED PLACE</iso19112:name>







<iso19112:theme>Populated Place Features</iso19112:theme>







<iso19112:identifier>name</iso19112:identifier>







<iso19112:owner xlink:href="#ID_RP_1"/>







<iso19112:territoryOfUse xlink:href="#ID_BOX_1"/>






</iso19112:locationType>





<!-- more iso19112:locationType instances go here -->





</iso19112:featureType>




</iso19112:SI_Gazetteer>



</gml:featureMember>


</wfs:FeatureCollection>


The available location types are advertised in the iso19112:featureType element.


The POPULATED PLACE location type could then be used to fetch all associated SI_LocationInstance feature instances:


<?xml version="1.0" encoding="iso-8859-1"?>


<wfs:GetFeature outputFormat="text/xml; subtype=gml/3.1.1"


  xmlns:wfs="http://www.opengis.net/wfs"


  xmlns:ogc="http://www.opengis.net/ogc"


  xmlns:iso19112="http://www.opengis.net/iso19112">


  <wfs:Query typeName="iso19112:SI_LocationInstance">


    <ogc:Filter>


      <ogc:PropertyIsEqualTo>


        <ogc:PropertyName>locationType/name</ogc:PropertyName>


        <ogc:Literal>POPULATED PLACE</ogc:Literal>


      </ogc:PropertyIsEqualTo>


    </ogc:Filter>


  </wfs:Query>


</wfs:GetFeature>


The server returns a feature collection with SI_LocationInstance feature instances:


<wfs:FeatureCollection


  xmlns:wfs="http://www.opengis.net/wfs"


  xmlns:gml="http://www.opengis.net/gml"


  xmlns:iso19112="http://www.opengis.net/iso19112"


  xmlns:gco="http://www.isotc211.org/2005/gco"


  xmlns:gmd="http://www.isotc211.org/2005/gmd"


  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"


  xsi:schemaLocation="http://www.opengis.net/iso19112 ../iso19112.xsd">


  <gml:description>Example Gazetteer Service Response: SI_LocationInstance Feature Type</gml:description>


  <gml:name>ExampleGazetteerResponse1</gml:name>


  <gml:boundedBy>


    <gml:Envelope srsName="EPSG:4326">


      <gml:lowerCorner>7 50.5</gml:lowerCorner>


      <gml:upperCorner>7.3 51.3</gml:upperCorner>


    </gml:Envelope>


  </gml:boundedBy>


  <gml:featureMember>


    <iso19112:SI_LocationInstance>


      <gml:description>Sample Location Instance from NGA GNS</gml:description>


      <iso19112:geographicIdentifier>


        Bonn


      </iso19112:geographicIdentifier>


      <iso19112:geographicExtent>


        <gmd:EX_GeographicBoundingBox>


          <gmd:westBoundLongitude>


            <gco:Decimal>7.0</gco:Decimal>


          </gmd:westBoundLongitude>


          <gmd:eastBoundLongitude>


            <gco:Decimal>7.2</gco:Decimal>


          </gmd:eastBoundLongitude>


          <gmd:southBoundLatitude>


            <gco:Decimal>50.5</gco:Decimal>


          </gmd:southBoundLatitude>


          <gmd:northBoundLatitude>


            <gco:Decimal>51.2</gco:Decimal>


          </gmd:northBoundLatitude>


        </gmd:EX_GeographicBoundingBox>


      </iso19112:geographicExtent>


      <iso19112:position>


        <gml:Point srsName="EPSG:4326">


          <gml:pos>7.1 50.7333333</gml:pos>


        </gml:Point>


      </iso19112:position>


      <iso19112:administrator>


        <gmd:CI_ResponsibleParty>


          <gmd:organisationName>


            <gco:CharacterString>NGA</gco:CharacterString>


          </gmd:organisationName>


          <gmd:role>


            <gmd:CI_RoleCode codeList="http://www.example.com" codeListValue="owner"/>


          </gmd:role>


        </gmd:CI_ResponsibleParty>


      </iso19112:administrator>


      <iso19112:locationType gml:id="PPL">


        <iso19112:name>Populated Place</iso19112:name>


        <iso19112:theme>Populated Place Features</iso19112:theme>


        <iso19112:identifier>name</iso19112:identifier>


        <iso19112:definition/>


        <iso19112:owner>


          <gmd:organisationName>


            <gco:CharacterString>NGA</gco:CharacterString>


          </gmd:organisationName>


          <gmd:role>


            <gmd:CI_RoleCode codeList="http://www.example.com" codeListValue="owner"/>


          </gmd:role>


        </iso19112:owner>


        <iso19112:territoryOfUse>


          <gmd:EX_GeographicBoundingBox>


            <gmd:westBoundLongitude>


              <gco:Decimal>


                -180.00


              </gco:Decimal>


            </gmd:westBoundLongitude>


            <gmd:eastBoundLongitude>


              <gco:Decimal>


                180.00


              </gco:Decimal>


            </gmd:eastBoundLongitude>


            <gmd:southBoundLatitude>


              <gco:Decimal>


                -90.00


              </gco:Decimal>


            </gmd:southBoundLatitude>


            <gmd:northBoundLatitude>


              <gco:Decimal>


                90.00


              </gco:Decimal>


            </gmd:northBoundLatitude>


          </gmd:EX_GeographicBoundingBox>


        </iso19112:territoryOfUse>


      </iso19112:locationType>


    </iso19112:SI_LocationInstance>


  </gml:featureMember>


    <!-- more GazetteerMember elements ... -->


</wfs:FeatureCollection>


Example 2

This example fetches a subset of properties of the feature type SI_LocationInstance. The feature instances that are retrieved by the request are identified by a substring of the place-name property “geographicIdentifier”.

<?xml version="1.0" encoding="iso-8859-1"?>


<wfs:GetFeature outputFormat="text/xml; subtype=gml/3.1.1"


  xmlns:wfs="http://www.opengis.net/wfs"


  xmlns:ogc="http://www.opengis.net/ogc"


  xmlns:iso19112="http://www.opengis.net/iso19112">


  <wfs:Query typeName="iso19112:SI_LocationInstance">


    <ogc:PropertyName>geographicIdentifier</ogc:PropertyName>


    <ogc:PropertyName>locationType/name</ogc:PropertyName>

    <ogc:Filter>


      <ogc:PropertyIsLike wildCard="%" singleChar="#" escapeChar="!">


        <ogc:PropertyName>geographicIdentifier</ogc:PropertyName>


        <ogc:Literal>Bonn%</ogc:Literal>


      </ogc:PropertyIsLike>


    </ogc:Filter>


  </wfs:Query>


</wfs:GetFeature>


Example 3


This example fetches a subset of properties of the feature type Address which is derived by extension from iso:19112:SI_LocationInstance. The feature instances that are retrieved by the request are identified by a substring of the place-name property “geographicIdentifier” and the name of the parent feature – which in this case is a postal code.


<?xml version="1.0" encoding="iso-8859-1"?>


<wfs:GetFeature outputFormat="text/xml; subtype=gml/3.1.1"


  xmlns:wfs="http://www.opengis.net/wfs"


  xmlns:ogc="http://www.opengis.net/ogc"


  xmlns:myns="http://www.example.com/myns"


  xmlns:iso19112="http://www.opengis.net/iso19112">


  <wfs:Query typeName="myns:Address">


    <ogc:PropertyName>geographicIdentifier</ogc:PropertyName>


    <ogc:PropertyName>locationType/name</ogc:PropertyName>

    <ogc:Filter>


      <ogc:And>


        <ogc:PropertyIsLike wildCard="%" singleChar="#" escapeChar="!">


          <ogc:PropertyName>geographicIdentifier</ogc:PropertyName>


          <ogc:Literal>Bahnhof%</ogc:Literal>


        </ogc:PropertyIsLike>


      <ogc:PropertyIsEqualTo>


        <ogc:PropertyName>parent/geographicIdentifier</ogc:PropertyName>


          <ogc:Literal>53123</ogc:Literal>


        </ogc:PropertyIsEqualTo>


      </ogc:And>


    </ogc:Filter>


  </wfs:Query>


</wfs:GetFeature>


Annex A: Abstract test suite 


(normative)




A.1 Test module for general capabilities


A.1.1 General capabilities


8. Test purpose: Confirm that the Gazetteer Service satisfies conformance requirements that generally apply to all service interactions.


9. Test method: Falsification testing of HTTP response.


10. Reference: OGC 05-025r1 


11. Test type: Capability


A.1.2 Required capabilities


12. Test purpose: Confirm that the Gazetteer Service satisfies profile specific requirements in terms of supported operations.


13. Test method: Inspection of GetCapabilities response: verify that mandatory operations are support for all required invocation (DCP) methods. 


14. Reference: Clause 7.2


15. Test type: Capability


A.2 
Test module for Accessible Content conformance


A.2.1
Gazetteer Service advertised


Test case identifier: 



urn:x-ogc:specification:wfs-g:atc:content: AdvertiseSIGazetteerSchema


Test purpose: Confirm that the service satisfies conformance requirement that a gazetteer service is available.


Test method: Check SI_Gazetteer Feature Type is advertised in the GetCapabilities response.


Reference:  Clause 8.3.1


Test type: Capability


A.2.2
SI_Gazetteer Feature Type response conformance


Test case identifier: 



urn:x-ogc:specification:wfs-g:atc:content:ValidateSIGazetteerSchema


Test purpose(s): Confirm that GetFeatures response if well structured for type SI_Gazetteer


Test method: Invoke GetFeature operation to return all records of type SI_Gazetteer. Check response validates against published schema.

Reference: Clause 8.3.1,  Annex B.


Test type: Basic


A.2.2
Gazetteers refer to available feature types


Test case identifier: 



urn:x-ogc:specification:wfs-g:atc:content:GazetteerLocationTypesAvailable


Test purpose(s): Confirm that the feature types advertised in available gazetteers are provided.


Test method: Invoke GetFeature operation to return all records of type SI_Gazetteer. Check that each of the feature types referenced in the SI_Gazetteer/featureType property of the result set are advertised in the capabilities document

Reference: Clause 8.3.1, 


Test type: Basic


A.2.2
SI_LocationInstance conformance 


Test case identifier: 



urn:x-ogc:specification:wfs-g:atc:content:SILocationTypesConformant


Test purpose(s): Confirm that the gazetteer will correctly respond to requests based on the SI_LocationInstance featureType


Test method: Invoke GetFeatures on SI_LocationInstance feature type and validate response against SI_LocationInstanceType schema. Invoke GetFeatures using queries that specify name and location and check that a valid subset is returned for these queries.


Reference: Clause 10.1


Test type: Basic


A.2.2
SI_LocationInstance extensions conformance 


Test case identifier: 



urn:x-ogc:specification:wfs-g:atc:content:GazetteerLocationTypesConformant


Test purpose(s): Confirm that the feature types advertised in available gazetteers are specified as conformant extensions of SI_LocationInstance


Test method: Invoke DescribeFeatureType operation to for all featureTypes referenced in SI_Gazetteer records. Check that each of the feature types is derived from SI_LocationInstanceType or is declared as substitutable for the SI_LocationInstance element.


Reference: Clause 9


Test type: Basic


Annex B: XML schemas


 (normative)



XML schemas are attached to this draft specification in a zip file.


In addition to this document, this specification includes several normative XML Schema files. These are to be posted online at the URL http://schemas.opengeospatial.net/gazetteer where a lower level directory is used for this Version (1.0.0). These XML Schema files are also bundled in a zip file with the present document. In the event of a discrepancy between the bundled and online versions of the XML Schema files, the online files shall be considered authoritative.


All these XML Schemas contain documentation of the meaning of each element and attribute, and this documentation shall be considered normative as specified in Subclause 11.6.3 of [OGC 05-008].


Annex C: Use Cases


(informative)


D.1 Navigation Use Case


In this use case, a viewer client application wishes to give the user the ability to navigate through a spatially organised information service using place names. This can be done by either allowing structured searches or by browsing a hierarchy of gazetteer terms to narrow down search requirements. The browse tree view of such a hierarchy is the general portrayal case, and gazetteer service searches return sub-trees of varying complexity. 


Although this provides a framework for rich functionality, a simple Gazetteer Service can return an unstructured list that is either the child nodes of a query term, or possibly a complete list of nodes generated by walking the tree. In the most trivial case, the tree depth is one and there is no hierarchy. 


The user can then select a geographic feature of interest for a variety of actions, for example:


a) Zoom a map or otherwise run a query relating to the feature; 


b) Refine navigation choices with a new list of features within the feature specified; and


c) Focus a locator map on a new scale, to show position of bottom most (target) term.  


The interface would either build such a tree through recursive calls to the Gazetteer Service, or be able to extract a fully formed tree from a single call. 


D.2 “Geocoding” Use Case


This Use Case pertains to a Geocoder Service that invokes a Gazetteer Service to extract a particular set of geometries that pertain to a given set of identifiers, which are derived from arbitrary resources. 


The use of a network-accessible Gazetteer Service by a Geocoder Service may have the following advantages:


· The target vocabulary might be huge 


· The target vocabulary may be highly specialized 


· The target vocabulary may be partitioned across multiple nodes (e.g. use Australian Gazetteer Service to get Australian place names) 


· The geometry of the Gazetteer Service may be inconvenient for the Geocoder Service to manage internally (e.g. size, multiple equivalents, on-the-fly generalization and re-projection required)


Other uses may include: 


· Acquisition of a vocabulary for re-use (i.e. a generic Geoparser Service is pointed at documents containing names of water features in Uzbekhistan – it might load the relevant Gazetteer Service out-of-band and cache it for some period). In this case consideration should be given to a “Gazetteer Content Standard” such as the Alexandria Digital Library Gazetteer Content Standard. 


· A set of terms may be sent as a batch and a single response retrieved for improved efficiency. (Note this may simply replace the need for a Geocoder Service to remember common terms – although its own encoding of the geocoded output should re-use features.) 


D.3 Service Invocation Use Case


A client or agent application performing service chaining may wish to exploit a Gazetteer Service to broaden particular search queries at run-time. For example, if the application is looking for information relevant to a particular suburb, it may wish to invoke a Gazetteer Service to find the city that contains the suburb in order to invoke a service organized by city names. 


Consider the case of a tool to help locate relevant information – given a term, it might search for all synonyms of the term, thus making the term broader until a suitable result set is found. In this way, today's rather primitive Web search collections could possibly be exploited to harvest related content.


D.4 Geographic Selection Use Case


A simple use of such an interface is to access a feature collection that acts as a non-hierarchical collection of named features. A request by a client or agent may be to return all named features of a given feature type or types that fall within a specific bounding geometry. This essentially general WFS request would return features that may not have the associations present in other use cases, and are therefore all “root” nodes. This interface would be easiest to realize against spatial data sets that have no explicit relationships among features, allowing the client to use and build filters to select different sets of features.


There may be no a-priori knowledge of a desired Gazetteer Service. This knowledge may be derived at run time according to other metadata from the source feature or document.  Accordingly, the client should not need to store all possible instances of Gazetteer Services, but rather needs to be able to discover them at run time, as needed.


Annex D: Bibliography


[1] ISO 31 (all parts), Quantities and units.


[2] IEC 60027 (all parts), Letter symbols to be used in electrical technology.


[3] ISO 1000, SI units and recommendations for the use of their multiples and of certain other units.


[4] Guidelines for Successful OGC Interface Specifications, OGC document 00-014r1


Document type:   	OGC™ Candidate Implementation Specification


Document subtype:   	Application Profile


Document stage:   	Proposed version 


Document language: 	English








		

		









05-035r2.pdf


Best Practices Document 


 
 


Open Geospatial Consortium Inc.  
Date: 2006-06-05 


Reference number of this OGC™ document: OGC 05-035r2 


Version: 0.9.3 


Category: OGC™ Candidate Implementation Specification 


Editor: Jens Fitzke, Rob Atkinson 


OGC Best Practices Document: 


Gazetteer Service - 
Application Profile of the Web Feature Service Implementation 


Specification 


Copyright © 2006 Open Geospatial Consortium. All Rights Reserved. 
To obtain additional rights of use, visit http://www.opengeospatial.org/legal/ 


Warning 


This document is not an OGC Standard. It is distributed for review and comment. It is 
subject to change without notice and may not be referred to as an OGC Standard. 
Recipients of this document are invited to submit, with their comments, notification of 
any relevant patent rights of which they are aware and to provide supporting 
documentation. 


Document type:    OGC™ Candidate Implementation Specification 
Document subtype:    Application Profile 
Document stage:    Proposed version  
Document language:  English 







OGC 05-035r2 


Contents Page


1 Scope........................................................................................................................9 
2 Conformance..........................................................................................................11 
3 Normative references .............................................................................................12 
4 Terms and definitions ............................................................................................12 
5 Conventions ...........................................................................................................12 


5.1 Abbreviated terms..................................................................................................12 
5.2 UML notation.........................................................................................................13 
5.3 Document terms and definitions ............................................................................13 


6 Gazetteer Service overview ...................................................................................13 
6.1 Processing Requests...............................................................................................13 


7 Shared aspects........................................................................................................14 
7.1 Introduction............................................................................................................14 
7.2 Operation request encoding ...................................................................................14 


8 GetCapabilities operation (required)......................................................................15 
8.1 Introduction............................................................................................................15 
8.2 Operation request ...................................................................................................15 
8.3 GetCapabilities operation response........................................................................15 


Normal response ..........................................................................................................15 
9 DescribeFeatureType operation (required) ............................................................16 


9.1 Introduction............................................................................................................16 
9.2 Examples................................................................................................................16 


10 GetFeature operation (required).............................................................................18 
10.1 Introduction............................................................................................................18 
10.2 Examples................................................................................................................19 


Annex A: Abstract test suite ..............................................................................................24 
A.1 Test module for general capabilities ......................................................................24 


A.1.1 General capabilities ...........................................................................................24 
A.1.2 Required capabilities .........................................................................................25 


A.2 Test module for Accessible Content conformance ................................................25 
A.2.1 Gazetteer Service advertised .............................................................................25 
A.2.2 SI_Gazetteer Feature Type response conformance ...........................................25 
A.2.2 Gazetteers refer to available feature types.........................................................25 
A.2.2 SI_LocationInstance conformance ....................................................................26 
A.2.2 SI_LocationInstance extensions conformance ..................................................26 


Annex B: XML schemas....................................................................................................27 
Annex C: Use Cases...........................................................................................................27 


D.1 Navigation Use Case................................................................................................27 
D.2 “Geocoding” Use Case.............................................................................................28 
D.3 Service Invocation Use Case....................................................................................28 
D.4 Geographic Selection Use Case ...............................................................................29 







Best Practices Document 


 
 


 


Figures 
Figure 1 Gazetteer class diagram (from ISO 19112) .......................................................... 9 


Figure 2 ISO19112 model refactored to conform to ISO19118 ....................................... 10 


 







OGC 05-035r2 


  
 


i. Preface 


There is growing interest in the development of a common feature-based model for 
access to named features, often referred to as a gazetteer. Two major activities form the 
basis of this specification, an OGC Discussion paper on gazetteers, and an ISO draft 
standard for geographic identifiers. 


As a result of the OGC Geospatial Fusion Services Testbed Phase I and the Web 
Mapping Testbed Phase II, an Open GIS Gazetteer Interface was defined and published 
as an OGC Discussion Paper [OGC 2001]. The standardization process in the ISO TC 
211 led to a separate mature draft standard defining "Spatial referencing by geographic 
identifiers" [ISO19112] that defines an abstract model to be implemented by a gazetteer 
service. 


The outcomes of these activities have been taken into account and a consolidated 
Gazetteer Service implementation specification has been developed and published as a 
discussion paper [OGC 02-076r3]. As the underlying specifications have been further 
developed the present document makes the necessary adjustments. 


The Gazetteer Service is a specialized Application Profile (hereafter referred to as 
“profile”) of a Web Feature Service that specifies a minimum set of Feature Types and 
operations required to support an instance of a gazetteer service. Instances within a 
collection of gazetteer features may be – as the terms in a thesaurus – related to each 
other and constitute a hierarchical vocabulary of geographic places. The overall 
information model is here implemented as a GML application schema that defines a 
general feature type to be served by a Gazetteer Service. 


By using the capabilities of a Web Feature Server, the Gazetteer Service as proposed here 
exposes the following interfaces to query location instances in a gazetteer database: 


• Get or Query features based on thesaurus-specific properties (broader term (BT), 
narrower term (NT), related term (RT) 


• Retrieve properties of the gazetteer database, such as the location type class 
definitions and the spatial reference system definitions 


Suggested additions, changes, and comments on this draft report are welcome and 
encouraged. Such suggestions may be submitted by OGC portal message, email message, 
or by making suggested changes in an edited copy of this document. 


The changes made in this document version, relative to the previous version, are tracked 
by Microsoft Word, and can be viewed if desired. If you choose to submit suggested 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  5
 


changes by editing this document, please first accept all the current changes, and then 
make your suggested changes with change tracking on. 


ii. Submitting organizations 


The following organizations submitted this document to the Open Geospatial Consortium 
Inc.  


a) lat/lon GmbH 
b) US Federal Geographic Data Committee 
c) GeoConnections / Natural Resources Canada (Environment Canada) 
d) Social Change Online Pty Ltd 


iii. Document contributor contact points 


All questions regarding this document should be directed to the editor or the contributors: 


Contact Company Email 
Jens Fitzke lat/lon GmbH fitzke@lat-lon.de 
Rob Atkinson Social Change Online  rob@socialchange.net.au 
Doug Nebert US Federal Geographic Data Committee ddnebert@fgdc.gov 
Tom Kralidis GeoConnections / Natural Resources Canada 


(Environment Canada) 
tom.kralidis@ec.gc.ca 


iv. Revision history 


Date Release Editor Primary clauses 
modified 


Description 


2005-04-12    New Document structure according to 05-009 
2005-10-11 0.9.1 Fitzke all Complete revision. 
2005- 0.9.1 Carl Reed Numerous Edits for consistency, grammar, etc. 
2006-01-09 0.9.1 Jens Fitzke GetFeature 


examples 
Added more examples. Minor corrections on 
document and schema / example files. 


2006-03-16 0.9.2 Rob 
Atkinson 


all ISO 19112 data model conformance 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  6
 


2006-05-29 0.9.3 Rob 
Atkinson 


All Editorial revision filling in missing clauses. 
Added abstract conformance tests. Some 
reorganisation of order 


2006-05-29 0.9.3 Jens Fitzke All Minor edits in contributors section and others. 
Added further examples. 


2006-06-03 0.93 Rob 
Atkinson 


Appendix C Samples, formatting 


v. Changes to the OGC Abstract Specification 


The OpenGIS™ Abstract Specification does not require changes to accommodate this 
OpenGIS™ standard. It is recommended however that the Abstract Specification be 
extended to explicitly incorporate the ISO 19112 standards to be consistent with current 
practice with regards to implementation of ISO TC211 standards. 


vi. Future work 


This profile implements the minimal set of elements from the ISO 19112 model to 
provide useful, standardised services. 


Future extensions may include convenience methods to traverse parent/child 
relationships, vocabulary-oriented access protocols. 


The main area requiring standardisation relates to the definition of Feature Types and the 
correspondence to SI_LocationType. Currently, the implementation supports a token or a 
URL reference, whose semantics are clear, but the details of the target object is 
unspecified. 


In the future, Gazetteer Services may have transactional interfaces added to enable 
updates by ad-hoc authorities. This could be implemented using WFS transactional 
capabilities but may require constraints over the content model to conform to ISO 19112 
semantics.  







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  7
 


Foreword 


This document cancels and replaces OGC 02-076r3. It represents a complete revision of 
this former document version, especially with respect to WFS, Geography Markup 
Language (GML), and ISO 19139 (Geographic Metadata Implementation Model). The 
Gazetteer Service is considered a profile of the WFS specification. It is related to and 
makes use of the WFS, Filter Encoding, GML, and ISO 19139 specifications. 


This document includes 4 annexes; Annexes A, B are normative, and Annexes C, D are 
informative. 


Attention is drawn to the possibility that some of the elements of this document may be 
the subject of patent rights. The OGC shall not be held responsible for identifying any or 
all such patent rights. 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  8
 


Introduction 


This document defines a Gazetteer Service profile of the OGC Web Feature Service 
Specification. The OGC Gazetteer Service allows a client to search and retrieve elements 
of a georeferenced vocabulary of well-known place-names. 


This profile extends the WFS interface in a way that a client is able to 


– Determine if a WFS implementation is acting as a Gazetteer Service.  
– Query the Gazetteer Service in order to retrieve place-name features 


without closer examination of the feature type definitions 
– Access metadata about the gazetteer(s) provided by the service 
 


To ensure semantic interoperability this profile defines the response schema elements 
according to the gazetteer data model defined in [ISO 19112]. 


The overall design principle of this profile is to make gazetteer service behaviour to be 
completely predictable, and allowing setup as easy as possible – provided that a web 
feature service instance is available. The following list gives an overview of the specific 
characteristics of a gazetteer service in comparison to a web feature service: 


– The service type is “WFS” (this allows a server instance to act both as a 
general web feature service and a gazetteer service). 


– The gazetteers (collection of locations) are described by metadata objects 
of a well defined feature type (SI_Gazetteer). Presence of this feature type is 
sufficient to determine that a service acts a gazetteer for the FeatureTypes described 
by the collection of SI_Gazetteer objects. 


– The Gazetteer WFS serves at least one FeatureType derived from 
SI_LocationInstance and described by a feature of type SI_Gazetteer 


– To support absolute URL references to single instances of a place-name 
database a  gazetteer service is able to process KVP-encoded GetFeature requests 
issued by using HTTP GET. 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  9
 


Gazetteer Profile of the Web Feature Service Implementation 
Specification 


1 Scope 


This OpenGIS™ document specifies the OpenGIS Gazetteer Service operations as a 
profile of the Web Feature Service (WFS-G). Services compliant with this specification 
shall provide Feature Types derived by extension from the well-known Feature Type 
SI_LocationInstance. In Addition, they may support queries based on the 
(parent/child) relationships of feature instances, as defined in ISO 19112. 


Geographic Features: SI_LocationInstance 


The following UML class diagram illustrates the concept of the base Feature Types 
SI_Gazetteer and SI_LocationInstance: 


cd Gazeteer


Gazetteer::SI_Gazetteer
{root,leaf}


+ name:  RS_Identifier
+ scope[0..1]:  CharacterString
+ territoryOfUse:  EX_GeographicExtent
+ custodian:  
+ coordinate_system[0..1]:  SC_CRS
+ isGlobal:  Boolean
+ acceptableClassList:  Set<TypeName> = {Any}


ReferenceSystem by Identifier::SI_LocationType
{root,leaf}


+ name:  RS_Identifier
+ theme:  CharacterString
+ identifier:  CharacterString
+ definition:  CharacterString
+ owner:  
+ territoryOfUse:  EX_GeographicExtent


positions must be recorded if the geographic identifier 
contains insufficient information to identify location


Gazetteer::SI_LocationInstance
{root,leaf}


+ geographicIdentifier:  CharacterString
+ alterrnativeGeographicIdentifier[0..*]:  CharacterString
+ geographicExtent[0..1]:  EX_GeographicExtent
+ temporalExtent[0..1]:  EX_TemporalExtent
+ administrator:  
+ position[0..1]:  GM_Point


ReferenceSystem by Identifier::
SI_SpatialReferenceSystemUsingGeographicIdentifiers


{leaf}


+ theme:  CharacterString
+ overallOwner:  
+ territoryOfUse:  EX_GeographicExtent


1..*+locationType1..*+locationTypes


0..*+referenceSystem


+child 0..*


+parent 0..*


1..*+comprises


1..*+gazetteer


+parent 0..*


+child 0..*


1


+locationType


 


Figure 1 Gazetteer class diagram (from ISO 19112) 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  10
 


The scope of the gazetteer service is to provide SI_LocationInstance derived objects, and 
metadata via SI_Gazetteer objects. FeatureTypes (SI_LocationType) are assumed to be 
implemented in a Feature Type Catalog in accordance with [ISO 19110] and so no 
requirement to serve these non-spatial definition objects is specified. This clause also 
allows purely 2D-spatial WFS services to conform to the WFS-G profile. 


SI_LocationType Feature Types may be supported by a Gazetteer Service to describe the 
Gazetteer’s internal organization. 


Note that the object model for ISO 19112 has been refactored according to the rules of 
ISO19118 to allow generation of normative GML 3 application schemas. Figure 2 shows 
the extent of the refactored model (named ISO19112_Impl) 


cd ISO19112_Context


«FeatureType»
SI_LocationInstance


+ geographicIdentifier:  CharacterString
+ alternativeGeographicIdentifier:  CharacterString [0..*]
+ geographicExtent:  EX_GeographicExtent [0..1]
+ temporalExtent:  EX_TemporalExtent [0..1]
+ position:  GM_Point [0..1]


«Type»
Names::GenericName


+ depth() : Integer
+ getObject() : Any
+ parsedName() : Sequence<LocalName>


«FeatureType»
SI_Gazetteer


+ name:  RS_Identifier
+ scope:  CharacterString [0..1]
+ custodian:  CI_ResponsibleParty
+ territoryOfUse:  EX_GeographicExtent
+ isGlobal:  Boolean
+ srsName:  anyURI


Gazetteer is a 
"NameSpace" - 
not shown here 
due to issues in 
schema 
generation


SI_LocationType


+ name:  RS_Identifier
+ identifier:  CharacterString
+ theme:  CharacterString
+ definition:  CharacterString
+ territoryOfUse:  EX_GeographicExtent
+ owner:  CI_ResponsibleParty


SI_LocationType probably ought 
to be subtyped from a ISO19126 
Feature - to reinforce the issue of 
governance of the definition and 
the fact that the features 
referenced in the gazetter may 
have authoritative 
implementations accessible using 
these feature types.


The SI_LocationType may be referenced only, and provides a way to 
identify which FeatureTypes served by a gazetteer implement which 
gazetteer (location collection).


1


+featureType


+parent 0..1


1+locationType


0..1+gazetteer


 


Figure 2 ISO19112 model refactored to conform to ISO19118 


 


Operations 


To support query processing, a gazetteer service has the following operations: 


GetCapabilities 


As a web feature service, a gazetteer service must be able to describe its capabilities. 
Specifically, it must indicate which feature types it can service, what operations are 
supported on each feature type, and what the structure of the gazetteer database is 
like. 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  11
 


DescribeFeatureType 


As a web feature service, a gazetteer service must be able, upon request, to describe 
the structure of any feature type it can service. Gazetteer service feature types are 
derived from the base type SI_LocationInstance. 


GetFeature 


As a web feature service, a gazetteer service must be able to service a request to 
retrieve feature instances. In addition, the client should be able to specify which 
feature properties to fetch and should be able to constrain the query spatially and 
non-spatially. 


The above operations are common to versions 1.0 and 1.1 of the WFS specification. 
Additional constraints are that WFS 1.0 must support the GML 2.1 implementation of 
each FeatureType, whereas WFS 1.1 must support the GML 3.1.1 implementation. Each 
may optionally advertise and support the alternative format, thus a WFS 1.0 conformant 
service may support GML3.1.1 as an optional output format. 


Additionally, a gazetteer service supporting WFS 1.1 interface may implement the 
GetGMLObject operation: 


GetGMLObject 


A gazetteer service may be able to service a request to retrieve element instances by 
traversing XLinks that refer to their XML Ids. 


Based on the operation descriptions above, two classes of gazetteer services can be 
defined: 


Basic Gazetteer Service 


A basic Gazetteer Service would implement the GetCapabilities, 
DescribeFeatureType and GetFeature operations. 


XLink Gazetteer Service 


An XLink Gazetteer Service would support all the operations of a basic gazetteer 
service and in addition it would implement the GetGmlObject operation for local 
and/or remote XLinks, and offer the option for the GetGmlObject operation to be 
performed during GetFeature operations. 


 


2 Conformance 


Conformance with this specification shall be checked using all the relevant tests specified 
in Annex A (normative). 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  12
 


3 Normative references 


The following normative documents contain provisions that, through reference in this 
text, constitute provisions of this document. For dated references, subsequent 
amendments to, or revisions of, any of these publications do not apply. For undated 
references, the latest edition of the normative document referred to applies. 


ISO 19105:2000, Geographic information — Conformance and Testing 


ISO 19112:2003, Geographic information — Spatial Referencing by Geographic 
Identifiers 


OGC 05-008, OGC Web Services Common Specification 


OGC 03-105r1, Geography Markup Language (GML) Implementation Specification 
version 3.1.1 


OGC 04-094,Web Feature Service Implementation Specification version 1.1 


OGC 04-095, Filter Encoding Implementation Specification version 1.1 


The OWS Common Specification contains a list of normative references that are also 
applicable to this candidate Implementation Specification. 


In addition to this document, this specification includes several normative XML Schema 
files. These are posted online at the URL http://schemas.opengis.net/gazetteer/1.0/. These 
XML Schema files are also bundled with the present document. In the event of a 
discrepancy between the bundled and online versions of the XML Schema files, the 
online files shall be considered authoritative. 


4 Terms and definitions 


For the purposes of this specification, the definitions specified in Clause 4 of the OWS 
Common Implementation Specification [OGC 05-008] shall apply. In addition, the 
following terms and definitions apply. 


Gazetteer: A database used to translate between different representations of geospatial 
references, such as place names and geographic coordinates 


5 Conventions 


5.1 Abbreviated terms 


Most of the abbreviated terms listed in Subclause 5.1 of the OWS Common 
Implementation Specification [OGC 05-008] apply to this document, plus the following 
abbreviated terms. 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  13
 


FTC: Feature Type Catalog 


5.2 UML notation 


Most diagrams that appear in this specification are presented using the Unified Modeling 
Language (UML) static structure diagram, as described in Subclause 5.2 of [OGC 05-
008]. 


5.3 Document terms and definitions 


This document uses the specification terms defined in Subclause 5.3 of [OGC 05-008]. 


6 Gazetteer Service overview 


A Gazetteer defines a set of location instances, each of which provides a binding between 
representations of a location within a CRS and as an identifier. Each location instance is a 
Feature, and is a (possibly one of many) representation of a “real-world” object. The 
representation of the real-world object within the Gazetteer is designed to be used to 
perform this translation, and to allow the set of such Features to be discovered and 
searched. 


The gazetteer service is thus a WFS serving a predictably structured set of features 
representing Gazetteers and the sets of location instances they contain. 


The constraints are common to versions 1.0 and 1.1 of the WFS specification. Additional 
constraints are that WFS 1.0 must support a GML 2.1 implementation of each 
FeatureType, whereas WFS 1.1 must support the GML 3.1.1 implementation. Each may 
optionally advertise and support the alternative format, thus a WFS 1.0 conformant 
service may support GML3.1.1 as an optional output format. 


6.1 Processing Requests 


This section of the document outlines, in general terms, the protocol to be followed in 
order to process Gazetteer Service requests. Processing requests would proceed as 
follows: 


1. A client application (optionally) would request a capabilities document from the 
WFS-G.  Such a document contains a description of all the operations that the 
WFS-G supports, a list of all feature types that it can service, and a description 
of the structure of the underlying gazetteer datastore. 


2. A client application (optionally) makes a request to a web feature service for the 
definition of one or more of the feature or element types that the WFS-G can 
service. (This is optional, and may be used to discover additional elements  


3. A client application (optionally) requests the set of gazetteer metadata 
SI_Gazetteer objects to identify the feature types that implement the gazetteer 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  14
 


data model. (These feature types will be SI_LocationInstance or a type 
derived from this by extension) 


4. Based on the definition of the SI_LocationInstance Feature Type, and possibly 
other properties of a specified Feature Type that extends this, the client 
application generates a request as specified in the WFS interface [OGC 04-
094]  


5. The WFS-G is invoked to read and service the request.   


6. When the WFS-G has completed processing the request, it will generate a status 
report and hand it back to the client. In the event that an error has occurred, 
the status report will indicate that fact. 


Note that “client application” may include Registries and other middleware, as well as 
conventionally understood “end-users”. 


Note also that a client may be “bound” to the Gazetteer service content by configuration, 
or discover the implementing SI_LocationInstance FeatureTypes through a services 
registry and may thus be able to skip steps 1,2 and 3.  


The definition of the WFS-G profile is intended to make the discovery and invocation of 
WFS-G services possible through service registries. 


 


7 Shared aspects 


7.1 Introduction 


This clause specifies aspects of the Gazetteer Service behavior that are shared by several 
operations. 


7.2 Operation request encoding 


The encoding of operation requests shall use HTTP GET with KVP encoding and HTTP 
POST with XML and/or KVP encoding as specified in Clause 11 of [OGC 05-008]. 
Table 1 summarizes the Gazetteer Service operations and their encoding methods defined 
in this specification. 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  15
 


Table 1 — Operation Request Encoding 


Operation Request Encoding 
GetCapabilities (required) XML and mandatory KVP 
DescribeFeatureType (required) XML and mandatory KVP  
GetFeature (required) XML and optional KVP  


 


8 GetCapabilities operation (required) 


8.1 Introduction 


This is a standard WFS requirement, with both the request and response requirements 
unchanged by the WFS-G profile. 


The mandatory GetCapabilities operation allows clients to retrieve service metadata from 
a Gazetteer server. The response to a GetCapabilities request shall be an XML document 
containing service metadata about the server, including specific information about the 
feature types it can service, and the supported operations on each feature type. This 
clause specifies the XML document that a Gazetteer server must return to describe its 
capabilities. 


8.2 Operation request 


The GetCapabilities operation request shall be as specified in Subclauses 7.2.2 through 
7.2.4 of [OGC 05-008]. The “service”, “request”, and “AcceptVersions” parameters shall 
be implemented by all gazetteer services. The “Sections” and “updateSequence” 
parameters are optional implementation by gazetteer services. All gazetteer services shall 
implement HTTP GET transfer of the GetCapabilities operation request, using KVP 
encoding. Services can also implement HTTP POST transfer of the GetCapabilities 
operation request, using XML encoding only. 


The value of the “service” parameter shall be “WFS”. The allowed set of service 
metadata (or Capabilities) XML document section names and meanings shall be as 
specified in Tables 3 and 7 of [OGC 05-008]. 


 


8.3 GetCapabilities operation response 


Normal response 


The WFS-G profile creates no additional requirements of the WFS GetCapabilities 
operation beyond the ability to serve the nominated Feature Types: 
SI_Gazetteer and SI_LocationInstance (or a derived type advertised in SI_Gazetteer 
records). 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  16
 


 
 


9 DescribeFeatureType operation (required) 


9.1 Introduction 


The DescribeFeatureType operation allows gazetteer clients to retrieve schema 
descriptions which define, how the gazetteer server will generate feature instances on 
output (in response to GetFeature requests). 


This profile makes no further changes to this WFS operation except that it defines a base 
schema for certain FeatureTypes.


9.2 Examples 


To request a feature type schema document, a client could issue the following 
DescribeFeatureType operation request with minimum contents: 


http://ogc.a-domain.org/wfs-g?  
 service=WFS 
 &request=DescribeFeatureType 
 &typename=iso19112:SI_LocationInstance 
 &namespace=xmlns(iso19112=http://www.opengis.net/iso19112) 
 


The corrsponding minimum request encoded in XML is:


 
<?xml version="1.0" ?> 
<wfs:DescribeFeatureType 
   version="1.1.0" 
   service="WFS"  
   xmlns:iso19112="http://www.opengis.net/iso19112" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xsi:schemaLocation="http://www.opengis.net/wfs 
../wfs/1.1.0/WFS.xsd"> 
   <TypeName>iso19112:SI_LocationInstance</TypeName> 
</wfs:DescribeFeatureType> 
 
 


In response to such a request, the gazetteer server might generate a document that looks 
like the following example: 


<?xml version="1.0" encoding="UTF-8"?> 
<schema xmlns="http://www.w3.org/2001/XMLSchema" 
xmlns:gmd="http://www.isotc211.org/2005/gmd" 
xmlns:gml="http://www.opengis.net/gml" 
xmlns:iso19112="http://www.opengis.net/iso19112" 
elementFormDefault="qualified" 
targetNamespace="http://www.opengis.net/iso19112" version="1.0"> 
<import namespace="http://www.opengis.net/gml" 
schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd"/> 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  17
 


  <import namespace="http://www.isotc211.org/2005/gmd" 
schemaLocation="http://www.seegrid.csiro.au/xsd/iso19139/gml3.1.1versio
n/gmd/gmd.xsd"/> 
  <element name="SI_LocationInstance" substitutionGroup="gml:_Feature" 
type="iso19112:SI_LocationInstanceType"/> 
  <complexType name="SI_LocationInstanceType"> 
    <complexContent> 
      <extension base="gml:AbstractFeatureType"> 
        <sequence> 
          <element name="geographicIdentifier" type="string"/> 
          <element maxOccurs="unbounded" minOccurs="0" 
name="alternativeGeographicIdentifier" type="string"/> 
          <element minOccurs="0" name="geographicExtent"> 
            <complexType> 
              <sequence minOccurs="0"> 
                <element ref="gmd:EX_GeographicExtent_PropertyType"/> 
              </sequence> 
              <attributeGroup ref="gml:AssociationAttributeGroup"/> 
            </complexType> 
          </element> 
          <element minOccurs="0" name="temporalExtent"> 
            <complexType> 
              <sequence minOccurs="0"> 
                <element ref="gmd:EX_TemporalExtent_PropertyType"/> 
              </sequence> 
              <attributeGroup ref="gml:AssociationAttributeGroup"/> 
            </complexType> 
          </element> 
          <element minOccurs="0" name="position" 
type="gml:PointPropertyType"/> 
          <element minOccurs="0" name="gazetteer" 
type="iso19112:SI_GazetteerPropertyType"/> 
          <element name="locationType" 
type="iso19112:SI_LocationTypePropertyType"/> 
          <element minOccurs="0" name="parent" 
type="iso19112:SI_LocationInstancePropertyType"/> 
        </sequence> 
      </extension> 
    </complexContent> 
  </complexType> 
  <complexType name="SI_LocationInstancePropertyType"> 
    <sequence minOccurs="0"> 
      <element ref="iso19112:SI_LocationInstance"/> 
    </sequence> 
    <attributeGroup ref="gml:AssociationAttributeGroup"/> 
  </complexType> 
  <complexType name="SI_GazetteerPropertyType"> 
    <sequence minOccurs="0"> 
      <element ref="iso19112:SI_Gazetteer"/> 
    </sequence> 
    <attributeGroup ref="gml:AssociationAttributeGroup"/> 
  </complexType> 
  <element name="SI_LocationType" substitutionGroup="gml:_Feature" 
type="iso19112:SI_LocationTypeType"/> 
  <complexType name="SI_LocationTypeType"> 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  18
 


    <complexContent> 
      <extension base="gml:AbstractFeatureType"> 
        <sequence> 
          <element name="name"> 
            <complexType> 
              <sequence minOccurs="0"> 
                <element ref="gmd:RS_Identifier_PropertyType"/> 
              </sequence> 
              <attributeGroup ref="gml:AssociationAttributeGroup"/> 
            </complexType> 
          </element> 
          <element name="identifier" type="string"/> 
          <element name="theme" type="string"/> 
          <element name="definition" type="string"/> 
          <element name="territoryOfUse"> 
            <complexType> 
              <sequence minOccurs="0"> 
                <element ref="gmd:EX_GeographicExtent_PropertyType"/> 
              </sequence> 
              <attributeGroup ref="gml:AssociationAttributeGroup"/> 
            </complexType> 
          </element> 
          <element name="owner" type="string"/> 
        </sequence> 
      </extension> 
    </complexContent> 
  </complexType> 
  <complexType name="SI_LocationTypePropertyType"> 
    <sequence minOccurs="0"> 
      <element ref="iso19112:SI_LocationType"/> 
    </sequence> 
    <attributeGroup ref="gml:AssociationAttributeGroup"/> 
  </complexType> 
</schema> 


 


10 GetFeature operation (required) 


10.1 Introduction 


The GetFeature operation allows retrieval of features from a gazetteer service.  A 
GetFeature request is processed by a WFS-G and when the value of the outputFormat 
attribute is set to text/gml; subtype=gml/3.1.1, a GML instance document, containing the 
result set, is returned to the client 


This profile makes no changes to this WFS operation. 


The GetFeature operation must support the following behaviour: 


1. get all entries in a gazetteer (empty filter) 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  19
 


2. get all entries in each separate gazetteer (see clause “Supporting Multiple 
Gazetteers”) 


3. get entry by name 


4. get entry by id 


5. get entries within a bounding box 


6. get entries within a polygon geometry 


7. Each of the above queries for a specified featureType 


10.2 Examples 


A client would start to retrieve gazetteer metadata from SI_Gazetteer feature instances: 


<?xml version="1.0" ?> 
<wfs:GetFeature 
   version="1.0.0" 
   service="WFS-G"  
   xmlns="http://www.opengis.net/wfs-g" 
   xmlns:iso19112="http://www.opengis.net/iso19112" 
   xmlns:wfs="http://www.opengis.net/wfs" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xsi:schemaLocation="http://www.opengis.net/wfs 
../wfs/1.1.0/WFS.xsd"> 
   <TypeName>iso19112:SI_LocationInstance</TypeName> 


</wfs:GetFeature> 


The server returns a feature collection with SI_Gazetteer feature instances: 


<?xml version="1.0" encoding="UTF-8"?> 
<wfs:FeatureCollection xmlns:gml="http://www.opengis.net/gml" 
xmlns:wfs="http://www.opengis.net/wfs" 
xmlns:iso19112="http://www.opengis.net/iso19112" 
xmlns:gco="http://www.isotc211.org/2005/gco" 
xmlns:gmd="http://www.isotc211.org/2005/gmd" 
xmlns:xlink="http://www.w3.org/1999/xlink"> 
 <gml:featureMember> 
  <iso19112:SI_Gazetteer gml:id="ID_1"> 
   <iso19112:identifier>NGA GNS (Germany 
subset)</iso19112:identifier> 
   <iso19112:scope>A scope description goes here</iso19112:scope> 
   <iso19112:territoryOfUse> 
    <gmd:EX_GeographicBoundingBox gml:id="ID_BOX_1"> 
     <gmd:westBoundLongitude> 
      <gco:Decimal> 
        -180.00 
       </gco:Decimal> 
     </gmd:westBoundLongitude> 
     <gmd:eastBoundLongitude> 
      <gco:Decimal> 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  20
 


        180.00 
       </gco:Decimal> 
     </gmd:eastBoundLongitude> 
     <gmd:southBoundLatitude> 
      <gco:Decimal> 
        -90.00 
       </gco:Decimal> 
     </gmd:southBoundLatitude> 
     <gmd:northBoundLatitude> 
      <gco:Decimal> 
        90.00 
       </gco:Decimal> 
     </gmd:northBoundLatitude> 
    </gmd:EX_GeographicBoundingBox> 
   </iso19112:territoryOfUse> 
   <iso19112:custodian> 
    <gmd:CI_ResponsibleParty gml:id="ID_RP_1"> 
     <gmd:organisationName> 
      <gco:CharacterString>NGA</gco:CharacterString> 
     </gmd:organisationName> 
     <gmd:role> 
      <gmd:CI_RoleCode codeList="http://www.example.com" 
codeListValue="owner"/> 
     </gmd:role> 
    </gmd:CI_ResponsibleParty> 
   </iso19112:custodian> 
   <iso19112:coordinatesystem>WGS84</iso19112:coordinatesystem> 
   <iso19112:featureType> 
    <iso19112:locationType gml:id="ID_ADM1"> 
     <iso19112:name>FIRST-ORDER ADMINISTRATIVE 
DIVISION</iso19112:name> 
     <iso19112:theme>Administrative Boundary 
Features</iso19112:theme> 
     <iso19112:identifier>name</iso19112:identifier> 
     <iso19112:owner xlink:href="#ID_RP_1"/> 
     <iso19112:territoryOfUse xlink:href="#ID_BOX_1"/> 
    </iso19112:locationType> 
    <iso19112:locationType gml:id="ID_ADM2"> 
     <iso19112:name>SECOND-ORDER ADMINISTRATIVE 
DIVISION</iso19112:name> 
     <iso19112:theme>Administrative Boundary 
Features</iso19112:theme> 
     <iso19112:identifier>name</iso19112:identifier> 
     <iso19112:owner xlink:href="#ID_RP_1"/> 
     <iso19112:territoryOfUse xlink:href="#ID_BOX_1"/> 
    </iso19112:locationType> 
   <!-- more iso19112:locationType instances go here --> 
    <iso19112:locationType gml:id="ID_PPL"> 
     <iso19112:name>POPULATED PLACE</iso19112:name> 
     <iso19112:theme>Populated Place Features</iso19112:theme> 
     <iso19112:identifier>name</iso19112:identifier> 
     <iso19112:owner xlink:href="#ID_RP_1"/> 
     <iso19112:territoryOfUse xlink:href="#ID_BOX_1"/> 
    </iso19112:locationType> 
   <!-- more iso19112:locationType instances go here --> 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  21
 


   </iso19112:featureType> 
  </iso19112:SI_Gazetteer> 
 </gml:featureMember> 
</wfs:FeatureCollection> 


 


The available location types are advertised in the iso19112:featureType element. 


The POPULATED PLACE location type could then be used to fetch all associated 
SI_LocationInstance feature instances: 


 
<?xml version="1.0" encoding="iso-8859-1"?> 
<wfs:GetFeature outputFormat="text/xml; subtype=gml/3.1.1" 
  xmlns:wfs="http://www.opengis.net/wfs" 
  xmlns:ogc="http://www.opengis.net/ogc" 
  xmlns:iso19112="http://www.opengis.net/iso19112"> 
  <wfs:Query typeName="iso19112:SI_LocationInstance"> 
    <ogc:Filter> 
      <ogc:PropertyIsEqualTo> 
        <ogc:PropertyName>locationType/name</ogc:PropertyName> 
        <ogc:Literal>POPULATED PLACE</ogc:Literal> 
      </ogc:PropertyIsEqualTo> 
    </ogc:Filter> 
  </wfs:Query> 
</wfs:GetFeature> 
 
 


The server returns a feature collection with SI_LocationInstance feature instances: 


 
<wfs:FeatureCollection 
  xmlns:wfs="http://www.opengis.net/wfs" 
  xmlns:gml="http://www.opengis.net/gml" 
  xmlns:iso19112="http://www.opengis.net/iso19112" 
  xmlns:gco="http://www.isotc211.org/2005/gco" 
  xmlns:gmd="http://www.isotc211.org/2005/gmd" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.opengis.net/iso19112 ../iso19112.xsd"> 
  <gml:description>Example Gazetteer Service Response: 
SI_LocationInstance Feature Type</gml:description> 
  <gml:name>ExampleGazetteerResponse1</gml:name> 
  <gml:boundedBy> 
    <gml:Envelope srsName="EPSG:4326"> 
      <gml:lowerCorner>7 50.5</gml:lowerCorner> 
      <gml:upperCorner>7.3 51.3</gml:upperCorner> 
    </gml:Envelope> 
  </gml:boundedBy> 
  <gml:featureMember> 
    <iso19112:SI_LocationInstance> 
      <gml:description>Sample Location Instance from NGA 
GNS</gml:description> 
      <iso19112:geographicIdentifier> 
        Bonn 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  22
 


      </iso19112:geographicIdentifier> 
      <iso19112:geographicExtent> 
        <gmd:EX_GeographicBoundingBox> 
          <gmd:westBoundLongitude> 
            <gco:Decimal>7.0</gco:Decimal> 
          </gmd:westBoundLongitude> 
          <gmd:eastBoundLongitude> 
            <gco:Decimal>7.2</gco:Decimal> 
          </gmd:eastBoundLongitude> 
          <gmd:southBoundLatitude> 
            <gco:Decimal>50.5</gco:Decimal> 
          </gmd:southBoundLatitude> 
          <gmd:northBoundLatitude> 
            <gco:Decimal>51.2</gco:Decimal> 
          </gmd:northBoundLatitude> 
        </gmd:EX_GeographicBoundingBox> 
      </iso19112:geographicExtent> 
      <iso19112:position> 
        <gml:Point srsName="EPSG:4326"> 
          <gml:pos>7.1 50.7333333</gml:pos> 
        </gml:Point> 
      </iso19112:position> 
      <iso19112:administrator> 
        <gmd:CI_ResponsibleParty> 
          <gmd:organisationName> 
            <gco:CharacterString>NGA</gco:CharacterString> 
          </gmd:organisationName> 
          <gmd:role> 
            <gmd:CI_RoleCode codeList="http://www.example.com" 
codeListValue="owner"/> 
          </gmd:role> 
        </gmd:CI_ResponsibleParty> 
      </iso19112:administrator> 
      <iso19112:locationType gml:id="PPL"> 
        <iso19112:name>Populated Place</iso19112:name> 
        <iso19112:theme>Populated Place Features</iso19112:theme> 
        <iso19112:identifier>name</iso19112:identifier> 
        <iso19112:definition/> 
        <iso19112:owner> 
          <gmd:organisationName> 
            <gco:CharacterString>NGA</gco:CharacterString> 
          </gmd:organisationName> 
          <gmd:role> 
            <gmd:CI_RoleCode codeList="http://www.example.com" 
codeListValue="owner"/> 
          </gmd:role> 
        </iso19112:owner> 
        <iso19112:territoryOfUse> 
          <gmd:EX_GeographicBoundingBox> 
            <gmd:westBoundLongitude> 
              <gco:Decimal> 
                -180.00 
              </gco:Decimal> 
            </gmd:westBoundLongitude> 
            <gmd:eastBoundLongitude> 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  23
 


              <gco:Decimal> 
                180.00 
              </gco:Decimal> 
            </gmd:eastBoundLongitude> 
            <gmd:southBoundLatitude> 
              <gco:Decimal> 
                -90.00 
              </gco:Decimal> 
            </gmd:southBoundLatitude> 
            <gmd:northBoundLatitude> 
              <gco:Decimal> 
                90.00 
              </gco:Decimal> 
            </gmd:northBoundLatitude> 
          </gmd:EX_GeographicBoundingBox> 
        </iso19112:territoryOfUse> 
      </iso19112:locationType> 
    </iso19112:SI_LocationInstance> 
  </gml:featureMember> 
    <!-- more GazetteerMember elements ... --> 
</wfs:FeatureCollection> 


 


Example 2 


This example fetches a subset of properties of the feature type SI_LocationInstance. The 
feature instances that are retrieved by the request are identified by a substring of the 
place-name property “geographicIdentifier”. 


<?xml version="1.0" encoding="iso-8859-1"?> 
<wfs:GetFeature outputFormat="text/xml; subtype=gml/3.1.1" 
  xmlns:wfs="http://www.opengis.net/wfs" 
  xmlns:ogc="http://www.opengis.net/ogc" 
  xmlns:iso19112="http://www.opengis.net/iso19112"> 
  <wfs:Query typeName="iso19112:SI_LocationInstance"> 
    <ogc:PropertyName>geographicIdentifier</ogc:PropertyName> 
    <ogc:PropertyName>locationType/name</ogc:PropertyName> 
    <ogc:Filter> 
      <ogc:PropertyIsLike wildCard="%" singleChar="#" escapeChar="!"> 
        <ogc:PropertyName>geographicIdentifier</ogc:PropertyName> 
        <ogc:Literal>Bonn%</ogc:Literal> 
      </ogc:PropertyIsLike> 
    </ogc:Filter> 
  </wfs:Query> 
</wfs:GetFeature> 
 
 


Example 3 


This example fetches a subset of properties of the feature type Address which is derived 
by extension from iso:19112:SI_LocationInstance. The feature instances that are 
retrieved by the request are identified by a substring of the place-name property 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  24
 


“geographicIdentifier” and the name of the parent feature – which in this case is a postal 
code. 


<?xml version="1.0" encoding="iso-8859-1"?> 
<wfs:GetFeature outputFormat="text/xml; subtype=gml/3.1.1" 
  xmlns:wfs="http://www.opengis.net/wfs" 
  xmlns:ogc="http://www.opengis.net/ogc" 
  xmlns:myns="http://www.example.com/myns" 
  xmlns:iso19112="http://www.opengis.net/iso19112"> 
  <wfs:Query typeName="myns:Address"> 
    <ogc:PropertyName>geographicIdentifier</ogc:PropertyName> 
    <ogc:PropertyName>locationType/name</ogc:PropertyName> 
    <ogc:Filter> 
      <ogc:And> 
        <ogc:PropertyIsLike wildCard="%" singleChar="#" escapeChar="!"> 
          <ogc:PropertyName>geographicIdentifier</ogc:PropertyName> 
          <ogc:Literal>Bahnhof%</ogc:Literal> 
        </ogc:PropertyIsLike> 
      <ogc:PropertyIsEqualTo> 
        
<ogc:PropertyName>parent/geographicIdentifier</ogc:PropertyName> 
          <ogc:Literal>53123</ogc:Literal> 
        </ogc:PropertyIsEqualTo> 
      </ogc:And> 
    </ogc:Filter> 
  </wfs:Query> 
</wfs:GetFeature> 
 


 


Annex A: Abstract test suite  


(normative) 
 
 


A.1 Test module for general capabilities 


A.1.1 General capabilities 


8. Test purpose: Confirm that the Gazetteer Service satisfies conformance requirements 
that generally apply to all service interactions. 


9. Test method: Falsification testing of HTTP response. 


10. Reference: OGC 05-025r1  


11. Test type: Capability 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  25
 


A.1.2 Required capabilities 


1. Test purpose: Confirm that the Gazetteer Service satisfies profile specific 
requirements in terms of supported operations. 


2. Test method: Inspection of GetCapabilities response: verify that mandatory 
operations are support for all required invocation (DCP) methods.  


3. Reference: Clause 7.2 


4. Test type: Capability 


A.2  Test module for Accessible Content conformance 


A.2.1 Gazetteer Service advertised 


Test case identifier:  
 urn:x-ogc:specification:wfs-g:atc:content: AdvertiseSIGazetteerSchema 


Test purpose: Confirm that the service satisfies conformance requirement that a gazetteer 
service is available. 


Test method: Check SI_Gazetteer Feature Type is advertised in the GetCapabilities 
response. 


Reference:  Clause 8.3.1 


Test type: Capability 


A.2.2 SI_Gazetteer Feature Type response conformance 


Test case identifier:  
 urn:x-ogc:specification:wfs-g:atc:content:ValidateSIGazetteerSchema 


Test purpose(s): Confirm that GetFeatures response if well structured for type 
SI_Gazetteer 


Test method: Invoke GetFeature operation to return all records of type SI_Gazetteer. 
Check response validates against published schema. 


Reference: Clause 8.3.1,  Annex B. 


Test type: Basic 


A.2.2 Gazetteers refer to available feature types 


Test case identifier:  
 urn:x-ogc:specification:wfs-g:atc:content:GazetteerLocationTypesAvailable 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  26
 


Test purpose(s): Confirm that the feature types advertised in available gazetteers are 
provided. 


Test method: Invoke GetFeature operation to return all records of type SI_Gazetteer. 
Check that each of the feature types referenced in the SI_Gazetteer/featureType 
property of the result set are advertised in the capabilities document 


Reference: Clause 8.3.1,  


Test type: Basic 


A.2.2 SI_LocationInstance conformance  


Test case identifier:  
 urn:x-ogc:specification:wfs-g:atc:content:SILocationTypesConformant 


Test purpose(s): Confirm that the gazetteer will correctly respond to requests based on 
the SI_LocationInstance featureType 


Test method: Invoke GetFeatures on SI_LocationInstance feature type and validate 
response against SI_LocationInstanceType schema. Invoke GetFeatures using 
queries that specify name and location and check that a valid subset is returned for 
these queries. 


  


Reference: Clause 10.1 


Test type: Basic 


A.2.2 SI_LocationInstance extensions conformance  


Test case identifier:  
 urn:x-ogc:specification:wfs-g:atc:content:GazetteerLocationTypesConformant 


Test purpose(s): Confirm that the feature types advertised in available gazetteers are 
specified as conformant extensions of SI_LocationInstance 


Test method: Invoke DescribeFeatureType operation to for all featureTypes referenced in 
SI_Gazetteer records. Check that each of the feature types is derived from 
SI_LocationInstanceType or is declared as substitutable for the SI_LocationInstance 
element. 


Reference: Clause 9 


Test type: Basic 


 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  27
 


 


Annex B: XML schemas 


 (normative) 
 


XML schemas are attached to this draft specification in a zip file. 


In addition to this document, this specification includes several normative XML Schema 
files. These are to be posted online at the URL 
http://schemas.opengeospatial.net/gazetteer where a lower level directory is used for this 
Version (1.0.0). These XML Schema files are also bundled in a zip file with the present 
document. In the event of a discrepancy between the bundled and online versions of the 
XML Schema files, the online files shall be considered authoritative. 


All these XML Schemas contain documentation of the meaning of each element and 
attribute, and this documentation shall be considered normative as specified in Subclause 
11.6.3 of [OGC 05-008]. 


 


Annex C: Use Cases 


(informative) 


D.1 Navigation Use Case 


In this use case, a viewer client application wishes to give the user the ability to navigate 
through a spatially organised information service using place names. This can be done by 
either allowing structured searches or by browsing a hierarchy of gazetteer terms to 
narrow down search requirements. The browse tree view of such a hierarchy is the 
general portrayal case, and gazetteer service searches return sub-trees of varying 
complexity.  


Although this provides a framework for rich functionality, a simple Gazetteer Service can 
return an unstructured list that is either the child nodes of a query term, or possibly a 
complete list of nodes generated by walking the tree. In the most trivial case, the tree 
depth is one and there is no hierarchy.  


The user can then select a geographic feature of interest for a variety of actions, for 
example: 


a) Zoom a map or otherwise run a query relating to the feature;  


b) Refine navigation choices with a new list of features within the feature specified; and 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  28
 


c) Focus a locator map on a new scale, to show position of bottom most (target) term.   


The interface would either build such a tree through recursive calls to the Gazetteer 
Service, or be able to extract a fully formed tree from a single call.  


D.2 “Geocoding” Use Case 


This Use Case pertains to a Geocoder Service that invokes a Gazetteer Service to extract 
a particular set of geometries that pertain to a given set of identifiers, which are derived 
from arbitrary resources.  


The use of a network-accessible Gazetteer Service by a Geocoder Service may have the 
following advantages: 


− The target vocabulary might be huge  


− The target vocabulary may be highly specialized  


− The target vocabulary may be partitioned across multiple nodes (e.g. use Australian 
Gazetteer Service to get Australian place names)  


− The geometry of the Gazetteer Service may be inconvenient for the Geocoder Service 
to manage internally (e.g. size, multiple equivalents, on-the-fly generalization and re-
projection required) 


Other uses may include:  


− Acquisition of a vocabulary for re-use (i.e. a generic Geoparser Service is pointed at 
documents containing names of water features in Uzbekhistan – it might load the 
relevant Gazetteer Service out-of-band and cache it for some period). In this case 
consideration should be given to a “Gazetteer Content Standard” such as the 
Alexandria Digital Library Gazetteer Content Standard.  


− A set of terms may be sent as a batch and a single response retrieved for improved 
efficiency. (Note this may simply replace the need for a Geocoder Service to 
remember common terms – although its own encoding of the geocoded output should 
re-use features.)  


D.3 Service Invocation Use Case 


A client or agent application performing service chaining may wish to exploit a Gazetteer 
Service to broaden particular search queries at run-time. For example, if the application is 
looking for information relevant to a particular suburb, it may wish to invoke a Gazetteer 
Service to find the city that contains the suburb in order to invoke a service organized by 
city names.  


Consider the case of a tool to help locate relevant information – given a term, it might 
search for all synonyms of the term, thus making the term broader until a suitable result 







OGC™ Best Practices Document OGC 05-035r2


 


Copyright © 2006 Open Geospatial Consortium  29
 


set is found. In this way, today's rather primitive Web search collections could possibly 
be exploited to harvest related content. 


D.4 Geographic Selection Use Case 


A simple use of such an interface is to access a feature collection that acts as a non-
hierarchical collection of named features. A request by a client or agent may be to return 
all named features of a given feature type or types that fall within a specific bounding 
geometry. This essentially general WFS request would return features that may not have 
the associations present in other use cases, and are therefore all “root” nodes. This 
interface would be easiest to realize against spatial data sets that have no explicit 
relationships among features, allowing the client to use and build filters to select different 
sets of features. 


There may be no a-priori knowledge of a desired Gazetteer Service. This knowledge may 
be derived at run time according to other metadata from the source feature or document.  
Accordingly, the client should not need to store all possible instances of Gazetteer 
Services, but rather needs to be able to discover them at run time, as needed. 







OGC™  Best Practices Document OGC OGC 05-035r2


 


Copyright 2006 © Open Geospatial Consortium  30
 


Annex D: Bibliography 


[1] ISO 31 (all parts), Quantities and units. 


[2] IEC 60027 (all parts), Letter symbols to be used in electrical technology. 


[3] ISO 1000, SI units and recommendations for the use of their multiples and of 
certain other units. 


[4] Guidelines for Successful OGC Interface Specifications, OGC document 00-
014r1 


 






