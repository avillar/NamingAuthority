
Copyright © 2013 Open Geospatial Consortium 

 

Open Geospatial Consortium 
Approval Date: 2013-01-18 

Posted Date: 2013-01-03 

Publication Date: 2013-06-18 

Reference number of this document: OGC 12-160r1  

Reference URL for this document:  
http://www.opengis.net/def/doc-type/per/ows9-data_quality_web_mapping 

Category: Public Engineering Report 

Editors: Jon Blower, Xiaoyu Yang, Joan Masó and Simon Thum  

OGC® OWS 9 Data Quality and Web Mapping Engineering Report 

Copyright © 2012 Open Geospatial Consortium. 
To obtain additional rights of use, visit http://www.opengeospatial.org/legal/. 

Warning 

This document is not an OGC Standard. This document is an OGC Public 
Engineering Report created as a deliverable in an OGC Interoperability Initiative 
and is not an official position of the OGC membership. It is distributed for review 
and comment. It is subject to change without notice and may not be referred to as 
an OGC Standard. Further, any OGC Engineering Report should not be referenced 
as required or mandatory technology in procurements. 

 

  

 

 

Document type:  OGC® Engineering Report 
Document subtype: NA 
Document stage:  Approved for public release 
Document language:  English 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

Abstract 

This Engineering Report specifies conventions for conveying information about data 
quality through the OGC Web Map Service Standard (known hereafter as the “WMS-Q 
conventions”), OGC Web Map Tile Service Standard (known hereafter as the “WMTS-Q 
conventions”), OGC KML (known hereafter as the “KML-Q conventions”) and OGC 
Augmented Reality Markup Language. 
 
Keywords 
 
ogcdoc, ogc document, data quality, wms, uncertml 
 

What is OGC Web Services 9 (OWS-9)? 

OWS-9 builds on the outcomes of prior OGC interoperability initiatives and is organized 
around the following threads: 

-   Aviation: Develop and demonstrate the use of the Aeronautical Information Exchange 
Model (AIXM) and the Weather Exchange Model (WXXM) in an OGC Web Services 
environment, focusing on support for several Single European Sky ATM Research 
(SESAR) project requirements as well as FAA (US Federal Aviation Administration) 
Aeronautical Information Management (AIM) and Aircraft Access to SWIM (System 
Wide Information Management) (AAtS) requirements. 

-   Cross-Community Interoperability (CCI): Build on the CCI work accomplished in 
OWS–8 by increasing interoperability within communities sharing geospatial data, 
focusing on semantic mediation, query results delivery, data provenance and quality and 
Single Point of Entry Global Gazetteer. 

-   Security and Services Interoperability (SSI): Investigate 5 main activities: Security 
Management, OGC Geography Markup Language (GML) Encoding Standard 
Application Schema UGAS (UML to GML Application Schema) Updates, Web Services 
Façade, Reference Architecture Profiling, and Bulk Data Transfer. 

-   OWS Innovations: Explore topics that represent either new areas of work for the 
Consortium (such as GPS and Mobile Applications), a desire for new approaches to 
existing technologies to solve new challenges (such as the OGC Web Coverage Service 
(WCS) work), or some combination of the two. 

-   Compliance & Interoperability Testing & Evaluation (CITE): Develop a suite of 
compliance test scripts for testing and validation of products with interfaces 
implementing the following OGC standards: Web Map Service (WMS) 1.3 Interface 
Standard, Web Feature Service (WFS) 2.0 Interface Standard, Geography Markup 
Language (GML) 3.2.1 Encoding Standard, OWS Context 1.0 (candidate encoding 
standard), Sensor Web Enablement (SWE) standards, Web Coverage Service for Earth 



Copyright © 2013 Open Geospatial Consortium 

Observation (WCS-EO) 1.0 Interface Standard, and TEAM (Test, Evaluation, And 
Measurement) Engine Capabilities. 

The OWS-9 sponsors are: AGC (Army Geospatial Center, US Army Corps of 
Engineers), CREAF-GeoViQua-EC, EUROCONTROL, FAA (US Federal Aviation 
Administration), GeoConnections - Natural Resources Canada, Lockheed Martin 
Corporation, NASA (US National Aeronautics and Space Administration), NGA (US 
National Geospatial-Intelligence Agency), USGS (US Geological Survey), UK DSTL 
(UK MoD Defence Science and Technology Laboratory).  



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

 

License Agreement 

Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, 
to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property 
without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, 
distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to 
do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual 
Property is furnished agrees to the terms of this Agreement. 

If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above 
copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR. 

THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS 
THAT MAY BE IN FORCE ANYWHERE IN THE WORLD. 

THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, 
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR 
PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED 
IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL 
MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE 
UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT 
THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF 
INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY 
DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING 
FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF 
CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH 
THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY. 

This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all 
copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as 
provided in the following sentence, no such termination of this license shall require the termination of any third party end-user 
sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual 
Property, or the operation of the Intellectual Property, infringe, or in LICENSOR’s sole opinion be likely to infringe, any patent, 
copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license 
without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or 
cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party. 

Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual 
Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without 
prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may 
authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any 
LICENSOR standards or specifications. 

This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United 
Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this 
Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, 
and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be 
construed to be a waiver of any rights or remedies available to it. 

None of the Intellectual Property or underlying information or technology may be downloaded or otherwise exported or reexported in 
violation of U.S. export laws and regulations. In addition, you are responsible for complying with any local laws in your jurisdiction 
which may impact your right to import, export or use the Intellectual Property, and you represent that you have complied with any 
regulations or registration procedures required by applicable law to make this license enforceable 



Copyright © 2013 Open Geospatial Consortium 

Contents Page 
	  

1	   Introduction ............................................................................................................. 7	  
1.1	   Scope .................................................................................................................. 7	  
1.2	   Document contributor contact points ................................................................. 7	  
1.3	   Revision history .................................................................................................. 7	  
1.4	   Future work ........................................................................................................ 8	  
1.5	   Forward .............................................................................................................. 8	  

2	   References ............................................................................................................... 8	  
3	   Terms and definitions ............................................................................................. 9	  

4	   Conventions .......................................................................................................... 10	  
4.1	   Abbreviated terms ............................................................................................ 10	  

5	   Standardized quality overview .............................................................................. 10	  
5.1	   Dataset-level quality metadata ......................................................................... 11	  
5.2	   Variable-level quality information ................................................................... 11	  
5.3	   Sample-level quality information ..................................................................... 11	  

5.3.1	   UncertML ..................................................................................................... 11	  
5.3.2	   NetCDF-U .................................................................................................... 11	  

6	   Quality in WMS .................................................................................................... 12	  
6.1	   Dataset-level quality metadata inWMS ............................................................ 13	  
6.2	   Variable-level quality information in WMS ..................................................... 14	  
6.3	   Sample-level quality information in WMS ...................................................... 14	  

6.3.1	   ServiceMetadata document and layer conventions ...................................... 14	  
6.3.2	   Behaviour of GetMap .................................................................................. 16	  
6.3.3	   Behaviour of GetFeatureInfo ....................................................................... 17	  

7	   Quality in WMTS ................................................................................................. 18	  
7.1	   Dataset-level quality metadata: ServiceMetadata ............................................ 19	  
7.2	   Variable-level quality information ................................................................... 19	  
7.3	   Sample-level quality information in WMS ...................................................... 19	  

7.3.1	   ServiceMetadata document and layer conventions ...................................... 19	  
7.3.2	   Behaviour of GetTile ................................................................................... 21	  
7.3.3	   Behaviour of GetFeatureInfo ....................................................................... 21	  

8	   Quality in KML ..................................................................................................... 21	  
8.1	   Integration of quality information in KML ...................................................... 22	  

8.1.1	   Dataset level quality metadata in KML ....................................................... 22	  
8.1.2	   Sample level quality information in KML ................................................... 23	  

8.2	   Portrayal quality information encoded in KML ............................................... 23	  
9	   Quality in ARML .................................................................................................. 25	  

10	   Future Work .......................................................................................................... 26	  
 

 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

Figures Page 
Figure 1: A fragment of NetCDF-U, where ancillary_variables are used to associate variables and 

where ref is used to reference the UncertML term ................................................................. 12	  

Figure 2: Sample fragment of a WMS Capabilities document that incorporates the modifications 
proposed in section 7.1. ........................................................................................................... 14	  

Figure 3:  A fragment from a WMS-Q Capabilities document, illustrating the use of Layer nesting 
and UncertML terms to convey the semantic relationship between Layers. .......................... 15	  

Figure 4: Summary of WMS-Q conventions in the form of a UML diagram.  This diagram 
captures the conventions used to create the Capabilities document, but does not capture other 
features of WMS-Q such as the behavior of GetFeatureInfo. ................................................. 16	  

Figure 5: A screenshot of visualizing uncertainty information using contouring approach 
(produced by desktop WMS-Q Viewer) ................................................................................. 17	  

Figure 6: Sample image representing a probability distribution.  This could be returned from a 
GetFeatureInfo request ............................................................................................................ 18	  

Figure 7: Sample fragment of a WMTS Capabilities document. ................................................... 19	  

Figure 8: A fragment from a WMTS-Q Capabilities document, illustrating the use of Themes to 
express Layer nesting and UncertML terms to convey the semantic relationship between 
Layers. ..................................................................................................................................... 21	  

 

 

 



Copyright © 2013 Open Geospatial Consortium 

OGC® OWS 9 Data Quality and Web Mapping Engineering Report 

1 Introduction 

This Engineering Report specifies conventions for conveying information about data 
quality through the OGC Web Map Service Standard, OGC Web Map Tile Service 
Standard, OGC KML and OGC Augmented Reality Markup Language. In general, it 
considers quality information to be of three types: “dataset-level” (pertaining to an entire 
dataset), “variable-level” (pertaining to a particular variable within the dataset) and 
“sample-level” (pertaining to an individual measurement). Our aim is for WMS-Q and 
WMTS-Q to be, as far as possible, a specialization of the WMS and WMTS 
specifications, to enable backward compatibility with existing clients. In the case of KML 
and ARML, only preliminary examples and approaches are discussed.  
 
This work has been carried out within the context of the OWS-9 initiative, and within the 
FP7 ENV-265178 GeoViQua project (www.geoviqua.org). 
 
1.1 Scope 

The current version of this document specifies conventions for adding quality 
information in Map standards and in KML and ARML features, although some 
approaches could be applied to other OGC standards. 

This document does not constitute a formal specification, but a collection of 
recommendations and points for future discussion. 

1.2 Document contributor contact points 

All questions regarding this document should be directed to the editor or the contributors: 

Name Organization 
Jon Blower Reading e-Science Centre, University of 

Reading, UK 
j.d.blower<at>reading.ac.uk 

Joan Masó CREAF-UAB, Spain 
joan.maso<at>uab.cat 

 

1.3 Revision history 

Date Release Editor Primary clauses 
modified 

Description 

30/07/2012 1.0 draft Jon  Blower, 
Xiaoyu Yang  

All  Initial draft for general review: based 
on WMS-Q conventions   

03/01/2013 1.0 Jon Blower All First complete version for submission 
18/01/2013 1.1 Simon Thum 8 Added KML-Q 
21/02/2013 1.2 Joan Masó All Added WMTS-Q, ARML-Q and 

document restructure. 
 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

1.4 Future work 

Future work will need to focus on styling mechanisms and the behavior of the 
GetFeatureInfo operation for WMS and WMTS. In addition, more work will be required 
on vector data in KML and ARML. 

1.5 Forward 

Attention is drawn to the possibility that some of the elements of this document may be 
the subject of patent rights. The Open Geospatial Consortium shall not be held 
responsible for identifying any or all such patent rights. 

Recipients of this document are requested to submit, with their comments, notification of 
any relevant patent claims or other intellectual property rights of which they may be 
aware that might be infringed by any implementation of the standard set forth in this 
document, and to provide supporting documentation. 

2 References 

The following documents are referenced in this document. For dated references, 
subsequent amendments to, or revisions of, any of these publications do not apply. For 
undated references, the latest edition of the normative document referred to applies. 

B. Eaton, et al., NetCDF Climate and Forecast (CF) Metadata Conventions, version 
1.5,25 October 2010. 

Bich W, Cox MG, Harris PM. Evolution of the _Guide to the Expression ofUncertainty 
in Measurement_. Metrologia. 2006;43:S161_S166 

Dawid, A. P., 2004. Probability, Causality and the Empirical World: A Bayes-de Finetti-
Popper-Borel Synthesis. Statistical Science 19 (1), 44-57. 

Frehlich, R., 2011. The definition of ‘truth’ for Numerical Weather Prediction error 
statistics. Quarterly Journal of the Royal Meteorological Society 137, 84–98. 

IETF RFC 3986, Uniform Resource Identifier (URI): Generic Syntax. 

ISO/TC211, 2006, ISO19115:2003. Geographic information – Metadata.  International 
Standards Organisation. 

ISO/TC211, 2006, ISO19138:2006. Geographic information -- Data quality measures.  
International Standards Organisation. 

ISO/TC211, 2006, ISO19139:2007. Geographic information -- Metadata -- XML schema 
implementation.  International Standards Organisation. 

ISO/TC211, 2009, ISO 19115-2:2009. Geographic information – Metadata pre-standard 
extension for imagery and gridded data. 



Copyright © 2013 Open Geospatial Consortium 

ISO/TC211, 2011, ISO19115-1 DIS. Geographic information – Metadata -- 
Fundamentals.  Under Development, International Standards Organisation. 

ISO/TC211, 2011b, ISO19157 DIS. Geographic information -- Data quality.  Under 
Development, International Standards Organisation. 

OGC 06-042, OpenGIS® Web Map Service Implementation (WMS) Specification 
version 1.3.0 

OGC 07-057r7, OpenGIS® Web Map Tile Service (WMTS) Implementation 
Specification version 1.0.0 

OGC 07-147r2, OGC KML specification version 2.2  

OGC 10-090r3, Network Common Data Form (NetCDF) Core Encoding Standard 
version 1.0. 

OGC 10-092r3, NetCDF Binary Encoding Extension Standard: NetCDF Classic and 64-
bit Offset Format. 

OGC 12-132r1, Augmented Reality Marked Language (ARML) Specification Candidate 
version 2.0.0  

Panagos, P. et al., 2008. Soil organic carbon content indicators and web mapping 
applications. Environmental Modelling & Software, 23(9), pp.1207–1209. 

Sun, X. et al., 2012. Development of a Web-based visualization platform for climate 
research using Google Earth. Computers & Geosciences, 47, pp.160–168. 

Zhao, Y. et al., 2012. A hierarchical organization approach of multi-dimensional remote 
sensing data for lightweight Web Map Services. Earth Science Informatics, 5(1), pp.61–
75. 

Refsgaard, J.C., van der Sluijs, J. P., Hojberg, A. L., Vanrolleghem, P.A., 2007. 
Uncertainty in the environmental modelling process - A framework and guidance. 
Environmental Modelling and Software 22 (11), 1543-1556. 

Savoldi, A., Gubian, P.  Echizen, I. (2010). Chapter 12, “Uncertainty in Live Forensics”, 
in “Advances in Digital Forensics”, Edited by K. Chow and S. Shenoi, 2010,  Springer. 

Yang X., et al. (2013) “An Integrated view of data quality in Earth  Observation ”, 
Philosophical Transactions of the Royal Society A, 371:20120072 
doi:10.1098/rsta.2012.0072 

 

3 Terms and definitions 

For the purposes of this report, the definitions specified in Clause 4 of the OWS Common 
Implementation Standard [OGC 06-121r3] shall apply. In addition, the following terms 
and definitions apply. 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

3.1  
Dataset level quality 
Quality description information generally contained in metadata records that summaries 
the quality of a dataset. 

3.2  
Variable level quality 
Quality description information generally contained in metadata records, which 
summaries the quality of a variable represented in a dataset. 

3.3  
Sample level quality 
Quality description information that describes individual samples (i.e. individual 
measurements) the user is typically most interested in quantifications of data uncertainty. 
It can be pixel level or feature level depending on the data model. 

 

4 Conventions 

4.1 Abbreviated terms 

ARML Augmented Reality Marked Language  
GEOSS Global Earth Observation System of Systems  

GeoViQua Quality aware Visualisation for Global Earth Observation System of 
Systems 

ISO International Standard Organization 

WMS Web Map Service 
WMTS Web Map Tile Service 

UncertML Uncertainty Markup Language 
UML Unified Modeling Language 

URL Uniform Resource Locator 

5 Standardized quality overview 

The notion of data quality has many aspects but we consider it here to mean “fitness for 
purpose”.  Therefore different users have different notions of what is considered “high 
quality”.  In order to assess fitness for purpose for a geospatial dataset, a user may look 
for many pieces of metadata, including completeness, consistency, positional, temporal 
and thematic accuracy, lineage and provenance information (see ISO19157).  The 
GeoViQua project (http://www.geoviqua.org) has developed modifications to ISO19157 
to encompass other measures of quality (e.g. user feedback).  See Yang et al, 2012 for a 
high-level description of the GeoViQua data model. 



Copyright © 2013 Open Geospatial Consortium 

This document is concerned mainly with displaying quality information related to raster 
data types, such as satellite images and output from numerical models.  We consider only 
continuous (not categorical) quantities and focus on the problem of conveying thematic 
accuracy through uncertainties (Savoldi et al, 2010; David, 2004; Refsgaard et al., 2007).  
Different conventions may be required for vector data types and for categorical data.  We 
aim to design a set of conventions for WMS version 1.3.0 and WMTS 1.0 that requires as 
few alterations to the original specification as possible.  The mechanisms described in 
this clause are mostly specializations of the specification, not modifications or extensions 
to it. We name these conventions “WMS-Q” and “WMTS-Q” respectively. 

5.1 Dataset-level quality metadata 
Dataset level quality is a quality description information generally contained in metadata 
records that summaries the quality of a dataset. An example of dataset level quality is the 
DQ_element elements and with its quality measures that an ISO metadata record can 
contain. In WMS and WMTS quality metadata about dataset can be associated to 
corresponding layers in the server. 

5.2 Variable-level quality information 
Variable-level quality is a quality description information which summaries the quality of 
a variable represented in a dataset. Dataset level quality is also described in metadata 
records. In WMS and WMTS quality metadata about variables can also be associated to 
corresponding layers in the server. 

5.3 Sample-level quality information 
At the level of individual samples (i.e. individual measurements) the user is typically 
most interested in quantifications of data uncertainty, which may be further propagated 
through a data-processing workflow. Uncertainties may pertain to both continuous and 
categorical data, but in this document we consider only continuous data. 

5.3.1 UncertML 
The UncertML conceptual model (http://www.uncertml.org/) provides a taxonomy of 
means for quantifying and exchanging complex uncertainties in data.  The types of 
information that can be exchanged using this model include: 

 Samples: Uncertainties may be represented by explicitly providing each recorded 
sample from the population.  Clearly this can often amount to a great deal of 
information. 

 Statistics: Uncertainties may be represented by statistics summarizing the samples 
(e.g. mean, variance, confidence intervals, covariance matrices).  These summary 
statistics do not convey information about the mathematical form of the 
probability density function. 

 Distributions: Where the uncertainties are more clearly understood, they may be 
represented by specifying the mathematical form of the probability distribution 
(e.g. Gaussian, Exponential, Binomial etc).  

5.3.2 NetCDF-U 
The concepts of UncertML can be encoded using NetCDF by following the “NetCDF-U” 
conventions, currently published as an OGC Discussion Paper.  NetCDF-U enables 
individual samples, statistics or parameters of a distribution to be recorded as individual 
NetCDF variables, which are grouped using a separate NetCDF variable that contains the 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

required metadata but no data values.  (This latter variable type is known as a “concept 
without values”.)  This structure is required because, in the NetCDF “classic” data model, 
variables cannot be hierarchical. 

Figure 1 illustrates this: the “sea_surface_temperature” variable is the “concept without 
values”, and defines that the uncertainties in the data form a normal distribution, whose 
mean and variance are recorded in the “sea_surface_temperature_mean” and 
“sea_surface_temperature_variance” variables respectively. 

 

Figure 1: A fragment of NetCDF-U, where ancillary_variables are used to associate 
variables and where ref is used to reference the UncertML term 

 

6 Quality in WMS 

The Web Map Service (WMS) specification (de la Beaujardiere 2006) describes how a 
client (e.g. a web browser or desktop application) may request a custom-generated, 
georeferenced image of a dataset from a server, together with associated metadata.  
Images from different Web Map Services can be precisely overlain in a Geographic 
Information System (GIS), permitting visualization and intercomparison (Zhao et al. 
2012; Sun et al. 2012; Panagos et al. 2008).  The use of WMS technology is partly driven 
by high-profile international interoperability initiatives such as GEOSS 
(http://www.earthobservations.org) and INSPIRE (http://inspire.jrc.ec.europa.eu/). 

In WMS, the essential unit of information is the Layer.  Each Layer can be displayed in a 
number of Styles, each associated with a legend.  Layers may be displayable or non-
displayable and may be organized hierarchically, with the semantics of the parent-child 
relationship remaining unconstrained.  Layers may therefore represent different data 
objects, but the following convention is typical in scientific WMS implementations (e.g. 
ncWMS, http://ncwms.sf.net): 

Variables:
Double	   sea_surface_temperature	  (lat=163,lon=240 )

:missing_value= -­‐999.0;
:ref=	  http://www.uncertml.org/distributions/normal //	  netCDF-­‐U	  extension
:ancillary_variables	  =	   “sea_surface_temperature_mean Sea_surfaceter_temperature_variance	   ”;

Double	  sea_surface_temperature_variance	   (lat=163,lon=240 )
:missing_value	  =	   -­‐999.0
:ref=	  http://www.uncertml.org/distributions/normal #variance //netCDF-­‐U	  extension	  

Double	  sea_surface_temperature_mean	  (lat=163,lon=240 )
:missing_value	  = -­‐999.0
:ref=http://www.uncertml.org/distributions/normal #mean //netCDF-­‐U	  extension	  



Copyright © 2013 Open Geospatial Consortium 

1. The top-level Layer represents the service as a whole.  This is non-displayable and 
contains metadata that applies to all data in the services (e.g. supported coordinate 
reference systems). 

2. The Layers at the next level represent the Datasets offered by the server.  These are also 
non-displayable. 

3. The Layers at the lowest level of the hierarchy are displayable and represent the 
Variables.  A single Layer may represent a composition of more than one Variable; e.g. a 
Layer may represent a vector quantity such as velocity, whose eastward and northward 
components are recorded in separate Variables (see Figure 1). 

Three main operations can be performed by standard WMS clients: GetCapabilities 
requests an XML document containing metadata on available Layers and other service 
capabilities; GetMap requests a map image or animation according to the user’s choice of 
Layer, Style, geographic extent and resolution; and GetFeatureInfo requests more 
information about a specific pixel in a map image.  Other operations can be defined. 

6.1 Dataset-level quality metadata inWMS 
The WMS specification allows metadata to be attached to Layers within a WMS, using 
the “MetadataURL” element of the schema of the WMS Capabilities document.  This 
URL points to an online resource that resolves to a separate document that provides 
metadata about the Layer.  Layers may represent entire datasets or individual variables. 

However, the limitation of WMS 1.3 is that the “Type” attribute of the “MetadataURL” 
element currently only supports "ISO19115” and “FGDC-STD-001-1998”.  This means 
that it is not possible to link to human-readable dataset description documents or to 
machine-readable documents in other formats.  We therefore propose two extensions to 
the WMS specification: 

1. Expand the range of values permitted by the “type” of the “MetadataURL” 
element to include other document types.  These types may include “ISO19157”, 
the GeoViQua quality models (see GeoViQua deliverable 6.1) or “unstructured” 
(i.e. human-readable) document types.  At the present time, we have not 
enumerated the possible types, but suggest that this could be expanded as a 
CodeList that can be expanded by data providers to encompass many different 
metadata formats. 

2. Add an optional “Description” fields to the definition of the “MetadataURL” 
element, which would provide a free-text, human-readable description of the 
format of the document to which the URL points.  This would enable users to 
understand the target format better, if they are not familiar with it. 

Figure 2 gives a sample fragment of a Capabilities document that follows these proposed 
extensions. 

 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

 

Figure 2: Sample fragment of a WMS Capabilities document that incorporates the 
modifications proposed in subclause 6.1. 

6.2 Variable-level quality information in WMS 
The same mechanism as in subclause 6.1 could be used to provide more information 
about a specific variable (such as a Layer representing the “temperature” field within a 
larger dataset), if there is a specific document for the variable’s metadata that provides 
more information than the dataset-level document. 

6.3 Sample-level quality information in WMS 
In this WMS-Q convention, we use the concept of WMS Layer nesting to convey the 
semantic relationship between the variables that represent different components of the 
uncertainty information.  This follows closely the approach taken in NetCDF-U, and 
therefore there is a fairly direct mapping between NetCDF-U and WMS-Q; however, the 
same WMS-Q structures could of course be mapped to other data formats. 

6.3.1 ServiceMetadata document and layer conventions 

The WMS-Q convention applies the following rules: 

 An uncertain variable is modelled as a Layer nested within the Layer representing 
the parent Dataset. This acts as a container for other Layers that represent the 
components of the uncertainty information (hence is directly analogous to the 
“concept without values” in NetCDF-U). 

 This Layer may or may not be displayable, depending on the service provider. 

 If it is displayable it needs a Name, and a GetMap request on this name will 
display some representation of an uncertain variable in a single map image. (E.g. 
a raster field representing the mean, overlain by a contour field representing the 
variance, see Figure 5). 

 This Layer has a Keyword that describes the type of the uncertainty information it 
represents.  This Keyword is taken from the UncertML vocabulary.  (Recall that 
in WMS, Keywords are taken from controlled vocabularies.) 

<Layer	  >	  
…	  
	  	  	  	  	  	  	  <MetadataURL	  type="unstructured">	  

	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  <Description>	  This	  metadata	  will	  provide	  some	  background	  quality	  
information	  about	  this	  layer	  </Description>	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  <Format>applicaiton/pdf</Format>	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  <OnlineResource	  xmlns:xlink="http://www.w3.org/1999/xlink"	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  xlink:type="simple"	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  xlink:href="http://localthost:8080/metadata/	  backgroundInfo.pdf	  "/>	  

	  	  	  	  	  	  	  	  </MetadataURL>	  	   	  
</Layer>	  	  



Copyright © 2013 Open Geospatial Consortium 

 The children of this Layer are also Layers, and these represent the individual 
components of the uncertainty information (such as the mean of a normal 
distribution, or an individual Sample).  Again these are tagged with Keywords 
(taken from UncertML) that define the type of the component. 

Figure 3 shows an example of using these rules to encode the dataset from Figure 5 as a 
WMS Capabilities document. 

 

Figure 3:  A fragment from a WMS-Q Capabilities document, illustrating the use of 
Layer nesting and UncertML terms to convey the semantic relationship between 

Layers. 

Figure 4 summarizes the WMS-Q conventions in the form of a UML diagram. 

 

<Layer>	  
	  	  <Title>Some	  Dataset</Title>	  	  
	  	  …	  
  <Layer queryable=’1’> 
    <!	  -­‐-­‐	  Parent	  layer,	  analogous	  to	  NetCDF-­‐U	  “concept	  without	  values”-­‐-­‐>	  
	  	  	  	  <Title>Sea	  Surface	  Temperature</Title>	  
	  	  	  	  <!	  -­‐-­‐	  The	  Name	  is	  only	  included	  if	  this	  parent	  layer	  is	  displayable	  -­‐-­‐>	  
	  	  	  	  <Name> sea_surface_temperature</Name>	  
	  	  	  	  <KeywordList>	  
	  	  	  	  	  	  	  	  	  <Keyword	  vocabulary=’http://www.uncertml.org/distributions/’>	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  normal	  
	  	  	  	  	  	  	  	  	  </Keyword>	  
	  	  	  <KeywordList>	  	  	  
	  
	  	  	  	  <!—Now	  the	  child	  layers	  represent	  the	  elements	  of	  the	  distribution	  -­‐-­‐>	  	  	  	  	  	  
	  	  	  <Layer	  queryable=’1’>	  
	  	  	  	  	  <Name>sea_surface_temperature_mean</Name>	  
	  	  	  	  	  <Title>SST	  mean</Title>	  
	  	  	  	  	  <KeywordList>	  
	  	  	  	  	  	  	  	  <Keyword	  vocabulary=’http://www.uncertml.org/distributions/’>	  
	  	  	  	  	  	  	  	  	  	  	  	  normal#mean	  
	  	  	  	  	  	  	  	  </Keyword>	  	  
	  	  	  	  	  <KeywordList>	  	  	  
    </Layer> 
 
	  	  <Layer	  queryable=’1’>	  
	  	  	  	  	  <Name>	  sea_surface_temperature_variance</Name>	  
	  	  	  	  	  <Title>SST	  variance</Title>	  
	  	  	  	  	  <KeywordList>	  
	  	  	  	  	  	  	  	  <Keyword	  vocabulary=’http://www.uncertml.org/distributions/’>	  
	  	  	  	  	  	  	  	  	  	  	  	  normal#variance	  
	  	  	  	  	  	  	  	  </Keyword>	  	  
	  	  	  	  	  <KeywordList>	  	  	  
    </Layer> 
	  	  </Layer>	  
</Layer>	  



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

 

Figure 4: Summary of WMS-Q conventions in the form of a UML diagram.  This 
diagram captures the conventions used to create the Capabilities document, but 

does not capture other features of WMS-Q such as the behavior of GetFeatureInfo. 

 

6.3.2 Behaviour of GetMap 

Child layers maps represent individual components of the uncertainty description of a 
pixel. Its values can be styled in several ways such as colors, contour lines, etc. Each 
available style has a name advertised in the capabilities document. Visualizing 
uncertainty is tricky and requires some specific visualization strategies and some user 
training. GetMap requests allow requesting individual layers (individual uncertainty 
components) with its style, while requesting more than one layer at the same time with its 
respective style names, this allows arbitrary combinations of uncertainty components 
from the same dataset (or even from different datasets), many of them resulting in 
improper visualization. Instead, this document recommends that clients request the parent 
layer that will already have style combinations, which are better for uncertainty 
visualization of this type of data. 

 

 

class System

«code list»
ExtendedMetadataURLOptions 

+ other-structured  :char
+ unstructured  :char

Layer

+ queryable  :boolean
+ cascaded  :int
+ opaque  :boolean
+ noSubsets  :boolean
+ fixedWidth  :int
+ fixedHeight  :int

MetadataURL

+ type  :MetadataURLTypeOptions

Description

Format

OnlineResource

- simpleLink :xLink

KeywordList

Keyword

+ vocabulary  :char

«code list»
MetadataURLTypeOptions

+ ISO19115  :char
+ FGDC-STD-001-1998  :char

Keyword element can be used 
to specify the uncertainty 
terms defined in the UncertML 
dictionary 
(http://www.uncertml.org/)  

Added the "unstructured" and 
"other-structured" options to 
encode the quality information 
represented using unstructured 
and other structured format. 

If layer B1, B2, ...Bn 
are nested within layer 
A, the layer A is 
associated with layer 
B1, B2,... Bn. 

This Layer Nesting 
mechanism can be 
used to link the data 
layer with associated 
uncertainty layer(s).

0..*

Layer nesting
connector



Copyright © 2013 Open Geospatial Consortium 

 

Figure 5: A screenshot of visualizing uncertainty information using contouring 
approach (produced by desktop WMS-Q Viewer) 

 

6.3.2.1 Map image styling considerations 

A standard WMS enumerates a finite number of Styles in which images can be generated 
from Layers.  These cannot be configured by the end user.  Scientific users usually 
require more flexibility, for example to control how data values map to palette colours, to 
control the contour spacing or to control the size and appearance of glyphs (e.g. arrows 
representing a velocity field). 

Such advanced requirements can be achieved at least partially through the OGC Styled 
Layer Descriptor and Symbology Encoding (SLD/SE) specifications.  However this 
mechanism is poorly supported in current clients and further work is required to ascertain 
whether SLD/SE is capable of encoding with a sufficient degree of flexibility all the 
styles that may be required by users of a WMS-Q. 

 

6.3.3 Behaviour of GetFeatureInfo 

The GetFeatureInfo operation of WMS requests more information about a specific pixel 
on a map.  This operation is relevant to: 

 Layers that represent the total uncertainty distribution (i.e. the NetCDF-U 
“concept without values”).  GetFeatureInfo may only be performed on displayable 
Layers. 

 Layers that represent a single component within the uncertainty distribution (i.e. 
individual scalar fields). 

The behaviour of GetFeatureInfo must be defined in each case, but the format of the 
returned information is unconstrained by the WMS 1.3.0 specification. For WMS-Q, 
these formats should include: 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

 Machine-readable XML documents describing the particular Feature represented 
by the data value, using UncertML to encode uncertainty information. 

 Images representing the probability distribution function of the value at the pixel 
in question (see Figure 6). 

 Human-readable HTML documents describing the Feature (as recommended by 
the INSPIRE conventions). 

More work is required to define the behaviour of GetFeatureInfo in WMS-Q further. 

 

Figure 6: Sample image representing a probability distribution.  This could be 
returned from a GetFeatureInfo request 

7 Quality in WMTS 

The Web Map Tile Service (WMTS) specification (OGC 07-057r7) describes how a 
client (e.g. a web browser or desktop application) may request a custom-generated, 
georeferenced tile of a dataset from a server, together with associated metadata.  

In WMTS, the essential unit of information is the Layer. Each Layer can be displayed in 
a number of Styles, each associated with a legend. A difference between WMTS and 
WMS is that WMTS layers cannot be organized hierarchically. Instead, in WMTS layers 
are represented as a linear list without hierarchy, and a hierarchy of themes is specified 
separately. The optional Themes section of a WMTS service metadata document contains 
metadata about how layers are organized thematically. This separates both concepts 
allows servers to offer more than one layer organization (in more than one theme 
section). This mechanism will be used here to represent pixel level quality. 

Three main operations can be performed by the WMS client standard : GetCapabilities 
requests an XML document containing metadata on available layers and other service 
capabilities; GetTile requests a map tile according to the user’s choice of layer, style, tile 



Copyright © 2013 Open Geospatial Consortium 

column, tile row, TileMatrixSet and resolution; and GetFeatureInfo requests more 
information about a specific pixel from a map tile. Other operations can be defined by 
extensions. 

7.1 Dataset-level quality metadata: ServiceMetadata 
The WMTS specification allows metadata to be attached to Layers within a WMTS, 
using the “ows:Metadata” element of the schema of the WMS Capabilities document.  
This URL points to an online resource that is a separate document that provides the 
Layer’s metadata. Layers may represent entire datasets or individual variables. In WMTS 
there is no restrictions on the type of metadata you can link so it is possible to use the 
same ones that are used in WMS ("ISO19115” and “FGDC-STD-001-1998”) and others 
such as “ISO19157”, the GeoViQua quality models (see GeoViQua deliverable 6.1) or 
“unstructured” metadata (i.e. human-readable) document types. Metadata documents are 
linked using an xlink:href. Ows:Metadata also has several attributes such as “xlink:title” 
and “xlink:role”, and “about” that can be used to provide a free-text, human-readable 
description, of the format and content of the document to which the URL points to. This 
would enable users to better understand the target format, in those cases where they are 
not familiar with it. See Table 35 in OGC 06-121r9 for more details on ows:Metadata. 

Figure 7 gives a sample fragment of a Capabilities document that follows these proposed 
extensions. 

  <layer> 
  ... 
   <ows:Metadata xlink:role="unstructured"  
    xlink:title="This metadata will provide some background quality 
information about this layer"  
    xlink:href="http://www.server.bob/metadata/backgroundInfo.pdf"/> 
  </layer> 

Figure 7: Sample fragment of a WMTS Capabilities document. 

7.2 Variable-level quality information 
The same mechanism used in subclause 7.1could be used to provide more information 
about a specific variable (such as a Layer representing the “temperature” field within a 
larger dataset), when there is a specific document for the variable’s metadata that 
provides more information than the dataset-level document. 

7.3 Sample-level quality information in WMS 
In this WMTS-Q convention, we use the concept of WMTS Themes to convey the 
semantic relationship between the variables that represent different components of the 
uncertainty information.  This closely follows the approach taken in NetCDF-U, and 
therefore there is a fairly direct mapping between NetCDF-U and WMTS-Q; however, 
the same WMTS-Q structures could, of course, be mapped to other data formats. 

7.3.1 ServiceMetadata document and layer conventions 

The WMTS-Q convention applies the following rules: 

 The server will define a layer for each individual component of the uncertainty 
information (such as the mean of a normal distribution, or an individual Sample).  



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

These are tagged with Keywords that define the type of the component. The 
Keywords are taken from the UncertML vocabulary. 

 Optionally, depending on the service provider, the server will define a composed 
layer that will display some representation of an uncertain variable in a single 
map image.  (E.g. a raster field representing the mean, overlain by a contour field 
representing the variance). This is tagged with a keyword that describes the type 
of the uncertainty information it represents (taken from UncertML). 

 For each dataset, there will be a Theme representing the parent Dataset, which 
will contain another theme that acts as a container for other Layers. These 
represent the parameters of the uncertainty information (hence is directly 
analogous to the “concept without values” in NetCDF-U). If a Layer representing 
the dataset exists, then it will be referenced by the parent theme. 

 

Figure 8 shows an example of using these rules to encode the dataset from  as a WMTS 
Capabilities document. 

<Capabilities> 
 ... 
 <Contents> 
  <Layer> 
   <ows:Title>See Surface Temperature</ows:Title> 
   <ows:Keywords> 
    <ows:Keyword>normal</ows:Keyword> 
    <ows:Type 
codeSpace="http://www.uncertml.org">distributions</ows:Type> 
   </ows:Keywords> 
   <ows:Identifier>see_surface_temperature</ows:Identifier> 
   <Style> 
    <ows:Title>Mean as colors and variance as contour lines</ows:Title> 
    <ows:Identifier>default</ows:Identifier> 
   </Style> 
   ... 
  </Layer> 
  <Layer> 
   <ows:Title>SST mean</ows:Title> 
   <ows:Keywords> 
    <ows:Keyword>normal#mean</ows:Keyword> 
    <ows:Type 
codeSpace="http://www.uncertml.org">distributions</ows:Type> 
   </ows:Keywords> 
   <ows:Identifier>see_surface_temperature_mean</ows:Identifier> 
   ... 
  </Layer> 
  <Layer> 
   <ows:Title>SST variance</ows:Title> 



Copyright © 2013 Open Geospatial Consortium 

   <ows:Keywords> 
    <ows:Keyword>normal#variance</ows:Keyword> 
    <ows:Type 
codeSpace="http://www.uncertml.org">distributions</ows:Type> 
   </ows:Keywords> 
   <ows:Identifier>see_surface_temperature_variance</ows:Identifier> 
   ... 
  </Layer> 
  <TileMatrixSet> 
   ... 
  </TileMatrixSet> 
 </Contents> 
 <Themes> 
  <Theme> 
   <ows:Title>See SurfaceTemperature</ows:Title> 
   <ows:Identifier>SST</ows:Identifier> 
   <Theme> 
    <ows:Title>See SurfaceTemperature Parameters</ows:Title> 
    <ows:Identifier>SST Param</ows:Identifier> 
    <LayerRef>see_surface_temperature_mean</LayerRef> 
    <LayerRef>see_surface_temperature_variance</LayerRef> 
   </Theme> 
   <LayerRef>see_surface_temperature</LayerRef> 
  </Theme> 
 </Themes> 
</Capabilities> 
 

Figure 8: A fragment from a WMTS-Q Capabilities document, illustrating the use 
of Themes to express Layer nesting and UncertML terms to convey the semantic 

relationship between Layers. 

7.3.2 Behaviour of GetTile 

The same considerations done for GetMap WMS-Q apply here. In fact, WMTS only 
allows requesting one layer at a time, so the only way to get a combined uncertainty 
visualization map is that the server provider has already included a parent layer with a 
combined style name. 

7.3.3 Behaviour of GetFeatureInfo 

The same considerations done for GetFeatureInfo WMS-Q apply here. 

 

 

8 Quality in KML 

The OGC KML specification (OGC 07-147r2) describes an XML grammar used to 
encode and transport representations of geographic data for display in an Earth browser. 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

It encodes geospatial information and the way this information has to be presented in the 
browser. 

The clause exposes our first ideas on how to extend KML to include data quality 
information and describes how to associate the quality information to contained and 
referenced geometries and data. It also describes how to visualize the quality information 
along the data it characterizes. The extension described receives the abbreviated name of 
KML-Q. 

We design KML-Q in a way that a KML document stays valid and ideally allow a 
reasonable implementation which does not support this extension to show the actual data 
without quality information. 

KML offers a finely grained set of extension mechanisms inside its own schema. These 
have the upside of being interpreted by established KML 2.2 clients, e.g. by showing 
values in pop-up tables. Extension using a separate XML name-spacing has the benefit of 
not interfering with other KML elements. 

This roughly corresponds to the two major use cases KML-Q will first be tested in; as 
input to a visualization service and as output thereof. Detail will be given in the clause on 
use cases. 

8.1 Integration of quality information in KML 

This proposal: 

 Embeds the quality information wherever sensible. 

 Explicitly models the scope of quality information to separate the scope from the 
embedding in KML. 

 Minimizes the use o a specific XML schema 
Some things are left open for a prototype to clarify. 

A KML-Q instance might (optionally) contain a leading declaration of KML-Q document 
properties. Leading means before (in text) any kml:AbstractGeometryGroup. The 
KML-Q document properties may be used to declare how quality information embedded 
in the KML relates to other data for the benefit of interoperability.  

Further, a KML-Q instance may embed scoped quality information in kml:Extended-­‐
Data elements. In cases where the scope encoded in the PQM cannot be applied to KML 
unambiguously the kml:ExtendedData	  could be equipped with a scope disambiguator. 
Ideally this would be the only KML-Q-specific element in kml:ExtendedData. 

8.1.1 Dataset level quality metadata in KML 

These use cases encode quality information in KML primarily as a machine-to-machine 
vehicle. Because the recipient is a potential specialized KML-Q implementation, there is 
no need to confine the XML to the KML namespace. 



Copyright © 2013 Open Geospatial Consortium 

This approach is tested in the KML-Q visualization service prototype, to which such an 
encoding would be input, together with hints detailing how to visualize the KML-Q. 

<kml	  xmlns="http://www.opengis.net/kml/2.2">	  	  
	  	  	  	  <Document>	  
	  	  	  	  	  	  	  	  <name>Embedding	  of	  UQM	  data	  for	  machine-­‐to-­‐machine	  
scenarios</name>	  
	  	  	  	  	  	  	  	  	  
	  	  	  	  	  	  	  	  <!-­‐-­‐	  Apply	  data	  to	  referenced	  dataset	  -­‐-­‐>	  	  	  	  	  
	  	  	  	  	  	  	  	  <NetworkLink>	  	  	  	  	  	  
	  	  	  	  	  	  	  	  	  	  	  	  <ExtendedData	  
xmlns:qim="http://www.geoviqua.org/QualityInformationModel/3.1">	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  <qim:GVQ_UsageReport_Type>	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  <qim:usageDescription>Tried	  to	  use	  it	  for	  refining	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  near-­‐ground	  wind	  speeds	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  in	  a	  weather	  forecasting	  setting.	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  </qim:usageDescription>	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  </qim:GVQ_UsageReport_Type>	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  <qim:discoveredIssue>	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  Many	  buildings	  were	  all	  flat	  so	  it	  as	  not	  useable.	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  </qim:discoveredIssue>	  
	  	  	  	  	  	  	  	  	  	  	  	  </ExtendedData>	  
	  	  	  	  	  	  	  	  	  	  	  	  <Link>	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  <href>	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  http://somedata.set/34542352.kml	  
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  </href>	  
	  	  	  	  	  	  	  	  	  	  	  	  </Link>	  
	  	  	  	  	  	  	  	  </NetworkLink>	  
	  	  	  	  </Document>	  	  
</kml>	  
	  
	  
8.1.2 Sample level quality information in KML 

There is not fundamental difference in how this would work, except that we have to 
account for potential sample level quality information which needs to be represented. 
This scenario needs to be evaluated further. 

8.2 Portrayal quality information encoded in KML 

In this case the encoding of quality information would be more implicit, not in a fashion 
suitable for semantic interoperability but easy to consume for existing client 
implementations. 

The following example details how KML to portray an average rating for some data 
might look. It is likely that additional elements or logic will be required to associate the 
data at the right granularity. 

<kml xmlns="http://www.opengis.net/kml/2.2">  
    <Document>    
        <name>Portrayal of User Quailty Model data</name> 
         
        <!-- Declare KML schema for user rating summary --> 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

        <Schema name="RatingSummary" 
id="UserRatingSummaryTypeId">      
            <SimpleField type="string" name="UserDomain">        
                
<displayName><![CDATA[<b>Domain</b>]]></displayName>      
            </SimpleField>      
            <SimpleField type="double" name="AverageRating">        
                <displayName><![CDATA[<b>average 
Rating</b>]]></displayName>      
            </SimpleField>      
            <SimpleField type="int" name="NumberOfVotes">        
                <displayName>No. of votes included in the 
average</displayName>      
            </SimpleField>    
        </Schema>     
         
        <!-- Apply data to referenced dataset -->     
        <NetworkLink>      
            <ExtendedData> 
                <SchemaData schemaUrl="#UserRatingSummaryTypeId">         
                    <SimpleData 
name="UserDomain">Geodesy</SimpleData>  
                    <SimpleData 
name="AverageRating">3.1</SimpleData>  
                    <SimpleData 
name="NumberOfVotes">8</SimpleData>  
                </SchemaData> 
                <SchemaData schemaUrl="#UserRatingSummaryTypeId">  
                    <SimpleData 
name="UserDomain">Bathymetry</SimpleData>  
                    <SimpleData 
name="AverageRating">1.3</SimpleData>  
                    <SimpleData 
name="NumberOfVotes">2</SimpleData>  
                </SchemaData> 
            </ExtendedData>      
            <Link><href> 
                http://somedata.set/34542352.kml 
            </href></Link>  
         </NetworkLink> 
    </Document>  
</kml> 
 

In this example a hypothetic data set will be colored according to quality information that 
was available when the KML was generated, but is not lost except for its visual 
correlates. 



Copyright © 2013 Open Geospatial Consortium 

<kml xmlns="http://www.opengis.net/kml/2.2">  
    <Document>    
        <name>Portrayal of Quality data</name> 
         
        <!-- These would be autogenerated or selected from a 
well-known scale --> 
        <Style id="veryBadQuality"> 
            <LabelStyle> 
                <color>ff0000ff</color> 
            </LabelStyle> 
        </Style> 
        <Style id="reasonableQuality"> 
            <LabelStyle> 
                <color>00ffffff</color> 
            </LabelStyle> 
        </Style> 
        <Style id="veryGoodQuality"> 
            <LabelStyle> 
                <color>00ff00ff</color> 
            </LabelStyle> 
        </Style> 
        <!-- Apply data to referenced dataset -->     
        <NetworkLink>      
            <styleUrl>#veryGoodQuality</styleUrl>      
            <Link> 
                <href> 
                    http://somedata.set/34542352.kml 
                </href> 
            </Link> 
         </NetworkLink> 
    </Document>  
</kml> 
 
 

9 Quality in ARML 

Augmented Reality Marked Language version 2.0 candidate standard was open for 
comments during OWS-9 period (http://www.opengeospatial.org/standards/requests/94). 
This clause captures our first impressions and a CR that we submitted to the standards 
working group. 

Essentially, the specification provides a way to encode geospatial features that you want 
to “mark” or “augment” in your “view of the reality. It provides a way to generate screen 
coordinates features (to have a fix window in your screen, e.g. to see messages of text), 
and real world coordinate features that will be overlapped to the “reality” with some 
hardware visualization system. We envisage a system that allows overlapping features in 
the reality, which informs about sample quality information in a way that allows us to 
walk thought the data and explore its quality. 

Unfortunately, the initial evaluated version was poor in metadata (features just had names 
and titles). Particularly, there was no placeholder for metadata regarding features, and 
therefore features could not include sample/feature level quality, uncertainty or 



 OGC 12-160r1 

Copyright © 2013 Open Geospatial Consortium 

provenance. Features had no semantics (not even keywords) so it is possible to say that 
this feature is a label that represent a quality label for a particular object.  

We submitted a CR asking to include "keywords" in order to tag the features with 
controlled vocabularies and also to add a “gml:metadataDataProperty” to include some 
metadata features.  

As a result, a new metadata-element in feature has been included, which allows any XML 
to be wrapped (with processContents set to lax, so custom schemas can be added 
optionally) in this element. This fulfills our requirements and opens the door to explore 
how quality indicators and measures can be visualized in ARML compatible augmented 
reality systems. 

 

 

10 Future Work 

This document describes the WMS-Q and WMTS-Q conventions for encoding quality 
information in a Web Map Service and Web Map Tile Service respectively. The only 
extension to the WMS 1.3.0 specification is minor (the modification to the MetadataURL 
element); all other rules define special interpretations of the specification without 
extension.  No extension is required in WMTS. 

At the time of writing, two particular areas require further investigation: the behavior of 
the GetFeatureInfo operation and the mechanism for map styling and the way SLD can be 
used to improve user control on the resulting uncertainty visualization.  These are active 
areas of research within the GeoViQua project and this document will be updated as 
results are produced. 

Additionally, the document also explores how to apply quality information to features 
encoded in KML and in ARML. In both cases, only preliminary examples and 
approaches have been discussed broadening the number of ways sample/feature level 
quality information could be integrated with geospatial data, and visualized in virtual 
globes and augmented reality systems. More work needs to be done to generate detailed 
best practice documents on both standards. 


