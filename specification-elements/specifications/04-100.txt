
OGC 04-100 

 
 

 

Open Geospatial Consortium Inc.  
Date:   2004-12-06 

Reference number of this OGC™ IP initiative document:    OGC 04-100 

Version: 0.0.4 

Category: OGC™Discussion Paper 

Editor:   Clemens Portele 

OWS-2 Application Schema Development 

 

 

Copyright © Open Geospatial Consortium (2005) 

 

 

Warning 

This document is not an OGC Standard. It is distributed for review and comment. It 
is subject to change without notice and may not be referred to as an OGC Standard. 

Recipients of this document are invited to submit, with their comments, notification 
of any relevant patent rights of which they are aware and to provide supporting 
documentation. 

Document type:     OGC™ Discussion Paper 
Document subtype:    NA 
Document stage:    Approved 
Document language:  English 



OGC 04-100 

ii © Open Geospatial Consortium (2005)
 

Contents 

1 Scope........................................................................................................................1 

2 Conformance ..........................................................................................................1 

3 Normative references.............................................................................................1 

4 Terms and definitions ............................................................................................1 

5 Conventions ............................................................................................................2 
5.1 Symbols (and abbreviated terms).........................................................................2 
5.2 UML Notation ........................................................................................................2 

6 Overview .................................................................................................................4 

7 Application Schema for the NGA FACC Profile ................................................4 
7.1 UML Application Schema.....................................................................................4 
7.2 GML Application Schema...................................................................................12 

8 GML Profile for the NGA FACC Profile ..........................................................19 

9 Application Schema for NGA Product Profiles (VMAP levels 0-2, TLM).....20 
9.1 UML Appliation Schema.....................................................................................20 
9.2 GML Application Schema...................................................................................22 

10 MSDS Application Schema .................................................................................24 
10.1 UML Application Schema...................................................................................24 
10.2 GML Application Schema...................................................................................26 

11 Discussion of GML Level 0 and the NGA Application Schemas.....................27 

12 Temporal Topology..............................................................................................28 

13 Complex Features ................................................................................................30 

14 Using a Topology Complex .................................................................................32 

15 Coordinate Reference Systems ...........................................................................33 

16 Units of measurements ........................................................................................33 

17 Summary...............................................................................................................34 
 

 



OGC 04-100 

© Open Geospatial Consortium (2005) iii
 

 

i. Submitting organizations 

The following organizations submitted this document to the Open GIS Consortium Inc.:  

- interactive instruments GmbH 

ii. Document Contributor Contact Points 

All questions regarding this submission should be directed to the editor or the submitters: 

CONTACT COMPANY ADDRESS PHONE/FAX EMAIL 

Clemens Portele interactive 
instruments 

 +49 228 9141073 portele@interactive
-instruments.de 

Chuck Heazel Lockheed Martin  +1 703 380 7433 cheazel@opengis.o
rg 

iii. Revision history 

Date Release Author Paragraph modified Description 

2004-07-31 0.0.1 CP  First draft 

2004-08-29 0.0.2 CP  Update based on comments by Dave 
Wesloh, Jody Hawkins and Nadine 
Alameh 

2004-09-30 0.0.3 CP  Minor updates 

2004-12-06 0.0.4 CH  Final cleanup and formatting 

iv. Changes to the OpenGIS Abstract Specification 

The OpenGIS® Abstract Specification does not require changes to accommodate the 
technical contents of this document.  



OGC 04-100 

iv © Open Geospatial Consortium (2005)
 

Introduction 

This document contains a description of the process creating ISO 19109 Application 
Schemas in UML and, derived from these schemas, GML Application Schemas for NGA 
data during the OWS-2 initiative. 

 

 



OGC™ Discussion Paper OGC 04-100

 

Information Interoperability — NGA Application Schema 
Developement 

1 Scope 

This OpenGIS® document describes and discusses the process of creating application 
schemas for NGA data. The approach used to create the application schemas starts with 
the creation of ISO 19109 application schemas in UML and deriving GML application 
schemas from them. 

2 Conformance 

Not required for an IP IPR, DIPR, or Discussion Paper. 

3 Normative references 

The following normative documents contain provisions which, through reference in this 
text, constitute provisions of this document. For dated references, subsequent 
amendments to, or revisions of, any of these publications do not apply. However, parties 
to agreements based on this document are encouraged to investigate the possibility of 
applying the most recent editions of the normative documents indicated below. For 
undated references, the latest edition of the normative document referred to applies. 

ISO DTS 19103, Geographic Information – Conceptual Schema Language 

ISO 19109:2004, Geographic Information – Rules for Application Schemas 

ISO CD 19136 (February 2004), Geographic Information – Geography Markup 
Language 

4 Terms and definitions 

Not applicable 

© Open Geospatial Consortium (2005) 1
 



OGC 04-100 

5 Conventions 

5.1 Symbols (and abbreviated terms) 

ISO International Organization for Standardization 

OGC Open GIS Consortium 

GML Geography Markup Language 

UML Unified Modeling Language 

XML eXtended Markup Language 

1D One Dimensional 

2D Two Dimensional 

3D Three Dimensional 

NGA National Geospatial Intelligence Agency 

FACC Feature and Attribute Coding Catalogue 

VMAP … 

TLM Topographic Line Map 

DIGEST  Digital Geographic Information Exchange Standard 

5.2 UML Notation 

The diagrams that appear in this document are presented using the Unified Modeling 
Language (UML) static structure diagram based on the rules of ISO/DTS 19103 and ISO 
CD 19136 Annex E.   

The UML notations used in this document are described in the diagram below. 

2 © Open Geospatial Consortium (2005)
 



OGC 04-100 

Association between classes

role-1 role-2

Association Name
Class #1 Class #2

Association Cardinality

Class Only one

Class Zero or more

Class Optional (zero or one )

1..* Class One or more

n Class Specific number

Aggregation between classes

Aggregate
Class

Component
Class #1

Component
Class #2

Component
Class #n

……….

0..*

0..1

Class Inheritance (subtyping of classes)
Superclass

Subclass #1

…………..

Subclass #2 Subclass #n

 

Figure 1 — UML notation 

In the class diagrams, the following stereotypes of UML classes are used: 

a) <<DataType>> A descriptor of a set of values that lack identity (independent 
existence and the possibility of side effects). A DataType is a class with no 
operations whose primary purpose is to hold the information. 

b) <<BasicType>> A special type of a DataType that typically has a canonical 
representation in a computing platform, in this case XML Schema. 

c) <<CodeList>> is a flexible enumeration that uses string values for expressing a list of 
potential values. 

d) <<Enumeration>> is a fixed list of valid identifiers of named literal values. Attributes 
of an enumerated type can only take values from this list.  

e) <<Union>> is a list of attributes. The semantics is that only one of the attributes can 
be present at any time. 

In this document, the following standard basic data types are used: 

a) CharacterString – A sequence of characters 

b) Integer – An integer number 

c) Real – A floating point number 

© Open Geospatial Consortium (2005) 3
 



OGC 04-100 

d) Boolean – A boolean value (true or false) 

6 Overview 

The task was to create a number of application schemas for NGA data – mostly based on 
existing data specifications used by NGA today. These application schemas were to be 
developed as GML application schemas (using GML version 3.1, ISO CD 19136). 

These include: 

- the NGA profile of the FACC 

- product application schemas for VMAP0, VMAP1, VMAP2 and TLM 

- an application schema for a mission specific dataset used in the OWS-2 demo 

Since the application schemas are large in terms of the number of feature type and 
attribute definitions, the schemas were created automatically. 

Also, since adherence to the concepts defined in the ISO 19100 series of international 
standards is relevant to NGA, the following process was followed: 

Basic
Concepts

Basic
Concepts

ISO 19109
Application

Schema

ISO 19109
Application

Schema

GML 3.1
Application

Schema

GML 3.1
Application

Schema

1 2
Basic

Concepts
Basic

Concepts

ISO 19109
Application

Schema

ISO 19109
Application

Schema

GML 3.1
Application

Schema

GML 3.1
Application

Schema

Basic
Concepts

Basic
Concepts

ISO 19109
Application

Schema

ISO 19109
Application

Schema

GML 3.1
Application

Schema

GML 3.1
Application

Schema

1 2

 

Step (1) was executed using Scripts creating Rational Rose UML models from the input 
descriptions provided by NGA. These scripts were implemented in Visual Basic. 

Step (2) was executed using the Open Source UGAS tool “Shapechange” of interactive 
instruments. More information about the tool including documentation can be found at 
http://www.interactive-instruments.de/ugas/. One document describes the mapping rules 
from UML to GML as implemented by the tool, while a second document describes the 
implementation of the ShapeChange tool, its installation and guidelines for using the tool. 

7 Application Schema for the NGA FACC Profile  

7.1 UML Application Schema 

The NGA FACC Profile application schema is created from the MS Access databases 
maintained by Rex Buckley at NGA. An issue was to find versions of the data definitions 
that were consistent with each others. After some research it was decided that the version 

4 © Open Geospatial Consortium (2005)
 

http://www.interactive-instruments.de/ugas/


OGC 04-100 

from April 8th, 2002 was to be used. Therefore, the following MS Access databases were 
used 

  FACC_Manager_be.mdb: all tables 

  NGA_Profile_Manager_be.mdb: Master Table 4-8-2002 

The Master Table in the NGA Profile database references all components of the FACC 
data dictionary that are used in the NGA FACC Profile. 

In order to process these input databases a simple Visual Basic program was developed 
implementing the required steps to convert the NGA FACC Profile in the MS Access 
databases to a UML Application Schema in Rational Rose. The DAO interface was used 
to acccess the MS Access databases and the Rational Rose COM Interface was used to 
create the objects in Rational Rose. At the same time, the GML Dictionaries for the 
Feature Type names, the Attribute Type names and the Attribute Code descriptions were 
created by the program. 

In its first step, the following UML packages were created by the program: 

- A root package for the NGA FACC Profile (stereotype <<Application Schema>>). 
Pre-defined, tagged values were added to this package to associate the application 
schema with a namespace (“http://www.opengis.net/ows-2/nga”), a namespace prefix 
(“nga”) and a version number; see the ShapeChange documentation for details. 

NGA FACC Profile
<<Application Schema>>

 

- Within the root package, one package per FACC category (e.g. “A”, “B”, etc.). 

© Open Geospatial Consortium (2005) 5
 



OGC 04-100 

0 A

B C

D E

F

G

I

K O S

Z

 

- Within each FACC category package another package for each FACC sub-category  
(e.g. “AA”, “AB”, etc.). As packages without sub-packages these were tagged with 
the stereotype <<Leaf>>. 

GA
<<Leaf>>

GB
<<Leaf>>

 

In the second step, the classes were created by the program: 

- A root class from which all NGA Feature Types are derived by inheritance. This 
feature type captures the common properties shared by all NGA feature types. 
Currently this is just a single property capturing a spatial representation of the feature. 
This may be one of the following: 

o a point (GM_Point) 

o a curve (GM_OrientableCurve) 

6 © Open Geospatial Consortium (2005)
 



OGC 04-100 

o a surface (GM_OrientableSurface) 

o a geometric aggreate of points  (GM_MultiPoint) 

o a geometric aggreate of curves (GM_MultiCurve) 

o a geometric aggreate of surfaces (GM_MultiSurface) 

o one or more nodes (TP_Node) 

o one or more sequences of connected directed edges 
(sequence<TP_DirectedEdge>) 

o one or more sets of connected directed faces (set<TP_DirectedFace>) 

SpatialCharacteristics
+ pointGeometry : GM_Point
+ curveGeometry : GM_OrientableCurve
+ surfaceGeometry : GM_OrientableSurface
+ multiPointGeometry :  GM_MultiPoint
+ multiCurveGeometry : GM_MultiCurve
+ multiSurfaceGeometry : GM_MultiSurface
+ nodeTopology [1..*] : TP_Node
+ edgeTopology [1..*] : sequence<TP_DirectedEdge>
+ faceTopology [1..*] : set<TP_DirectedFace>

<<Union>>

NGAFeature
+ spatialRepresentat ion [0..1] : SpatialCharacteristics

 

- One class per feature type in the NGA FACC Profile. After some discussion, the 
DIGEST FACC feature codes of the feature type were used as the name of the feature 
type classes, e.g. “GA065”. For the name of the attributes also the FACC naming 
scheme was used, too. 

However, the semanticly more meaningful name used in the FACC database was 
used for the name of the class diagram, e.g. “Air Warning Light”.  

© Open Geospatial Consortium (2005) 7
 



OGC 04-100 

NGAFeature

+ spatialRepresentation [0..1] : SpatialCharacteristics
(from NGA FACC Profi le)

GA065
+ acc [0..1] : GA065_ACC
+ coc [0..1] : GA065_COC
+ col [0..1] : GA065_COL
+ olq [0..1] : GA065_OLQ
+ pfg [0..1] : GA065_PFG
+ txt [0..1] : GA065_TXT

GA065_ACC
+ Unknown = 0
+ Accurate = 1
+ Approximate = 2
+ Doubtful = 3
+ Unpopulated = 997

<<Enumeration>>

GA065_COC
+ Unknown = 0
+ Conspicuous from sea = 1
+ Conspicuous from land = 4
+ Conspicuous from air = 5
+ Inconspicuous = 6

<<Enumeration>>

GA065_COL
<<BasicType>>

GA065_OLQ
+ Unknown = 0
+ One Light Present = 1
+ Multiple Lights Present = 2
+ Unpopulated = 997

<<Enumeration>>
GA065_PFG

<<BasicType>>

GA065_TXT
<<BasicType>>

 

Both the descriptive name and the FACC code were stored in tagged values of the 
class (“name” and “code”) which are processed by the UGAS tool and therefore 
represented also in the GML Application Schema, too. 

8 © Open Geospatial Consortium (2005)
 



OGC 04-100 

 

For every attribute of the feature type in the NGA FACC Profile, one attribute was 
added to the class. Again, the three letter FACC code was used, e.g. “acc”. All 
attributes are optional. 

The following attribute types can be distinguished: 

o Attributes with coded values: In this case, the allowed coded values for the 
respective feature type are captured in a enumeration class (stereotype 
<<Enumeration>>). Since the coded values are different for each class, the 
uniqueness is guaranteed by naming the class by a concatenation of the feature 
type name and the attribute name. Each coded value is represented with its 
textual description and code value. 

GA065_ACC
+ Unknown = 0
+ Accurate = 1
+ Approximate = 2
+ Doubtful = 3
+ Unpopulated = 997

<<Enumeration>>

 

© Open Geospatial Consortium (2005) 9
 



OGC 04-100 

o Other Attributes: These attributes are attributes with either a string or numeric 
value. String values are often associated with a maximum length. Numeric 
values are often values associated with a unit of measurement, a minimum and 
maximum value. If existing, this information is captured in tagged values of 
classes for the attribute type, where the <<Basic Type>> stereotype indicates 
a canonical representation in XML Schema as a simple type. The XML 
Schema or GML simple type to be used is stored in the tagged value “base”, 
in case of a string value, the maximum length is stored in a tagged value 
“length”. Tagged names “min” and “max” are used to store minumum and 
maximum values in case of a numeric type. 

GA065_COL
<<BasicType>>

 

 

 

GA065_PFG
<<BasicType>>

  

10 © Open Geospatial Consortium (2005)
 



OGC 04-100 

 

 

© Open Geospatial Consortium (2005) 11
 



OGC 04-100 

 

The feature type definitions of the NGA FACC Profile Application Schema are 
relatively simple. All properties are single valued and cannot occur multiple times, 
i.e. a feature type can be represented as a single table in a relational database. 

To be consistent with the product specifications used in OWS-2 (see below) the 
following changes to the NGA FACC Profile were made manually in the UML 
application schema: 

- Feature Type “BH080”, attribute “ZV2” was added. 

- Feature Type “BH130”, attribute “ZV2” was added. 

- Feature Type “ZD015” added 

7.2 GML Application Schema 

The UML Application Schema was mapped to a GML Application Schema using the 
UGAS tool ShapeChange, originally developed as part of the GOS-TP initiative. 

The version used to create the NGA schemas (version 0.2) was  

12 © Open Geospatial Consortium (2005)
 



OGC 04-100 

- updated to GML 3.1 (ISO CD 19136) and ISO PDTS 19139; 

- enhanced to support additional encoding styles, most notably to support local 
(anonymous) definitions of basic types and enumerations so that the NGA FACC 
Profile feature types could be specified in a way where all components used in feature 
type definition are embedded in the complex type definition of the content model of 
the feature type;  

- enhanced to map the tagged values described above into facets of simple types 
(length, min, max) or annotations (name, code). 

The tool reads XMI 1.0 (UML 1.3) input files. The Rational Rose UML Application 
Schema was exported to XMI using these options: 

 

The GML Application Schema was then created using the UGAS tool by the following 
command: 

java -Xms128m -Xmx1024m -jar ShapeChange.jar -E -C -D -G –X -o "nga" 
  -m "NGA FACC Profile" "xmi\OWS2-IIGS.xml" 

The memory allocation of the Java Virtual Machine (Sun JDK 1.4) had to be increased 
since the NGA FACC Profile is a very large application schema (XMI file size close to 
100MB). 

The following options were used: 

“-G” maps classes with stereotype <<Union>> to a group 

© Open Geospatial Consortium (2005) 13
 



OGC 04-100 

“-X” maps attributes to a global group instead of local elements  

NOTE The –X option was added in a late stage of the initiative after it was discoevred that the use of local 
elements creates schemas that are not accepeted by some XML parsers (e.g. MSXML and Xerces with strict 
validation). Therefore, global groups were used instead to enable restrictions in mission specific application schemas 
based on the NGA FACC Application Schema restricting the contents of the NGA FACC feature types. This is a 
general issue with XML Schema: the use of local elements in a complex prohibits that the complex type may be 
restricted in another namespace. Therefore, local elements can only be used in GML application schemas if the type 
definitions in the schema are not intended to be restricted in other application schemas. 

“-C” surpresses property types for feature and data types (not required for the NGA 
FACC Profile as there are not relationships between the different feature types. 

“-D” is like “-C” only for property-by-value types. 

“-E” maps an <<Enumeration>> class to an anonymous simpleType with enumeration 
facets. 

The hierarchy of the application schema is also represented in the XML Schema files. 
Any GML instance document implementing features of the NGA FACC Profile 
application schema would reference the schema document “NGAFACCProfile.xsd”: 

<schema targetNamespace="http://www.opengis.net/ows-2/nga" xmlns:xlink="http://www.w3.org/1999/xlink" 
xmlns:smXML="http://metadata.dgiwg.org/smXML" xmlns:nga="http://www.opengis.net/ows-2/nga" 
xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.w3.org/2001/XMLSchema" 
elementFormDefault="qualified" version="0.4"> 
 <annotation> 
  <documentation>NGA Profile of the FACC. Automatically created.</documentation> 
 </annotation> 
 <include schemaLocation="C.xsd"/> 
 <include schemaLocation="G.xsd"/> 
 <include schemaLocation="I.xsd"/> 
 <include schemaLocation="0.xsd"/> 
 <include schemaLocation="K.xsd"/> 
 <include schemaLocation="O.xsd"/> 
 <include schemaLocation="A.xsd"/> 
 <include schemaLocation="Z.xsd"/> 
 <include schemaLocation="B.xsd"/> 
 <include schemaLocation="E.xsd"/> 
 <include schemaLocation="S.xsd"/> 
 <include schemaLocation="D.xsd"/> 
 <include schemaLocation="F.xsd"/> 
 <import namespace="http://www.opengis.net/gml" schemaLocation="base/gml3.xsd"/> 
 <!--Type and element definitions of this package--> 
 <complexType name="NGAFeatureType" abstract="true"> 
  <annotation> 
   <documentation>Abstract supertype of all feature types in the NGA profile.</documentation> 
  </annotation> 
  <complexContent> 
   <extension base="gml:AbstractFeatureType"> 
    <sequence> 
     <group ref="nga:SpatialCharacteristicsGroup" minOccurs="0"/> 
    </sequence> 
   </extension> 
  </complexContent> 
 </complexType> 
 <element name="NGAFeature" type="nga:NGAFeatureType" abstract="true" 
   substitutionGroup="gml:_Feature"/> 
 <group name="SpatialCharacteristicsGroup"> 
  <choice> 
   <element name="pointGeometry" type="gml:PointPropertyType"/> 

14 © Open Geospatial Consortium (2005)
 



OGC 04-100 

   <element name="curveGeometry" type="gml:CurvePropertyType"/> 
   <element name="surfaceGeometry" type="gml:SurfacePropertyType"/> 
   <element name="multiPointGeometry" type="gml:MultiPointPropertyType"/> 
   <element name="multiCurveGeometry" type="gml:MultiCurvePropertyType"/> 
   <element name="multiSurfaceGeometry" type="gml:MultiSurfacePropertyType"/> 
   <element name="nodeTopology" type="gml:TopoPointPropertyType" maxOccurs="unbounded"/> 
   <element name="edgeTopology" type="gml:TopoCurvePropertyType" maxOccurs="unbounded"/> 
   <element name="faceTopology" type="gml:TopoSurfacePropertyType" maxOccurs="unbounded"/> 
  </choice> 
 </group> 
</schema> 
 
This file includes the categories, e.g. “G.xsd” 

<schema targetNamespace="http://www.opengis.net/ows-2/nga" xmlns:xlink="http://www.w3.org/1999/xlink" 
xmlns:smXML="http://metadata.dgiwg.org/smXML" xmlns:nga="http://www.opengis.net/ows-2/nga" 
xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.w3.org/2001/XMLSchema" 
elementFormDefault="qualified" version="unknown"> 
 <annotation> 
  <documentation>G - Aeronautical Information</documentation> 
 </annotation> 
 <include schemaLocation="GB.xsd"/> 
 <include schemaLocation="GA.xsd"/> 
 <import namespace="http://www.opengis.net/gml" schemaLocation="base/gml3.xsd"/> 
</schema> 
 
which in turn includes the sub-categories, e.g. “GB.xsd” (here, only a part of the feature 
type GB005 is shown): 

<?xml version="1.0" encoding="UTF-8"?> 
<schema targetNamespace="http://www.opengis.net/ows-2/nga" xmlns:xlink="http://www.w3.org/1999/xlink" 
xmlns:smXML="http://metadata.dgiwg.org/smXML" xmlns:nga="http://www.opengis.net/ows-2/nga" 
xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.w3.org/2001/XMLSchema" 
elementFormDefault="qualified" version="unknown"> 
 <annotation> 
  <documentation>GB - Aeronautical Information-Aerodrome</documentation> 
 </annotation> 
 <import namespace="http://www.opengis.net/gml" schemaLocation="base/gml3.xsd"/> 
 <!--Type and element definitions of this package--> 
 <!--…--> 
 <complexType name="GB005Type"> 
  <annotation> 
   <documentation>US-Airport/Airfield  UK-Airport/Airfield/Airstrip: A defined area of land or water used 
for landing, take-off, and movement of aircraft including associated buildings and facilities.</documentation> 
   <appinfo source="urn:x-ShapeChange:code">GB005</appinfo> 
   <appinfo source="urn:x-ShapeChange:name">US-Airport/Airfield  UK-Airport/Airfield/Airstrip</appinfo> 
  </annotation> 
  <complexContent> 
   <extension base="nga:NGAFeatureType"> 
    <sequence> 
     <group ref="nga:GB005__apt_Group" minOccurs="0"/> 
     <group ref="nga:GB005__exs_Group" minOccurs="0"/> 
     <group ref="nga:GB005__nam_Group" minOccurs="0"/> 
     <group ref="nga:GB005__use_Group" minOccurs="0"/> 
     <!--…--> 
    </sequence> 
   </extension> 
  </complexContent> 
 </complexType> 
 <group name="GB005__apt_Group"> 
  <sequence> 
   <element name="apt"> 
    <annotation> 
     <documentation>Airfield Type: Unique airfield type.</documentation> 

© Open Geospatial Consortium (2005) 15
 



OGC 04-100 

     <appinfo source="urn:x-ShapeChange:code">APT</appinfo> 
     <appinfo source="urn:x-ShapeChange:name">Airfield Type</appinfo> 
    </annotation> 
    <simpleType> 
     <restriction base="string"> 
      <enumeration value="0"> 
       <annotation> 
        <documentation>Unknown</documentation> 
       </annotation> 
      </enumeration> 
      <enumeration value="1"> 
       <annotation> 
        <documentation>Major Airfield</documentation> 
       </annotation> 
      </enumeration> 
      <enumeration value="2"> 
       <annotation> 
        <documentation>Minor Airfield</documentation> 
       </annotation> 
      </enumeration> 
      <!--…--> 
     </restriction> 
    </simpleType> 
   </element> 
  </sequence> 
 </group> 
 <group name="GB005__exs_Group"> 
  <sequence> 
   <element name="exs"> 
    <annotation> 
     <documentation>Existence Category: The state or condition of the feature.</documentation> 
     <appinfo source="urn:x-ShapeChange:code">EXS</appinfo> 
     <appinfo source="urn:x-ShapeChange:name">Existence Category</appinfo> 
    </annotation> 
    <simpleType> 
     <restriction base="string"> 
      <enumeration value="0"> 
       <annotation> 
        <documentation>Unknown</documentation> 
       </annotation> 
      </enumeration> 
      <!--…--> 
      <enumeration value="28"> 
       <annotation> 
        <documentation>Operational</documentation> 
       </annotation> 
      </enumeration> 
     </restriction> 
    </simpleType> 
   </element> 
  </sequence> 
 </group> 
 <group name="GB005__nam_Group"> 
  <sequence> 
   <element name="nam"> 
    <annotation> 
     <documentation>Name: Any identifier or code.</documentation> 
     <appinfo source="urn:x-ShapeChange:code">NAM</appinfo> 
     <appinfo source="urn:x-ShapeChange:name">Name</appinfo> 
    </annotation> 
    <complexType> 
     <simpleContent> 
      <restriction base="gml:CodeType"> 
       <maxLength value="80"/> 
      </restriction> 

16 © Open Geospatial Consortium (2005)
 



OGC 04-100 

     </simpleContent> 
    </complexType> 
   </element> 
  </sequence> 
 </group> 
 <group name="GB005__use_Group"> 
  <sequence> 
   <element name="use"> 
    <annotation> 
     <documentation>Usage: Use (identifies the primary user, function, or controlling 
authority).</documentation> 
     <appinfo source="urn:x-ShapeChange:code">USE</appinfo> 
     <appinfo source="urn:x-ShapeChange:name">Usage</appinfo> 
    </annotation> 
    <simpleType> 
     <restriction base="string"> 
      <enumeration value="0"> 
       <annotation> 
        <documentation>Unknown</documentation> 
       </annotation> 
      </enumeration> 
      <enumeration value="8"> 
       <annotation> 
        <documentation>Military</documentation> 
       </annotation> 
      </enumeration> 
      <enumeration value="22"> 
       <annotation> 
        <documentation>Joint Military/Civilian</documentation> 
       </annotation> 
      </enumeration> 
      <enumeration value="49"> 
       <annotation> 
        <documentation>Civilian/Public</documentation> 
       </annotation> 
      </enumeration> 
      <enumeration value="999"> 
       <annotation> 
        <documentation>Other</documentation> 
       </annotation> 
      </enumeration> 
      <!--…--> 
     </restriction> 
    </simpleType> 
   </element> 
  </sequence> 
 </group> 
 <!--…--> 
 <element name="GB005" type="nga:GB005Type" substitutionGroup="nga:NGAFeature"/> 
 <!--…--> 
</schema> 
 
These GML feature type definitions contain all the information represented in the UML 
Application Schema.  

Later in the initiative it has been identified that the encoding of the SpatialRepresentation 
union class as a choice block of GML properties to distinguish the different types of 
spatial properties (geometric primitive, geometric aggregate, topology) is difficult to 
handle for WFS clients both in parsing the data and in creating queries. In a revision of 
the application schemas this should be replaced by a single geometric property whose 
value is a choice of the geometry of topology object elements. The UML-to-GML 
encoding rule should be updated accordingly. 

© Open Geospatial Consortium (2005) 17
 



OGC 04-100 

In addition, three GML dictionaries are created which can be used to map codes to long 
names and descriptions. These can be used by applications: 

FeatureTypeDictionary.xml: 

<Dictionary xmlns="http://www.opengis.net/gml" xmlns:gml="http://www.opengis.net/gml" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/gml 
base/gml3.xsd"> 
 <description>Dictionary</description> 
 <name>NGA Dictionary of the NGA Profile</name> 
 <dictionaryEntry> 
  <DefinitionCollection gml:id="NGAFeatureTypes"> 
   <description>Dictionary of the feature types of the NGA Profile</description> 
   <name>NGA Feature Types</name> 
   <definitionMember> 
    <Definition gml:id="AA010"> 
     <description>Mine</description> 
     <name>AA010</name> 
    </Definition> 
   </definitionMember> 
… 
   <definitionMember> 
    <Definition gml:id="GA065"> 
     <description>Air Warning Light</description> 
     <name>GA065</name> 
    </Definition> 
   </definitionMember> 
… 
  </DefinitionCollection> 
 </dictionaryEntry> 
</Dictionary> 
 
AttributeTypeDictionary.xml: 

<?xml version="1.0"?> 
<Dictionary xmlns="http://www.opengis.net/gml" xmlns:gml="http://www.opengis.net/gml" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/gml 
base/gml3.xsd"> 
 <description>Dictionary of the NGA Profile</description> 
 <name>NGA Dictionary</name> 
 <dictionaryEntry> 
  <DefinitionCollection gml:id="NGAAttributeTypes"> 
   <description>Dictionary of the attribute types of the NGA Profile</description> 
   <name>NGA Attribute Types</name> 
   <definitionMember> 
    <Definition gml:id="ACC"> 
     <description>Accuracy Category</description> 
     <name>ACC</name> 
    </Definition> 
   </definitionMember> 
… 
   <definitionMember> 
    <Definition gml:id="COC"> 
     <description>Conspicuous Category</description> 
     <name>COC</name> 
    </Definition> 
   </definitionMember> 
… 
  </DefinitionCollection> 
 </dictionaryEntry> 
</Dictionary> 
 
CodeValueDictionary.xml: 

18 © Open Geospatial Consortium (2005)
 



OGC 04-100 

<Dictionary xmlns="http://www.opengis.net/gml" xmlns:gml="http://www.opengis.net/gml" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/gml 
base/gml3.xsd"> 
 <description>Dictionary of the NGA Profile</description> 
 <name>NGA Dictionary</name> 
 <dictionaryEntry> 
  <DefinitionCollection gml:id="NGACodeValues"> 
   <description>Dictionary of the coded values of the NGA Profile</description> 
   <name>NGA Code Values</name> 
   <definitionMember> 
    <Definition gml:id="ACC_0"> 
     <description><![CDATA[Unknown]]></description> 
     <name codeSpace="urn:x-ShapeChange:Attribute:ACC">0</name> 
    </Definition> 
   </definitionMember> 
   <definitionMember> 
    <Definition gml:id="ACC_1"> 
     <description><![CDATA[Accurate]]></description> 
     <name codeSpace="urn:x-ShapeChange:Attribute:ACC">1</name> 
    </Definition> 
   </definitionMember> 
   <definitionMember> 
    <Definition gml:id="ACC_2"> 
     <description><![CDATA[Approximate]]></description> 
     <name codeSpace="urn:x-ShapeChange:Attribute:ACC">2</name> 
    </Definition> 
   </definitionMember> 
… 
  </DefinitionCollection> 
 </dictionaryEntry> 
</Dictionary> 
 

8 GML Profile for the NGA FACC Profile  

Since the GML 3.1 schema offers a wide range of components that may be used by 
geospatial application schemas, almost all application schemas will use only a very 
limited part of the full GML schema. 

To specify and document the usage of GML by an application schema typically a profile 
of the GML schema is created and used instead of the full schema. 

The GML profile of  NGA was created in a two step process, based on the document 
“DGIWG_2D_profile_of_ISO_19107.doc”. Since GML is an implementation of all parts 
of ISO 19107 used by the DGIWG 2D profile, the GML objects implementing the 
relevant classes of the spatial schema plus the general types and elements for feature type 
definitions were extracted from the full GML schema by using the tool that is part of the 
GML specification, annex G (first step).  

In the second step, the schema definitions were manually edited to reflect the descriptions 
and OCL constraints of the ISO 19107 profile in the document mentioned above relevant 
for the OWS-2 application schemas (while adhering to the rules for profiles in GML). 

An example: The profile requires that all topology primitives have a geometry 
representation. So, where the GML schema defines an “edge” as 

 <complexType name="EdgeType"> 

© Open Geospatial Consortium (2005) 19
 



OGC 04-100 

  <complexContent> 
   <extension base="gml:AbstractTopoPrimitiveType"> 
    <sequence> 
     <element ref="gml:directedNode" minOccurs="2" maxOccurs="2"/> 
     <element ref="gml:directedFace" minOccurs="0" maxOccurs="unbounded"/> 
     <element ref="gml:curveProperty" minOccurs="0"/> 
    </sequence> 
   </extension> 
  </complexContent> 
 </complexType> 
 
the NGA profile removes the minOccurs="0" in the “curveProperty” property: 

 <xsd:complexType name="EdgeType"> 
  <xsd:complexContent> 
   <xsd:extension base="gml:AbstractTopoPrimitiveType"> 
    <xsd:sequence> 
     <xsd:element ref="gml:directedNode" minOccurs="2" maxOccurs="2"/> 
     <xsd:element ref="gml:directedFace" minOccurs="0" maxOccurs="unbounded"/> 
     <xsd:element ref="gml:curveProperty"/> 
    </xsd:sequence> 
   </xsd:extension> 
  </xsd:complexContent> 
 </xsd:complexType> 
 
The resulting GML profile is captured in the schema document “gml3NGAProfile.xsd”. 
All NGA application schemas documented in this DIPR used this profile. 

Not represented in the GML profile is annex A (“Predefined sets”) of the DGIWG profile 
as these classes are not used in the OWS-2 application schemas. 

9 Application Schema for NGA Product Profiles (VMAP levels 0-2, TLM) 

9.1 UML Appliation Schema 

The application schemas for all four products were created in the same way, always 
based on two inputs: the NGA FACC Profile application schema described above and a 
description of the product. 

This product description were tables of the form: 

Theme Area Line Point FACC Attribute Attribute Value 
for coded types 
(enumerations)

Units NOTES 

POP Area   AK040 N/A    
POP Area   AK130 N/A    
POP   Point AK160 TXT    
POP   Point AL015 TXT    
POP Area  Point AL020 NAM    
POP   Point AL025 TXT    

20 © Open Geospatial Consortium (2005)
 



OGC 04-100 

POP   Point AL105 TXT    
POP   Point AL130 TXT    
POP Area  Point AL135 NAM    
POP   Point AL200 TXT    
TRANS  Line Point AL210 TUC 3  
TRANS  Line Point AL210 TUC 4  
IND   Point AL240 TXT    
BND  Line  AL260 N/A    
BND   Point AL260 TXT    
IND   Point AM010 TXT    
IND   Point AM070 TXT    
IND   Point AM080 TXT    
TRANS  Line  AN010 ACC 2  
TRANS  Line  AN010 ACC NULL   
TRANS  Line  AN010 COE 2  
TRANS  Line  AN010 COE NULL   
… … … … … … … … … 
 

The four product descriptions are: 

- VMAP0: VMAP0_NGAProfile_V2.xls 

- VMAP1: VMAP1_NGAProfile_V2.xls 

- VMAP2: VMAP2_NGAProfileApr02_V4.xls 

- TLM: TLM_NGAProfile.xls   

These tables were converted to CSV files and processed by a simple Rational Rose Script 
implementing the actions described below: 

For every feature type in the profile, one or more feature type classes are created based 
on the template in the NGA FACC Profile. One class is created for every NGA FACC 
Profile feature type per spatial dimension. Therefore, a maximum of three feature types 
are possible: surface (2D), curve (1D) or point (0D). To distinguish the subtypes, a prefix 
is added to the name of the feature types, e.g. “A” for a feature with 2D geometry, “L” 
for 1D and “P” for 0D.  

The respective <<Union>> classes for spatail representations of a certain dimensionality 
have been added to the NGA FACC Profile Application Schema, too. 

Basic types are directly used from the NGA FACC Profile and coded values are restricted 
to the values defined in the profile. 

 

© Open Geospatial Consortium (2005) 21
 



OGC 04-100 

PGB005
+ spat ialRepresentation : SpatialCharacterist ics0D
+ iko :  GB005_IKO
+ nam :  GB005_NAM
+ use : PGB005_USE_VMAP0
+ zv3 : GB005_ZV3

PGB005_USE_VMAP0
+ Unknown = 0
+ Mil itary = 8
+ Joint  Mil itary/Civi lian = 22
+ Civilian/Public = 49
+ Other = 999

<<Enumeration>>
SpatialCharacteristics0D

+ pointGeometry : GM_Point
+ multiPointGeometry : GM_MultiPoint
+ nodeTopology : TP_Node

(from NGA FACC Profile)

<<Union>>

 

So, basically, the new feature type classes are restricted copies of feature types defined in 
the NGA FACC Profile. Since it was considered unnecessary to express this relationship 
this was not modelled using inheritance. See the MSDS application schema below for an 
alternative approach using specialization relationships. 

9.2 GML Application Schema 

Again, the GML application schema was automatically derived from the UML 
Application  Schema using the UGAS tool (using the same settings). One XML Schema 
file was created per product. 

Preliminary support for the themes in the product profiles was added manually. This 
requires further analysis how this would be best mapped to ISO 19109 UML. The themes 
were modelled as feature collections based on the tables shown above (see first column) 
where all features in a theme are in the same topological complex.   

As an example, an excerpt from the VMAP0 product application schema: 

<schema targetNamespace="http://www.opengis.net/ows-2/nga/vmap0" 
xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:vmap0="http://www.opengis.net/ows-2/nga/vmap0" 
xmlns:smXML="http://metadata.dgiwg.org/smXML" xmlns:nga="http://www.opengis.net/ows-2/nga" 
xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.w3.org/2001/XMLSchema" 
elementFormDefault="qualified" version="0.3"> 
 <import namespace="http://www.opengis.net/gml" schemaLocation="base/gml3.xsd"/> 
 <!--Type and element definitions of this package--> 
… 
 <element name="ThemeELEV" type="vmap0:ThemeELEVType"  
  substitutionGroup="gml:_FeatureCollection"/> 
 <complexType name="ThemeELEVType"> 
  <annotation> 
   <documentation>Feature Collection for Theme ELEV</documentation> 
  </annotation> 
  <complexContent> 
   <restriction base="gml:AbstractFeatureCollectionType"> 

22 © Open Geospatial Consortium (2005)
 



OGC 04-100 

    <sequence> 
     <group ref="gml:StandardObjectProperties"/> 
     <element ref="gml:boundedBy" minOccurs="0"/> 
     <element ref="vmap0:themeELEVMember" minOccurs="0" maxOccurs="unbounded"/> 
    </sequence> 
   </restriction> 
  </complexContent> 
 </complexType> 
 <element name="themeELEVMember" type="vmap0:ELEVMemberPropertyType"  
  substitutionGroup="gml:featureMember"/> 
 <complexType name="ELEVMemberPropertyType"> 
  <complexContent> 
   <restriction base="gml:FeaturePropertyType"> 
    <sequence> 
     <choice minOccurs="0"> 
      <element ref="vmap0:LCA010"/> 
      <element ref="vmap0:PCA030"/> 
      <element ref="vmap0:PCA035"/> 
      <element ref="vmap0:AZD040"/> 
      <element ref="vmap0:AZD045"/> 
      <element ref="vmap0:LZD040"/> 
      <element ref="vmap0:LZD045"/> 
      <element ref="vmap0:PZD040"/> 
      <element ref="vmap0:PZD045"/> 
     </choice> 
    </sequence> 
    <attributeGroup ref="gml:AssociationAttributeGroup"/> 
   </restriction> 
  </complexContent> 
 </complexType> 
… 
 <complexType name="AAA010Type"> 
  <annotation> 
   <documentation>Mine: An excavation made in the earth for the purpose of extracting natural deposits.  
(See also AQ090)</documentation> 
   <appinfo source="urn:x-ShapeChange:code">AA010</appinfo> 
   <appinfo source="urn:x-ShapeChange:name">Mine</appinfo> 
  </annotation> 
  <complexContent> 
   <extension base="gml:AbstractFeatureType"> 
    <sequence> 
     <choice> 
      <element name="surfaceGeometry" type="gml:SurfacePropertyType"/> 
      <element name="multiSurfaceGeometry" type="gml:MultiSurfacePropertyType"/> 
      <element name="faceTopology" type="gml:TopoSurfacePropertyType" 
maxOccurs="unbounded"/> 
     </choice> 
     <element name="min"> 
      <annotation> 
       <documentation>Mining Category: Unique mining characteristic.</documentation> 
       <appinfo source="urn:x-ShapeChange:code">MIN</appinfo> 
       <appinfo source="urn:x-ShapeChange:name">Mining Category</appinfo> 
      </annotation> 
      <simpleType> 
       <restriction base="string"> 
        <enumeration value="0"> 
         <annotation> 
          <documentation>Unknown</documentation> 
         </annotation> 
        </enumeration> 
        <enumeration value="8"> 
         <annotation> 
          <documentation>Peat Cuttings</documentation> 
         </annotation> 
        </enumeration> 

© Open Geospatial Consortium (2005) 23
 



OGC 04-100 

       </restriction> 
      </simpleType> 
     </element> 
    </sequence> 
   </extension> 
  </complexContent> 
 </complexType> 
 <element name="AAA010" type="vmap0:AAA010Type" substitutionGroup="gml:_Feature"/> 
 <complexType name="AAA052Type"> 
  <annotation> 
   <documentation>Oil/Gas Field: An area where oil and/or gas is pumped or otherwise removed from 
the ground.</documentation> 
   <appinfo source="urn:x-ShapeChange:code">AA052</appinfo> 
   <appinfo source="urn:x-ShapeChange:name">Oil/Gas Field</appinfo> 
  </annotation> 
  <complexContent> 
   <extension base="gml:AbstractFeatureType"> 
    <sequence> 
     <choice> 
      <element name="surfaceGeometry" type="gml:SurfacePropertyType"/> 
      <element name="multiSurfaceGeometry" type="gml:MultiSurfacePropertyType"/> 
      <element name="faceTopology" type="gml:TopoSurfacePropertyType" 
maxOccurs="unbounded"/> 
     </choice> 
    </sequence> 
   </extension> 
  </complexContent> 
 </complexType> 
… 
</schema> 
 

10 MSDS Application Schema 

10.1 UML Application Schema 

The application schema for the mission specific data (used for the OWS-2 demonstration) 
was built to fit the data provided. The data was based on actual data, but edited to explore 
some additional capabilities of GML 3. However, due to the software used to manipulate 
the dataset, only limited changes to the demo data were possible. However, the data 
represent a case where additional information not captured in the NGA FACC Profile has 
to be added. 

Therefore, the NGA FACC Profile was copied and reduced to a subset of the full NGA 
FACC Profile based on the data. A Rational Rose script was used to do this, but this 
could also be done manually by someone with knowledge about the captured data.  

The additional information not captured in the FACC profile is added in the MSDS 
application schema. Again, in OWS-2 this was done using a Rational Rose script to be 
able to repeat the process with changes (to take feedback into account and to test 
alternative approaches), but this can be done manually, too.  

The Rose script used in the process is shown in Annex A. 

 

24 © Open Geospatial Consortium (2005)
 



OGC 04-100 

 

MSDS
<<Application Schema>>

NGA FACC Profi le for 
MSDS

<<Application Schema>>

 

Since the data contained a distinction between the dimensionality of the spatial 
representation of the features, the structure used in the product application schemas with 
distinct feature types and a “A”, “L” or “P” prefix was used here, too. 

The typical feature type definition in the MSDS application schema is shown in the class 
diagram below.  

- The ZD012 feature type has been reduced to the attributes in the mission specific data 
(an equivsalent representation would have been to restrict the multiplicity of the 
unused attributes to “[0..0]”). 

- The mission specific data contains only features with a 0D spatial representation of 
the feature type. Therefore, a class “PZD012” has been defined as a specialization of 
ZD012. 

- In PZD012 the spatialRepresentation property has been reduced to the 0D 
characteristics. 

- The additional property contained in the data, but not part of the NGA FACC Profile 
has been added. In this case, an attribute containing a time stamp. 

© Open Geospatial Consortium (2005) 25
 



OGC 04-100 

SpatialCharacterist ics0D
+ pointGeometry : GM_Point
+ mult iPointGeometry : GM_MultiPoint
+ nodeTopology [1.. *]  :  TopoPoint

<<Union>>

ZD012

+ spatialRepresentation [0..1] : SpatialCharacteristics
+ txt [0..1] : ZD012_TXT

(from NGA FACC Profile for MSDS)

ZD012_TXT
(from NGA FACC Profile for MSDS)

<<BasicType>>

PZD012
+ spat ialRepresentation : SpatialCharacterist ics0D
+ tms [0. .1]  :  TM_Instant

 

10.2 GML Application Schema 

Again, the GML application schema was automatically derived from the UML 
Application  Schema using the UGAS tool. As above, support for themes was added 
manually.  

An excerpt from the MSDS application schema showing the definition of the PZD012 
feature type: 

<schema targetNamespace="http://www.opengis.net/ows-2/nga/msds" 
xmlns="http://www.w3.org/2001/XMLSchema" xmlns:gml="http://www.opengis.net/gml" 
xmlns:msds="http://www.opengis.net/ows-2/nga/msds" xmlns:nga="http://www.opengis.net/ows-2/nga" 
xmlns:smXML="http://metadata.dgiwg.org/smXML" xmlns:xlink="http://www.w3.org/1999/xlink" 
elementFormDefault="qualified" version="0.2"> 
 <import namespace="http://www.opengis.net/ows-2/nga" schemaLocation="NGAFACCProfileforMSDS.xsd"/> 
 <import namespace="http://www.opengis.net/gml" schemaLocation="base/gml3.xsd"/> 
 <!--Type and element definitions of this package--> 
 <!--…--> 
 <complexType name="PZD012RestrictionType" abstract="true"> 
  <complexContent> 
   <restriction base="nga:ZD012Type"> 
    <sequence> 
     <element ref="gml:metaDataProperty" minOccurs="0" maxOccurs="unbounded"/> 
     <element ref="gml:description" minOccurs="0"/> 
     <element ref="gml:name" minOccurs="0" maxOccurs="unbounded"/> 
     <element ref="gml:boundedBy" minOccurs="0"/> 
     <group ref="nga:SpatialCharacteristics0DGroup"/> 
     <group ref="nga:ZD012__txt_Group" minOccurs="0"/> 
    </sequence> 
   </restriction> 
  </complexContent> 
 </complexType> 
 <complexType name="PZD012Type"> 

26 © Open Geospatial Consortium (2005)
 



OGC 04-100 

  <annotation> 
   <documentation>Geographic Information Point: A location where geographic information or statistics 
may apply.</documentation> 
   <appinfo source="urn:x-ShapeChange:code">ZD012</appinfo> 
   <appinfo source="urn:x-ShapeChange:name">Geographic Information Point</appinfo> 
  </annotation> 
  <complexContent> 
   <extension base="msds:PZD012RestrictionType"> 
    <sequence> 
     <group ref="msds:PZD012__tms_Group" minOccurs="0"/> 
    </sequence> 
   </extension> 
  </complexContent> 
 </complexType> 
 <group name="PZD012__tms_Group"> 
  <sequence> 
   <element name="tms" type="gml:TimeInstantPropertyType"> 
    <annotation> 
     <documentation>Extraction Timestamp: The date on which the feature was extracted followed 
by an increment specific to each source.</documentation> 
     <appinfo source="urn:x-ShapeChange:code">TMS</appinfo> 
     <appinfo source="urn:x-ShapeChange:name">Extraction Timestamp</appinfo> 
    </annotation> 
   </element> 
  </sequence> 
 </group> 
 <element name="PZD012" type="msds:PZD012Type" substitutionGroup="nga:ZD012"/> 
 <!--…--> 
</schema> 
 

11 Discussion of GML Level 0 and the NGA Application Schemas 

It was discussed whether the Application Schemas should use the proposed Level 0 
profile. After an analysis it was identified that Level 0 is in many aspects not sufficient 
for the requirments of NGA. The major issues are: 

- The DGIWG spatial profile, the basis for the GML profile used by the application 
schemas, goes far beyond the spatial elements allowed in Level 0. This includes the 
use of curve segments, non-linear interpolation types, topology objects, rings, etc. 

- The NGA Application Schema requires the use of temporal objects. 

- Level 0 uses elements which were deprecated with GML 3.0. 

- Level 0 requires that the srsName attribute is set in geometries. On the other hand, the 
DGIWG profile requests that the coordinate reference system is not specified for 
geometric primitives, but only once for collections. 

- NGA is interested in using temporal topology in future application schemas, but this 
is not allowed in Level 0. 

- NGA is interested in using metadata in future application schemas, but this is not 
allowed in Level 0. 

© Open Geospatial Consortium (2005) 27
 



OGC 04-100 

- The use of dictionaries is not allowed in Level 0. However, dictionaries are used to 
represent information from the FACC as well as for a units dictionary.  

- Requirements for basic types in Level 0 do not match the requirements of NGA and 
the FACC. Not included are, for example, minimum and maximum numeric values 
(“min” and “max” facets), types with units of measurements (gml:MeasureType and 
derived types) and coded values (“enumeration” facet). Also, Level 0 requires the use 
of facets which are not used (or useful) for the NGA FACC Profile. 

- The rule that all feature types must directly derive from gml:AbstractFeatureType is 
not necessarily what meets the requirements of mission specific application schemas 
where existing feature types of the NGA FACC Profile will typically be extended 
with additional properties (like in the demo data). This is not possible in Level 0. 

- The application schemas as shown in the previous sections do not comply with the 
rules for using XML namespaces in Level 0.  

o While it would be easily possible to change the namespace prefixes to the 
values prescribed by the Level 0 draft, the restrictions imposed by Level 0 are 
debatable.  

o Since only a single namespace for all application specific declarations is 
allowed, all mission specific schemas would be required to use the same 
namespace as the NGA FACC Profile, which is not appropriate.  

- The use of a GML profile schema is not allowed in Level 0. 

- The rules for the names of complex types is slightly different for the rules of GML 
3.1 (ISO CD 19136) Annex E, which were applied for the NGA application schemas. 

- Level 0 does not allow nesting of feature collections, a capability that is of interest to 
NGA (see below).  

It was therefore decided not to consider Level 0 as the basis for the application schemas 
of NGA. 

12 Temporal Topology 

It was originally planned to include also temporal topology in the mission specific 
application schema. However, since it was not possible to prepare approriate data as well 
as missing support for temporal topology in clients, temporal topology information is not  
part of the MSDS application schema. 

This clause illustrates, how temporal topology could have been integrated in the 
application schema. As an example, assume that the temporal validity and succession of 
features describing the flooding situation shall be represented using temporal topology, so 
that for every point in time. 

28 © Open Geospatial Consortium (2005)
 



OGC 04-100 

 <complexType name="FloodStatusType"> 
  <complexContent> 
   <extension base="gml:AbstractFeatureType"> 
    <sequence> 
     <group ref="nga:SpatialCharacteristics2DGroup"/> 
     <group ref="msds:FloodStatus__temporalValidity_Group"/> 
    </sequence> 
   </extension> 
  </complexContent> 
 </complexType> 
 <group name="FloodStatus__temporalValididy_Group"> 
  <sequence> 
   <element name="temporalValididy" type="gml:TimeEdgePropertyType"/> 
  </sequence> 
 </group> 
 <element name="FloodStatus" type="msds:FloodStatusType" substitutionGroup="gml:_Feature"/> 
 
An instance could then, for example, look like: 

<FloodStatus gml:id=”o1”> 
 <spatialRepresentation> 
  <gml:Polygon> 
   <!-- ... flooded area ... --> 
  </gml:Polygon> 
 </spatialRepresentation> 
 <temporalValidity> 
  <gml:TimeEdge gml:id="te2"> 
   <gml:start> 
    <gml:TimeNode gml:id="tn2"> 
     <gml:previousEdge xlink:href="#te1"/> 
     <gml:nextEdge xlink:href="#te2"/> 
     <gml:position> 
      <gml:TimeInstant> 
       <gml:timePosition>2004-08-28T01:04:28Z</gml:timePosition> 
      </gml:TimeInstant> 
     </gml:position> 
    </gml:TimeNode> 
   </gml:start> 
   <gml:end> 
    <gml:TimeNode gml:id="tn3"> 
     <gml:previousEdge xlink:href="#te2"/> 
     <gml:nextEdge xlink:href="#te3"/> 
     <gml:nextEdge xlink:href="#te4"/> 
     <gml:position> 
      <gml:TimeInstant> 
       <gml:timePosition>2004-08-28T23:46:10Z</gml:timePosition> 
      </gml:TimeInstant> 
     </gml:position> 
    </gml:TimeNode> 
   </gml:end> 
   <gml:extent> 
    <gml:TimePeriod> 
     <gml:beginPosition>2004-08-28T01:04:28Z</gml:beginPosition> 
     <gml:endPosition>2004-08-28T23:46:10Z</gml:endPosition> 
    </gml:TimePeriod> 
   </gml:extent> 
  </gml:TimeEdge> 
 </temporalValidity> 
</FloodStatus> 

© Open Geospatial Consortium (2005) 29
 



OGC 04-100 

13 Complex Features 

It is often of interest to group a collection of NGA FACC Profile features in the dataset. 
Examples could be a hospital complex, a highway system or an oil field. 

The definition of these feature collections will typically depend on specific type, so the 
following definitions may be seen as examples. Note that these feature collections are 
features themselves and can be retrieved from a WFS, too. 

If the highway system is just a collection of the road features then it may be defined as: 

 <element name="HighwaySystem" substitutionGroup="gml:_FeatureCollection"> 
  <complexType> 
   <annotation> 
    <documentation>A highway system</documentation> 
   </annotation> 
   <complexContent> 
    <restriction base="gml:AbstractFeatureCollectionType"> 
     <sequence> 
      <group ref="gml:StandardObjectProperties"/> 
      <element ref="gml:boundedBy"/> 
      <element ref="msds:roads" minOccurs="0" maxOccurs="unbounded"/> 
     </sequence> 
    </restriction> 
   </complexContent> 
  </complexType> 
 </element> 
 <element name="roads" substitutionGroup="gml:featureMember"> 
  <complexType> 
   <complexContent> 
    <restriction base="gml:FeaturePropertyType"> 
     <sequence> 
      <element ref="msds:LAP030" minOccurs="0"/> 
     </sequence> 
     <attributeGroup ref="gml:AssociationAttributeGroup"/> 
    </restriction> 
   </complexContent> 
  </complexType> 
 </element> 
 
Then, an instance document could contain highway system as well as the road features. 
 
<gml:FeatureCollection xmlns="http://www.opengis.net/ows-2/nga/msds" 
xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:gml="http://www.opengis.net/gml" 
xmlns:msds="http://www.opengis.net/ows-2/nga/msds" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.opengis.net/ows-2/nga/msds ./MSDS.xsd"> 
 <gml:boundedBy> 
  <gml:Envelope srsName="EPSG:4329"> 
   <gml:lowerCorner>32.80 44.40 25.60</gml:lowerCorner> 
   <gml:upperCorner>32.88 44.50 88.48</gml:upperCorner> 
  </gml:Envelope> 
 </gml:boundedBy> 
 <gml:featureMember> 
  <gml:HighwaySystem gml:id="HS.1"> 
   <gml:boundedBy> 
    <gml:Envelope srsName="EPSG:4329"> 
     <gml:lowerCorner>32.80 44.40 25.60</gml:lowerCorner> 
     <gml:upperCorner>32.88 44.50 88.48</gml:upperCorner> 
    </gml:Envelope> 
   </gml:boundedBy> 

30 © Open Geospatial Consortium (2005)
 



OGC 04-100 

   <msds:roads xlink:href="#LAP030.1"/> 
   <msds:roads xlink:href="#LAP030.2"/> 
   <msds:roads xlink:href="#LAP030.3"/> 
   <msds:roads xlink:href="#LAP030.4"/> 
   <msds:roads xlink:href="#LAP030.5"/> 
  </gml:HighwaySystem> 
 </gml:featureMember> 
 <gml:featureMember> 
  <msds:LAP030 gml:id="LAP030.1"> 
   <nga:edgeTopology> 
    <gml:TopoCurve> 
     <gml:directedEdge orientation="+"> 
      <gml:Edge gml:id="E1"> 
       <gml:directedNode orientation="-"> 
        <gml:Node gml:id="N1"> 
         <gml:directedEdge orientation="-" xlink:href="#E1"/> 
         <gml:pointProperty> 
          <gml:Point srsName="EPSG:4329"> 
           <gml:pos>32.8065719604493 44.469554901123 
31.2497463226318</gml:pos> 
          </gml:Point> 
         </gml:pointProperty> 
        </gml:Node> 
       </gml:directedNode> 
       <gml:directedNode orientation="+"> 
        <gml:Node gml:id="N2"> 
         <gml:directedEdge orientation="+" xlink:href="#E1"/> 
         <gml:pointProperty> 
          <gml:Point srsName="EPSG:4329"> 
           <gml:pos>32.8065490722657 44.469596862793 
31.2484951019287</gml:pos> 
          </gml:Point> 
         </gml:pointProperty> 
        </gml:Node> 
       </gml:directedNode> 
       <gml:curveProperty> 
        <gml:Curve srsName="EPSG:4329"> 
         <gml:segments> 
          <gml:LineStringSegment> 
           <gml:posList>32.8065719604493 44.469554901123 
31.2497463226318 32.8065490722657 44.469596862793 31.2484951019287 </gml:posList> 
          </gml:LineStringSegment> 
         </gml:segments> 
        </gml:Curve> 
       </gml:curveProperty> 
      </gml:Edge> 
     </gml:directedEdge> 
    </gml:TopoCurve> 
   </nga:edgeTopology> 
   <nga:rtt>1</nga:rtt> 
  </msds:LAP030> 
 </gml:featureMember> 
 <gml:featureMember> 
  <msds:LAP030 gml:id="LAP030.2"> 
   <!-- ... --> 
  </msds:LAP030> 
 </gml:featureMember> 
 <!-- ... --> 
</gml:FeatureCollection> 
 
Similarily, this could be done for a hosptial complex consisting of different base features 
or any other meaningful aggregation of features. 

© Open Geospatial Consortium (2005) 31
 



OGC 04-100 

14 Using a Topology Complex  

An alternative approach to encoding the topology could be using explicit topology 
complexes so that the topology primitives would be separate from the features. In this 
case, the instance document in the previous clause would be changed, for example to: 

<gml:FeatureCollection xmlns="http://www.opengis.net/ows-2/nga/msds" 
xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:gml="http://www.opengis.net/gml" 
xmlns:msds="http://www.opengis.net/ows-2/nga/msds" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.opengis.net/ows-2/nga/msds ./MSDS.xsd http://www.opengis.net/gml 
./base/gml3.xsd"> 
 <gml:boundedBy> 
  <gml:Envelope srsName="EPSG:4329"> 
   <gml:lowerCorner>32.80 44.40 25.60</gml:lowerCorner> 
   <gml:upperCorner>32.88 44.50 88.48</gml:upperCorner> 
  </gml:Envelope> 
 </gml:boundedBy> 
 <gml:featureMember> 
  <gml:HighwaySystem gml:id="HS.1"> 
   <gml:boundedBy> 
    <gml:Envelope srsName="EPSG:4329"> 
     <gml:lowerCorner>32.80 44.40 25.60</gml:lowerCorner> 
     <gml:upperCorner>32.88 44.50 88.48</gml:upperCorner> 
    </gml:Envelope> 
   </gml:boundedBy> 
   <msds:roads xlink:href="#LAP030.1"/> 
   <msds:roads xlink:href="#LAP030.2"/> 
   <msds:roads xlink:href="#LAP030.3"/> 
   <msds:roads xlink:href="#LAP030.4"/> 
   <msds:roads xlink:href="#LAP030.5"/> 
   <msds:topoComplex xlink:href="#TC"/> 
  </gml:HighwaySystem> 
 </gml:featureMember> 
 <gml:featureMember> 
  <msds:LAP030 gml:id="LAP030.1"> 
   <nga:edgeTopology> 
    <gml:TopoCurve> 
     <gml:directedEdge orientation="+" xlink:href="#E1"/> 
    </gml:TopoCurve> 
   </nga:edgeTopology> 
   <nga:rtt>1</nga:rtt> 
  </msds:LAP030> 
 </gml:featureMember> 
 <gml:featureMember> 
  <msds:LAP030 gml:id="LAP030.2"> 
   <!-- ... --> 
  </msds:LAP030> 
 </gml:featureMember> 
 <!-- ... --> 
 <msds:topoComplex> 
  <gml:TopoComplex gml:id="TC"> 
   <gml:maximalComplex xlink:href="#TC"/> 
   <gml:topoPrimitiveMembers> 
    <gml:Node gml:id="N1"> 
     <gml:directedEdge orientation="-" xlink:href="#E1"/> 
     <gml:pointProperty> 
      <gml:Point srsName="EPSG:4329"> 
       <gml:pos>32.8065719604493 44.469554901123 31.2497463226318</gml:pos> 
      </gml:Point> 
     </gml:pointProperty> 
    </gml:Node> 
    <gml:Node gml:id="N2"> 
     <gml:directedEdge orientation="+" xlink:href="#E1"/> 

32 © Open Geospatial Consortium (2005)
 



OGC 04-100 

     <gml:pointProperty> 
      <gml:Point srsName="EPSG:4329"> 
       <gml:pos>32.8065490722657 44.469596862793 31.2484951019287</gml:pos> 
      </gml:Point> 
     </gml:pointProperty> 
    </gml:Node> 
    <gml:Edge gml:id="E1"> 
     <gml:directedNode orientation="-" xlink:href="#N1"/> 
     <gml:directedNode orientation="+" xlink:href="#N2"/> 
     <gml:curveProperty> 
      <gml:Curve srsName="EPSG:4329"> 
       <gml:segments> 
        <gml:LineStringSegment> 
         <gml:posList>32.8065719604493 44.469554901123 31.2497463226318 
32.8065490722657 44.469596862793 31.2484951019287 </gml:posList> 
        </gml:LineStringSegment> 
       </gml:segments> 
      </gml:Curve> 
     </gml:curveProperty> 
    </gml:Edge> 
   </gml:topoPrimitiveMembers> 
  </gml:TopoComplex> 
 </msds:topoComplex> 
</gml:FeatureCollection> 
 
However, embedding the geometric (and topological) primitives in the XML encoding of 
the feature is probably easier to parse for clients.  

15 Coordinate Reference Systems 

In case of 2D data representations, the coordinate reference system with the EPSG code 
4326 was used (WGS84 geographic). For 3D (or 2.5D) data representations, the 
coordinate reference system with the EPSG code 4329 was used (WGS84 geographic 
with metric heights). 

16 Units of measurements 

The FACC describes the units used by different attributes. The unit descriptions were 
used to map the attribute type to the appropriate base type of GML. For example, length 
values were mapped to gml:LengthType (e.g. the SHC attribute). If no pre-defined type 
in GML was available, the types were mapped to gml:MeasureType (e.g. the LTN 
attribute).  

To support a common encoding of unit references in uom attributes across the different 
Web Feature Servers hosting the data, a units dictionary was specified and hosted on a 
public URL. The units dictionary used is shown in annex B. 

A SHC value would then be encoded for example as 

<nga:shc uom=" http://testschemas.opengis.net/ows2/NGA_FACC_Profile_Units_Dictionary.xml#m">1.3</nga:shc> 
 
Attribute types like LTN play a special role, since their unit is not a typical unit in terms 
of ISO 31 units like metres, seconds, etc. A significant number of units in the FACC are 

© Open Geospatial Consortium (2005) 33
 



OGC 04-100 

unitless count values. The LTN attribute, a count of the number of tracks, is an example. 
It was decided to use gml:MeasureType as the data type for these attributes for the OWS-
2 application schemas since the FACC associates them with a unit. A unit “count” was 
added to the units dictionary for these cases. 

17 Summary 

The approach using an automated, repeatable capability to create/derive the UML and 
GML application schemas proved very helpful for the various iterations until the final 
schemas were fixed and used in the demonstration. 

This process also enhanced the understanding of the details of the schema definitions and 
created very reliable and uniform schemas. Therefore, such an approach for the 
generation of GML Application Schemas which also yielded additional results 

- ISO 19109 UML Application Schemas 

- GML dictionaries for feature type names, attribute type names and coded value 
descriptions 

is highly recommended for application schema developments like the NGA FACC 
Profile and product profiles like VMAP 0/1/2 or TLM which are intended to be a basis 
for a wide range of applications and are relatively stable. 

For mission specific application schema which often have to be developed very quickly 
and without regard to the framework of the NGA FACC Profile, it should be decided on a 
cases by case basis if it is more appropriate to create the application schema manually 
with tools like the Schema Subsetting Tool (actually more a GML Applications Schema 
editor) or any standard XML Schema editor. This will depend on the size of the changes 
relative to the NGA FACC Profile (the fewer the more appropriate is an interactive 
editor) and of the “lifespan” of the schemas (and associated data). 

The approach involving ISO 19109 UML Application Schemas as an intermediate step 
also requires knowledge about the ISO 19100 series and a UML tool which is able to 
export XMI 1.0 (UML 1.3). 

Some remaining issues at the end of initiative are: 

- Some XML Parsers (MSXML and Xerces-J with strict validation) identified issues 
with the use of XML Schema during the TIEs. These issues were previously unnoted 
(Xerces with standard validation does not report any issues, for example) and affect 
also the GML Schema as well as the UML-to-GML-Application-Schema mapping 
rules (currently under review in the ISO 19136 editing process). 

- Software support for several of the more advanced GML capabilities were and are an 
issue. 

34 © Open Geospatial Consortium (2005)
 



OGC 04-100 

- The use of a choice block of GML properties to distinguish the different types of 
spatial properties (geometric primitive, geometric aggregate, topology) as it has been 
used in the encoding should be replaced by a single geometric property whose value 
is a choice of the geometry of topology objects. The current encoding is difficult to 
handle for clients both in parsing the data and in creating queries. 

- See also the associated DIPR discussing findings with respect to the Web Feature 
Service interface. 

© Open Geospatial Consortium (2005) 35
 



OGC 04-100 

Annex A 
(informative) 

 

Rose Script to create the MSDS UML Application Schema 
 

The script requires that the Rose model contains three packages: 

- the “NGA FACC Profile” package  

- an empty package for the profile of the NGA FACC Profile used by the mission 
specific schema (“NGA FACC Profile for MSDS”) 

- an empty package for the changes (restrictions / extensions) relative to the NGA 
FACC Profile by the mission specific schema (“MSDS”) 

In addition, a CSV file is required, documenting the contents of the mission specific use 
of the FACC definitions.  

Const WithThemes As Boolean = true 
Const Product As String = "MSDS" 
Const Char As String = ";" 
 
Function SplitString (ByRef part1 As String, ByRef part2 As String, split As String) As 
Boolean 
 If Len(split)<=Len(part1) Then 
  Pos = InStr(part1, split) 
  If Pos > 0 Then 
   part2 = Right(part1,Len(part1)-Len(split)-Pos+1) 
   part1 = Left(part1,Pos-1) 
  End If 
 Else 
  Pos = 0 
 End If 
 SplitString = (Pos<>0) 
End Function 
 
Function CreateAttribute(theClass As Class, ngaAttribute As Attribute, AttName As String, 
DType As String) As Attribute 
    Dim theAttribute As Attribute 
    Set theAttribute = theClass.AddAttribute(AttName, DType, "") 
 If ngaAttribute Is Not Nothing Then 
     Dim b As Boolean 
     b = theAttribute.OverrideProperty("ShapeChange", "code", 
ngaAttribute.FindProperty("ShapeChange","code").Value) 
     b = theAttribute.OverrideProperty("ShapeChange", "name", 
ngaAttribute.FindProperty("ShapeChange","name").Value)  
  theAttribute.documentation = ngaAttribute.documentation 
 End If 
    theAttribute.ExportControl.Name = "PublicAccess" 
    Set CreateAttribute = theAttribute 
End Function 
 
Function CreateClass(theCategory As Category, ClassName As String, ngaClass As Class) As 
Class 
    Dim theClass As Class 
 Dim ngaAttribute As Attribute 
 Dim theAttribute As Attribute 
 Dim nam As String 
    Set theClass = theCategory.AddClass(ClassName)  

36 © Open Geospatial Consortium (2005)
 



OGC 04-100 

 
    Dim b As Boolean 
    b = theClass.OverrideProperty("ShapeChange", "code", 
ngaClass.FindProperty("ShapeChange","code").Value) 
    b = theClass.OverrideProperty("ShapeChange", "name", 
ngaClass.FindProperty("ShapeChange","name").Value) 
 theClass.documentation = ngaClass.documentation 
    theClass.Persistence = True 
 Set ngaAttribute = Nothing 
 Set theAttribute = CreateAttribute(theClass, ngaAttribute, "spatialRepresentation 
[0..1]", "SpatialCharacteristics") 
 For i = 1 To ngaClass.Attributes.Count 
  Set ngaAttribute = ngaClass.Attributes.GetAt(i) 
  nam = Left(ngaAttribute.name,Len(ngaAttribute.name)-6)+"[0..0]" 
  Set theAttribute = CreateAttribute(theClass, ngaAttribute, nam, 
ngaAttribute.type) 
 Next i 
    Set CreateClass = theClass 
End Function 
 
Function CreateSubClass(theCategory As Category, ClassName As String, ngaClass As Class) 
As Class 
    Dim theClass As Class 
 Dim inhRel As InheritRelation  
 Dim ngaAttribute As Attribute 
 Dim theAttribute As Attribute 
 Dim nam As String 
    Set theClass = theCategory.AddClass(ClassName)  
 
    Dim b As Boolean 
    b = theClass.OverrideProperty("ShapeChange", "code", 
ngaClass.FindProperty("ShapeChange","code").Value) 
    b = theClass.OverrideProperty("ShapeChange", "name", 
ngaClass.FindProperty("ShapeChange","name").Value) 
 theClass.documentation = ngaClass.documentation 
 Set inhRel = theClass.AddInheritRel("", ngaClass.GetQualifiedName()) 
    theClass.Persistence = True 
 If Left(ClassName,1) = "A" Then 
  Set theAttribute = CreateAttribute(theClass, ngaAttribute, 
"spatialRepresentation", "SpatialCharacteristics2D") 
 ElseIf Left(ClassName,1) = "L" Then 
  Set theAttribute = CreateAttribute(theClass, ngaAttribute, 
"spatialRepresentation", "SpatialCharacteristics1D") 
 ElseIf Left(ClassName,1) = "P" Then 
  Set theAttribute = CreateAttribute(theClass, ngaAttribute, 
"spatialRepresentation", "SpatialCharacteristics0D") 
 End If 
    Set CreateSubClass = theClass 
End Function 
 
Function CreateEnumeration(theCategory As Category, ClassName As String) As Class 
    Dim theClass As Class 
    Set theClass = theCategory.AddClass(ClassName) 
    theClass.Stereotype = "Enumeration" 
    Set CreateEnumeration = theClass 
End Function 
 
Function CreateEnum(theClass As Class, ngaClass As Class, InitVal As String) As Attribute 
    Dim theAttribute As Attribute 
    Dim ngaAttribute As Attribute 
 Set theAttribute = Nothing 
 For i% = 1 To theClass.Attributes.Count 
  Set theAttribute = theClass.Attributes.GetAt(i) 
  If theAttribute.InitValue = InitVal Then 
      Set CreateEnum = theAttribute 
   Exit Function 
  End If 
 Next i% 
 Dim b As Boolean 
 b = false 
 For i% = 1 To ngaClass.Attributes.Count 

© Open Geospatial Consortium (2005) 37
 



OGC 04-100 

  Set ngaAttribute = ngaClass.Attributes.GetAt(i) 
  If ngaAttribute.InitValue = InitVal Then 
      Set theAttribute = theClass.AddAttribute(ngaAttribute.name, "", InitVal) 
   b = true 
   Exit For 
  End If 
 Next i% 
 If Not b Then 
     Set theAttribute = theClass.AddAttribute(InitVal, "", InitVal) 
  Print theClass.name+" - "+InitVal+" not found" 
 End If 
 If theAttribute Is Not Nothing Then 
     theAttribute.ExportControl.Name = "PublicAccess" 
 End If 
    Set CreateEnum = theAttribute 
End Function 
 
Sub LoadProfile(ngaPackage As Category, ngaProfPackage As Category, prodPackage As 
Category, prod As String) 
 
 Dim s0 As String 
 Dim s1 As String 
 Dim s2 As String 
 Dim s3 As String 
 Dim s4 As String 
 Dim s1x As String 
 Dim s1alp As String 
 Dim b As Boolean 
 Dim i As Integer 
 Dim s0x As String 
 
 Dim theClass As Class 
 Dim ngaProfClass As Class 
 Dim ngaClass As Class 
 Dim theAttribute As Attribute 
 Dim ngaAttribute As Attribute 
 Dim theEnum As Class 
 Dim ngaEnum As Class 
 Dim theCode As Attribute 
 
 Dim Themes() As String 
 Dim FeatureTypes() As String 
 Dim idx As Integer 
 
 Do While Not EOF(1)  
  Line Input #1, zeile$ 
  s0 = zeile$ 
  s1 = "" 
  s2 = "" 
  s3 = "" 
  s4 = "" 
  If SplitString(s0,s1,Char) Then  
   If SplitString(s1,s2,Char) Then  
    If SplitString(s2,s3,Char) Then 
     b = SplitString(s3,s4,Char)  
    End If 
   End If 
  End If 
  s0 = trim(s0) 
  s1 = trim(s1) 
  s2 = trim(s2) 
  s3 = trim(s3) 
  s4 = trim(s4) 
  Print s0+"|"+s1+"|"+s2+"|"+s3+"|"+s4 
 
  s1x = Right(s1,5) 
  s1alp = Left(s1,1) 
 
  i = ngaPackage.GetAllClasses.FindFirst(s1x) 
  If i>0 Then 
   Set ngaClass = ngaPackage.GetAllClasses.GetAt(i) 

38 © Open Geospatial Consortium (2005)
 



OGC 04-100 

  Else  
   Print s1x+" not found" 
   s1 = "" 
   s2 = "" 
   s3 = "" 
  End If 
 
  Set theClass = Nothing 
  i = prodPackage.GetAllClasses.FindFirst(s1) 
  If i>0 Then 
   Set theClass = prodPackage.GetAllClasses.GetAt(i%) 
   Set ngaProfClass = 
ngaProfPackage.GetAllClasses.GetAt(ngaProfPackage.GetAllClasses.FindFirst(s1x)) 
  Else 
   i = ngaProfPackage.GetAllClasses.FindFirst(s1x) 
   If i>0 Then 
    Set ngaProfClass = ngaProfPackage.GetAllClasses.GetAt(i) 
   Else 
    Set ngaProfClass = CreateClass(ngaProfPackage, s1x, ngaClass) 
   End If 
   Set theClass = CreateSubClass(prodPackage, s1, ngaProfClass) 
   Set ngaAttribute = Nothing 
   If WithThemes Then 
    Do While s0<>"" 
     b = SplitString(s0,s0x,"/") 
     s0 = trim(s0) 
 
     idx = -1 
     If arraydims(Themes) = 0 Then 
      ReDim Themes( 0 ) 
      ReDim FeatureTypes( 0 ) 
      Themes(0) = s0 
      FeatureTypes( 0 ) = theClass.name+";" 
     Else 
      For i = 0 To Ubound(Themes) 
       If Themes(i) = s0 Then 
        idx = i 
        Exit For 
       End If 
      Next i 
      If idx = -1 Then 
       idx = Ubound(Themes)+1 
       ReDim Preserve Themes( idx ) 
       ReDim Preserve FeatureTypes( idx ) 
       Themes(idx) = s0 
       FeatureTypes( idx ) = theClass.name+";" 
      Else 
       FeatureTypes( idx ) = FeatureTypes( idx )+theClass.name+";" 
      End If 
     End If 
     If b Then 
      s0 = trim(s0x) 
     Else 
      s0 = "" 
     End If 
    Loop 
   End If 
  End If 
 
  If s2 <> "" And ngaProfClass Is Not Nothing Then 
 
   Set theAttribute = Nothing 
   i = ngaProfClass.Attributes.FindFirst(LCase$(s2)+" [0..0]") 
   If i>0 Then 
    Set theAttribute = ngaProfClass.Attributes.GetAt(i) 
    theAttribute.name = Left(theAttribute.name,Len(theAttribute.name)-
6)+"[0..1]" 
   Else 
    i = ngaProfClass.Attributes.FindFirst(LCase$(s2)+" [0..1]") 
    If i>0 Then 
     Set theAttribute = ngaProfClass.Attributes.GetAt(i) 

© Open Geospatial Consortium (2005) 39
 



OGC 04-100 

    Else 
     Dim origAttribute As Attribute 
     For j = 1 To ngaPackage.GetAllClasses.Count 
      Dim tmpClass As Class 
      Set tmpClass = ngaPackage.GetAllClasses.GetAt(j) 
      For k = 1 To tmpClass.Attributes.Count 
       Set origAttribute = tmpClass.Attributes.GetAt(k) 
       If origAttribute.name = LCase$(s2)+" [0..1]" Then 
        Set theAttribute = CreateAttribute(theClass, 
origAttribute, origAttribute.name, origAttribute.type) 
        Exit For 
       End If 
      Next k 
      If theAttribute Is Not Nothing Then 
       Exit For 
      End If  
     Next j 
     If theAttribute Is Nothing Then 
      Set origAttribute = Nothing 
      Set theAttribute = CreateAttribute(theClass, origAttribute, 
LCase$(s2)+" [0..1]", "Unknown") 
     End If 
    End If 
   End If 
 
   If s3 <> "" Then 
    i = ngaProfPackage.GetAllClasses.FindFirst(s1x+"_"+s2+"_"+Product) 
    If i>0 Then 
     Set theEnum = ngaProfPackage.GetAllClasses.GetAt(i%) 
    Else 
     Set theEnum = CreateEnumeration(ngaProfPackage, 
s1x+"_"+s2+"_"+Product) 
     theAttribute.type = theEnum.GetQualifiedName() 
    End If 
 
    i = ngaPackage.GetAllClasses.FindFirst(s1x+"_"+s2) 
    If i>0 Then 
     Set ngaEnum = ngaPackage.GetAllClasses.GetAt(i%) 
     Set theCode = CreateEnum(theEnum, ngaEnum, s3) 
    Else 
     Print ">>> "+s1+"_"+s2+" not found" 
    End If 
   End If 
  End If 
 Loop 
 
 Dim cc As New ClassCollection 
 For i = 1 To ngaProfPackage.GetAllClasses.Count 
  Set theClass = ngaProfPackage.GetAllClasses.GetAt(i) 
 
  For j = 1 To theClass.Attributes.Count 
   Set theAttribute = theClass.Attributes.GetAt(j) 
   If Right(theAttribute.name,6) <> "[0..0]" Then 
    k = ngaPackage.GetAllClasses.FindFirst(theAttribute.type) 
    If k > 0 Then 
     cc.Add ngaPackage.GetAllClasses.GetAt(k) 
    End If 
   End If 
  Next j 
 Next i 
 For i = 1 To cc.Count 
  Print ">>> "+cc.GetAt(i).name 
  ngaProfPackage.RelocateClass cc.GetAt(i) 
 Next i 
 
 For i = 1 To ngaProfPackage.GetAllClasses.Count 
  Set theClass = ngaProfPackage.GetAllClasses.GetAt(i) 
 
  Dim notDone As Boolean 
  notDone = false 
  If theClass.stereotype = "" Then 

40 © Open Geospatial Consortium (2005)
 



OGC 04-100 

   notDone = true 
  End If 
  While notDone 
   notDone = false 
   For j = 1 To theClass.Attributes.Count 
    Set theAttribute = theClass.Attributes.GetAt(j) 
    If Right(theAttribute.name,6) = "[0..0]" Then 
     b = theClass.DeleteAttribute(theAttribute) 
     notDone = true 
     Exit For 
    End If  
   Next j 
  Wend 
 Next i 
 
 Open "C:\NGA_Profile\"+Product+"Themes.xsd" For Output As #2 
 
 Dim ns As String 
 ns = LCase$(Product)+":" 
 
 Print #2, "<?xml version=""1.0"" encoding=""UTF-8""?>" 
    Print #2, "<schema targetNamespace=""http://www.opengis.net/ows-
2/nga/"+LCase$(Product)+"""" 
 Print #2, " xmlns=""http://www.w3.org/2001/XMLSchema"" 
xmlns:gml=""http://www.opengis.net/gml""" 
 Print #2, " xmlns:"+LCase$(Product)+"=""http://www.opengis.net/ows-
2/nga/"+LCase$(Product)+""""  
 Print #2, " xmlns:nga=""http://www.opengis.net/ows-2/nga"">"  
 Print #2, " <include schemaLocation="""+Product+".xsd""/>" 
 Print #2, " <import namespace=""http://www.opengis.net/gml"" 
schemaLocation=""base/gml3.xsd""/>" 
 For i = 0 To Ubound(Themes) 
  Print #2, "<element name=""Theme"+Themes(i)+""" 
substitutionGroup=""gml:_FeatureCollection"">" 
  Print #2, " <complexType>" 
  Print #2, "  <annotation>" 
  Print #2, "   <documentation>Feature Collection for Theme 
"+Themes(i)+"</documentation>" 
  Print #2, "  </annotation>" 
  Print #2, "  <complexContent>" 
  Print #2, "   <restriction base=""gml:AbstractFeatureCollectionType"">" 
  Print #2, "    <sequence>" 
  Print #2, "     <group ref=""gml:StandardObjectProperties""/>" 
  Print #2, "     <element ref=""gml:boundedBy"" minOccurs=""0""/>" 
  Print #2, "     <element ref="""+ns+"themeMember"+Themes(i)+""" minOccurs=""0"" 
maxOccurs=""unbounded""/>" 
  Print #2, "    </sequence>" 
  Print #2, "   </restriction>" 
  Print #2, "  </complexContent>" 
  Print #2, " </complexType>" 
  Print #2, "</element>" 
  Print #2, "<element name=""themeMember"+Themes(i)+""" 
substitutionGroup=""gml:featureMember"">" 
  Print #2, " <complexType>" 
  Print #2, "  <complexContent>" 
  Print #2, "   <restriction base=""gml:FeaturePropertyType"">" 
  Print #2, "    <sequence>" 
  Print #2, "     <choice minOccurs=""0"">" 
  s0 = FeatureTypes(i) 
  Do While s0 <> "" 
   b = SplitString(s0,s0x,";") 
   Print #2, "      <element ref="""+ns+trim(s0)+"""/>" 
   If b Then 
    s0 = trim(s0x) 
   Else 
    s0 = "" 
   End If 
  Loop 
  Print #2, "     </choice>" 
  Print #2, "    </sequence>" 
  Print #2, "    <attributeGroup ref=""gml:AssociationAttributeGroup""/>" 

© Open Geospatial Consortium (2005) 41
 



OGC 04-100 

  Print #2, "   </restriction>" 
  Print #2, "  </complexContent>" 
  Print #2, " </complexType>" 
  Print #2, "</element>" 
 Next i 
 Print #2, "</schema>" 
 Close #2 
 
End Sub 
 
Sub Main 
 Dim ngaPackage As Category 
 Dim ngaProfPackage As Category 
 Dim prodPackage As Category 
 Set ngaPackage = 
RoseApp.CurrentModel.GetAllCategories().GetAt(RoseApp.CurrentModel.GetAllCategories().Fin
dFirst("NGA FACC Profile")) 
 Set ngaProfPackage = 
RoseApp.CurrentModel.GetAllCategories().GetAt(RoseApp.CurrentModel.GetAllCategories().Fin
dFirst("NGA FACC Profile for "+Product))  
 Set prodPackage = 
RoseApp.CurrentModel.GetAllCategories().GetAt(RoseApp.CurrentModel.GetAllCategories().Fin
dFirst(Product))  
 FileName$ = OpenFilename$ ("CSV", "File:*.csv") 
 If FileName$ <> "" Then  
  Viewport.Open 
  Open FileName$ For Input As #1 
  Set ClassesProcessed = New ClassCollection 
  Call LoadProfile(ngaPackage,ngaProfPackage,prodPackage,Product) 
  Close #1 
  Print "Loading finished ..." 
 End If 
End Sub 

42 © Open Geospatial Consortium (2005)
 



OGC 04-100 

Annex B 
(informative) 

 

Units Dictionary 
 

The script requires that the Rose model contains three packages: 

<Dictionary xmlns="http://www.opengis.net/gml" xmlns:gml="http://www.opengis.net/gml" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xlink="http://www.w3.org/1999/xlink" 
xsi:schemaLocation="http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.0/base/gml.xsd" 
gml:id="UnitsDictionary"> 
 <description>A dictionary of units of measure for the NGA FACC Profile for OWS-2.</description> 
 <name>NGA FACC Profile Units Dictionary</name> 
 <dictionaryEntry> 
  <DefinitionCollection gml:id="SIBaseUnits"> 
   <description>The Base Units from the SI units system.</description> 
   <name>SI Base Units</name> 
   <dictionaryEntry> 
    <BaseUnit gml:id="m"> 
     <description>The metre is the length of the path travelled by light in vacuum during a time 
interval of 1/299 792 458 of a second.</description> 
     <name codeSpace="http://www.bipm.fr/en/si">metre</name> 
     <name>meter</name> 
     <quantityType>length</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">m</catalogSymbol> 
     <unitsSystem xlink:href="http://www.bipm.fr/en/si"/> 
    </BaseUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <BaseUnit gml:id="kg"> 
     <description>The kilogram is the unit of mass; it is equal to the mass of the international 
prototype of the kilogram. </description> 
     <name codeSpace="http://www.bipm.fr/en/si">kilogram</name> 
     <quantityType>Mass</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">kg</catalogSymbol> 
     <unitsSystem xlink:href="http://www.bipm.fr/en/si"/> 
    </BaseUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <BaseUnit gml:id="s"> 
     <description>The second is the duration of 9 192 631 770 periods of the radiation 
corresponding to the transition between the two hyperfine levels of the ground state of the caesium 133 
atom.</description> 
     <name codeSpace="http://www.bipm.fr/en/si">second</name> 
     <quantityType>Time</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">s</catalogSymbol> 
     <unitsSystem xlink:href="http://www.bipm.fr/en/si"/> 
    </BaseUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <BaseUnit gml:id="A"> 
     <description>The ampere is that constant current which, if maintained in two straight parallel 
conductors of infinite length, of negligible circular cross-section, and placed 1 metre apart in vacuum, would 
produce between these conductors a force equal to 2 × 10-7 newton per metre of length. 
</description> 
     <name codeSpace="http://www.bipm.fr/en/si">Ampere</name> 
     <quantityType>Electric current</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">A</catalogSymbol> 
     <unitsSystem xlink:href="http://www.bipm.fr/en/si"/> 

© Open Geospatial Consortium (2005) 43
 



OGC 04-100 

    </BaseUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <BaseUnit gml:id="K"> 
     <description>The kelvin, unit of thermodynamic temperature, is the fraction 1/273.16 of the 
thermodynamic temperature of the triple point of water.</description> 
     <name codeSpace="http://www.bipm.fr/en/si">kelvin</name> 
     <quantityType>Thermodynamic temperature</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">K</catalogSymbol> 
     <unitsSystem xlink:href="http://www.bipm.fr/en/si"/> 
    </BaseUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <BaseUnit gml:id="mol"> 
     <description>1. The mole is the amount of substance of a system which contains as many 
elementary entities as there are atoms in 0.012 kilogram of carbon 12.  
2. When the mole is used, the elementary entities shall be specified and may be atoms, molecules, ions, electrons, 
other particles, or specified groups of such particles. </description> 
     <name codeSpace="http://www.bipm.fr/en/si">mole</name> 
     <quantityType>Amount of substance</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">mol</catalogSymbol> 
     <unitsSystem xlink:href="http://www.bipm.fr/en/si"/> 
    </BaseUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <BaseUnit gml:id="cd"> 
     <description> The candela is the luminous intensity, in a given direction, of a source that emits 
monochromatic radiation of frequency 540 × 1012 hertz and that has a radiant intensity in that direction of 1/683 
watt per steradian.</description> 
     <name codeSpace="http://www.bipm.fr/en/si">candela</name> 
     <quantityType>Luminous intensity</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">cd</catalogSymbol> 
     <unitsSystem xlink:href="http://www.bipm.fr/en/si"/> 
    </BaseUnit> 
   </dictionaryEntry> 
  </DefinitionCollection> 
 </dictionaryEntry> 
 <dictionaryEntry> 
  <DefinitionCollection gml:id="SIDerivedUnits"> 
   <description>The Derived Units from the SI units system. These are all derived as a product of SI 
Base Units, except degrees Celsius in which the conversion formaula to the SI Base Unit (kelvin) involves an 
offset.</description> 
   <name>SI Derived Units</name> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="rad"> 
     <name codeSpace="http://www.bipm.fr/en/si"> radian</name> 
     <quantityType>plane angle</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">rad</catalogSymbol> 
     <derivationUnitTerm uom="#m" exponent="1"/> 
     <derivationUnitTerm uom="#m" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="sr"> 
     <name codeSpace="http://www.bipm.fr/en/si">steradian</name> 
     <quantityType>solid angle</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">sr</catalogSymbol> 
     <derivationUnitTerm uom="#m" exponent="2"/> 
     <derivationUnitTerm uom="#m" exponent="-2"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="Hz"> 
     <name codeSpace="http://www.bipm.fr/en/si">hertz</name> 
     <quantityType>frequency</quantityType> 

44 © Open Geospatial Consortium (2005)
 



OGC 04-100 

     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">Hz</catalogSymbol> 
     <derivationUnitTerm uom="#s" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="N"> 
     <name codeSpace="http://www.bipm.fr/en/si">newton</name> 
     <quantityType>force</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">N</catalogSymbol> 
     <derivationUnitTerm uom="#m" exponent="1"/> 
     <derivationUnitTerm uom="#kg" exponent="1"/> 
     <derivationUnitTerm uom="#s" exponent="-2"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="Pa"> 
     <name codeSpace="http://www.bipm.fr/en/si">pascal</name> 
     <quantityType>pressure, stress</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">Pa</catalogSymbol> 
     <derivationUnitTerm uom="#N" exponent="1"/> 
     <derivationUnitTerm uom="#m" exponent="-2"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="J"> 
     <name codeSpace="http://www.bipm.fr/en/si">joule</name> 
     <quantityType>energy, work, quantity of heat</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">J</catalogSymbol> 
     <derivationUnitTerm uom="#N" exponent="1"/> 
     <derivationUnitTerm uom="#m" exponent="1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="W"> 
     <name codeSpace="http://www.bipm.fr/en/si">watt</name> 
     <quantityType>power, radiant flux</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">W</catalogSymbol> 
     <derivationUnitTerm uom="#J" exponent="1"/> 
     <derivationUnitTerm uom="#s" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="C"> 
     <name codeSpace="http://www.bipm.fr/en/si">coulomb</name> 
     <quantityType>electric charge, quantity of electricity</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">C</catalogSymbol> 
     <derivationUnitTerm uom="#s" exponent="1"/> 
     <derivationUnitTerm uom="#A" exponent="1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="V"> 
     <name codeSpace="http://www.bipm.fr/en/si">volt</name> 
     <quantityType>electric potential difference, electromotive force</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">V</catalogSymbol> 
     <derivationUnitTerm uom="#W" exponent="1"/> 
     <derivationUnitTerm uom="#A" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="F"> 
     <name codeSpace="http://www.bipm.fr/en/si">farad</name> 
     <quantityType>capacitance</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">F</catalogSymbol> 
     <derivationUnitTerm uom="#C" exponent="1"/> 

© Open Geospatial Consortium (2005) 45
 



OGC 04-100 

     <derivationUnitTerm uom="#V" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="ohm"> 
     <name codeSpace="http://www.bipm.fr/en/si">ohm</name> 
     <quantityType>electric resistance</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">Ω</catalogSymbol> 
     <derivationUnitTerm uom="#V" exponent="1"/> 
     <derivationUnitTerm uom="#A" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="S"> 
     <name codeSpace="http://www.bipm.fr/en/si">siemens</name> 
     <quantityType>electric conductance</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">S</catalogSymbol> 
     <derivationUnitTerm uom="#A" exponent="1"/> 
     <derivationUnitTerm uom="#V" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="Wb"> 
     <name codeSpace="http://www.bipm.fr/en/si">weber</name> 
     <quantityType>magnetic flux</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">Wb</catalogSymbol> 
     <derivationUnitTerm uom="#V" exponent="1"/> 
     <derivationUnitTerm uom="#s" exponent="1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="T"> 
     <name codeSpace="http://www.bipm.fr/en/si">tesla</name> 
     <quantityType>magnetic flux density</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">T</catalogSymbol> 
     <derivationUnitTerm uom="#Wb" exponent="1"/> 
     <derivationUnitTerm uom="#m" exponent="-2"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="H"> 
     <name codeSpace="http://www.bipm.fr/en/si">henry</name> 
     <quantityType>inductance</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">H</catalogSymbol> 
     <derivationUnitTerm uom="#Wb" exponent="1"/> 
     <derivationUnitTerm uom="#A" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="degC"> 
     <name codeSpace="http://www.bipm.fr/en/si">degree Celsius</name> 
     <quantityType>Celsius temperature</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">°C</catalogSymbol> 
     <conversionToPreferredUnit uom="#K"> 
      <formula> 
       <a>273.16</a> 
       <b>1</b> 
       <c>1</c> 
      </formula> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="lm"> 
     <name codeSpace="http://www.bipm.fr/en/si">lumen</name> 

46 © Open Geospatial Consortium (2005)
 



OGC 04-100 

     <quantityType>luminous flux</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">lm</catalogSymbol> 
     <derivationUnitTerm uom="#cd" exponent="1"/> 
     <derivationUnitTerm uom="#sr" exponent="1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="lx"> 
     <name codeSpace="http://www.bipm.fr/en/si">lux</name> 
     <quantityType>illuminance</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">lx</catalogSymbol> 
     <derivationUnitTerm uom="#lm" exponent="1"/> 
     <derivationUnitTerm uom="#m" exponent="-2"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="Bq"> 
     <name codeSpace="http://www.bipm.fr/en/si">becquerel</name> 
     <quantityType>activity (referred to a radionuclide)</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">Bq</catalogSymbol> 
     <derivationUnitTerm uom="#s" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="Gy"> 
     <name codeSpace="http://www.bipm.fr/en/si">gray</name> 
     <quantityType>absorbed dose, specific energy (imparted), kerma</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">Gy</catalogSymbol> 
     <derivationUnitTerm uom="#J" exponent="1"/> 
     <derivationUnitTerm uom="#kg" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="Sv"> 
     <name codeSpace="http://www.bipm.fr/en/si">sievert</name> 
     <quantityType>dose equivalent, ambient dose equivalent, directional dose equivalent, 
personal dose equivalent, organ equivalent dose</quantityType> 
     <catalogSymbol codeSpace="http://www.bipm.fr/en/si">Sv</catalogSymbol> 
     <derivationUnitTerm uom="#J" exponent="1"/> 
     <derivationUnitTerm uom="#kg" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="m2"> 
     <name>square metre</name> 
     <quantityType>Area</quantityType> 
     <catalogSymbol>m²</catalogSymbol> 
     <derivationUnitTerm uom="#m" exponent="2"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="m3"> 
     <name>cubic metre</name> 
     <quantityType>Volume</quantityType> 
     <catalogSymbol>m³</catalogSymbol> 
     <derivationUnitTerm uom="#m" exponent="3"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="mps"> 
     <name>metres per second</name> 
     <quantityType>speed</quantityType> 
     <catalogSymbol>m/s</catalogSymbol> 
     <derivationUnitTerm uom="#m" exponent="1"/> 
     <derivationUnitTerm uom="#s" exponent="-1"/> 

© Open Geospatial Consortium (2005) 47
 



OGC 04-100 

    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="kmh"> 
     <name>kilometres per hour</name> 
     <quantityType>speed</quantityType> 
     <catalogSymbol>km/h</catalogSymbol> 
     <derivationUnitTerm uom="#km" exponent="1"/> 
     <derivationUnitTerm uom="#h" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="knot"> 
     <name>knot</name> 
     <quantityType>speed</quantityType> 
     <catalogSymbol>knot</catalogSymbol> 
     <derivationUnitTerm uom="#nauticalMile" exponent="1"/> 
     <derivationUnitTerm uom="#h" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="mph"> 
     <name>miles per hour</name> 
     <quantityType>speed</quantityType> 
     <catalogSymbol>mph</catalogSymbol> 
     <derivationUnitTerm uom="#mile" exponent="1"/> 
     <derivationUnitTerm uom="#h" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="m3ph"> 
     <name>cubicmetre per hour</name> 
     <quantityType>volume per time unit</quantityType> 
     <catalogSymbol>m³/h</catalogSymbol> 
     <derivationUnitTerm uom="#mile" exponent="1"/> 
     <derivationUnitTerm uom="#h" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="kgpm3"> 
     <name>kilogram per cubicmetre</name> 
     <quantityType>density</quantityType> 
     <catalogSymbol>kg/m³</catalogSymbol> 
     <derivationUnitTerm uom="#kg" exponent="1"/> 
     <derivationUnitTerm uom="#m3" exponent="-1"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <DerivedUnit gml:id="km_2"> 
     <name>count per square kilometre</name> 
     <quantityType>density per area</quantityType> 
     <catalogSymbol>1/km²</catalogSymbol> 
     <derivationUnitTerm uom="#km" exponent="-2"/> 
    </DerivedUnit> 
   </dictionaryEntry> 
  </DefinitionCollection> 
 </dictionaryEntry> 
 <dictionaryEntry> 
  <DefinitionCollection gml:id="ConventionalUnitsDictionary"> 
   <description>A collection of Conventional Units.  These are units of measure which are either widely 
used or important within a specific community.  For most of these there is  
1. a known derivation from more primitive units, which may or may not be SI Base Units, or  
2. a known conversion to a preferred unit, which may or may not be an SI Base or Derived unit, through rescaling 
and offset,  
or both.  </description> 

48 © Open Geospatial Consortium (2005)
 



OGC 04-100 

   <name>Conventional units.</name> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="GHz"> 
     <name>GigaHertz</name> 
     <quantityType>frequency</quantityType> 
     <catalogSymbol>GHz</catalogSymbol> 
     <conversionToPreferredUnit uom="#Hz"> 
      <factor>1.e9</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="MHz"> 
     <name>MegaHertz</name> 
     <quantityType>frequency</quantityType> 
     <catalogSymbol>MHz</catalogSymbol> 
     <conversionToPreferredUnit uom="#Hz"> 
      <factor>1.e6</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="kHz"> 
     <name>KiloHertz</name> 
     <quantityType>frequency</quantityType> 
     <catalogSymbol>kHz</catalogSymbol> 
     <conversionToPreferredUnit uom="#Hz"> 
      <factor>1.e3</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="t"> 
     <name>Tons</name> 
     <quantityType>weight</quantityType> 
     <catalogSymbol>t</catalogSymbol> 
     <conversionToPreferredUnit uom="#kg"> 
      <factor>1.e3</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="cm"> 
     <name>centimetre</name> 
     <quantityType>length</quantityType> 
     <catalogSymbol>cm</catalogSymbol> 
     <conversionToPreferredUnit uom="#m"> 
      <factor>0.01</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="dm"> 
     <name>decimetre</name> 
     <quantityType>length</quantityType> 
     <catalogSymbol>dm</catalogSymbol> 
     <conversionToPreferredUnit uom="#m"> 
      <factor>0.1</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="km"> 
     <name>kilometre</name> 
     <quantityType>length</quantityType> 

© Open Geospatial Consortium (2005) 49
 



OGC 04-100 

     <catalogSymbol>km</catalogSymbol> 
     <conversionToPreferredUnit uom="#m"> 
      <factor>1.e3</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="mile"> 
     <name>mile</name> 
     <quantityType>length</quantityType> 
     <catalogSymbol>mile</catalogSymbol> 
     <conversionToPreferredUnit uom="#ft"> 
      <factor>5280</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="ft"> 
     <name>foot</name> 
     <quantityType>length</quantityType> 
     <catalogSymbol>ft</catalogSymbol> 
     <conversionToPreferredUnit uom="#m"> 
      <factor>0.3048</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="nauticalMile"> 
     <name>nautical mile</name> 
     <quantityType>length</quantityType> 
     <catalogSymbol>nauticalMile</catalogSymbol> 
     <conversionToPreferredUnit uom="#m"> 
      <factor>1852</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="min"> 
     <name>minute</name> 
     <quantityType>time</quantityType> 
     <catalogSymbol>min</catalogSymbol> 
     <conversionToPreferredUnit uom="#s"> 
      <factor>60</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="h"> 
     <name>hour</name> 
     <quantityType>time</quantityType> 
     <catalogSymbol>h</catalogSymbol> 
     <conversionToPreferredUnit uom="#s"> 
      <factor>3600</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="deg"> 
     <name>degree</name> 
     <quantityType>angle</quantityType> 
     <conversionToPreferredUnit uom="#rad"> 
      <factor>1.74532925199433E-02</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 

50 © Open Geospatial Consortium (2005)
 



OGC 04-100 

   <dictionaryEntry> 
    <ConventionalUnit gml:id="l"> 
     <name>litre</name> 
     <quantityType>Volume</quantityType> 
     <conversionToPreferredUnit uom="#m3"> 
      <factor>0.001</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="ha"> 
     <name>hectare</name> 
     <quantityType>Area</quantityType> 
     <conversionToPreferredUnit uom="#m2"> 
      <factor>1.e4</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="gal"> 
     <name>US Gallons</name> 
     <quantityType>Volume</quantityType> 
     <catalogSymbol>gal</catalogSymbol> 
     <conversionToPreferredUnit uom="#l"> 
      <factor>3.785412</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="kV"> 
     <name>Kilo Volt</name> 
     <quantityType>electric potential difference, electromotive force</quantityType> 
     <catalogSymbol>kV</catalogSymbol> 
     <conversionToPreferredUnit uom="#V"> 
      <factor>1.e3</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="MW"> 
     <name>Mega Watt</name> 
     <quantityType>power, radiant flux</quantityType> 
     <catalogSymbol>MW</catalogSymbol> 
     <conversionToPreferredUnit uom="#W"> 
      <factor>1.e6</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="kip"> 
     <name>kilopound</name> 
     <quantityType>force</quantityType> 
     <catalogSymbol>kip</catalogSymbol> 
     <conversionToPreferredUnit uom="#N"> 
      <factor>4.4482e3</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
  </DefinitionCollection> 
 </dictionaryEntry> 
 <dictionaryEntry> 
  <DefinitionCollection gml:id="UnitlessUnits"> 
   <description>A collection of unitless units.</description> 
   <name>unitless units</name> 
   <dictionaryEntry> 

© Open Geospatial Consortium (2005) 51
 



OGC 04-100 

52 © Open Geospatial Consortium (2005)
 

    <BaseUnit gml:id="unity"> 
     <name>unitless</name> 
     <quantityType>scale factor</quantityType> 
     <unitsSystem xlink:href="http://www.opengis.net/ows-2/nga"/> 
    </BaseUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="percent"> 
     <name>percent</name> 
     <quantityType>scale factor</quantityType> 
     <catalogSymbol>%</catalogSymbol> 
     <conversionToPreferredUnit uom="#unity"> 
      <factor>0.01</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
   <dictionaryEntry> 
    <ConventionalUnit gml:id="count"> 
     <name>count</name> 
     <quantityType>scale factor</quantityType> 
     <catalogSymbol/> 
     <conversionToPreferredUnit uom="#unity"> 
      <factor>1</factor> 
     </conversionToPreferredUnit> 
    </ConventionalUnit> 
   </dictionaryEntry> 
  </DefinitionCollection> 
 </dictionaryEntry> 
</Dictionary> 
 
 


	1Scope
	Conformance
	3Normative references
	4Terms and definitions
	Conventions
	Symbols (and abbreviated terms)
	UML Notation

	Overview
	Application Schema for the NGA FACC Profile
	UML Application Schema
	GML Application Schema

	GML Profile for the NGA FACC Profile
	Application Schema for NGA Product Profiles (VMAP levels 0-2, TLM)
	UML Appliation Schema
	GML Application Schema

	MSDS Application Schema
	UML Application Schema
	GML Application Schema

	Discussion of GML Level 0 and the NGA Application Schemas
	Temporal Topology
	Complex Features
	Using a Topology Complex
	Coordinate Reference Systems
	Units of measurements
	Summary

