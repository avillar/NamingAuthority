
csw-ebrim-part3/csw-ebrim-ats.html


Reference number of document: OGC 08-103r2

Version: 1.0.1


CSW-ebRIM Registry Service – Part 3: Abstract Test Suite


R. Martell

EditorÂ Galdos Systems, Inc.

<rmartell {AT} galdosinc {DOT} com>
J. Parr-Pearson

Galdos Systems, Inc.

<jparrpearson {AT} galdosinc {DOT} com>


Copyright (c) 2009 Open Geospatial Consortium, Inc. All Rights Reserved.




	License Agreement


		Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below,
		to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property
		without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish,
		distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to
		do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual
		Property is furnished agrees to the terms of this Agreement.


		If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above
		copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR.


		THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS
		THAT MAY BE IN FORCE ANYWHERE IN THE WORLD.		


		THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
		INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
		PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED
		IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL
		MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE
		UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT
		THE USERâ€™S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF
		INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY
		DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING
		FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF
		CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH
		THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY.


		This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all
		copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as
		provided in the following sentence, no such termination of this license shall require the termination of any third party end-user
		sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual
		Property, or the operation of the Intellectual Property, infringe, or in LICENSORâ€™s sole opinion be likely to infringe, any patent,
		copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license
		without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or
		cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party.
		Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual
		Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without
		prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may
		authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any
		LICENSOR standards or specifications.


		This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United
		Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this
		Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable,
		and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be
		construed to be a waiver of any rights or remedies available to it.


		None of the Intellectual Property or underlying information or technology may be downloaded or otherwise exported or reexported in
		violation of U.S. export laws and regulations. In addition, you are responsible for complying with any local laws in your jurisdiction
		which may impact your right to import, export or use the Intellectual Property, and you represent that you have complied with any
		regulations or registration procedures required by applicable law to make this license enforceable


	
	
	
	
	
			Revision History

		Revision 1.0.1-rc2		2008-11-07

		Corrections and additions to cover missing test requirements.

		Revision 1.0.1-rc1		2008-08-15

		Includes test cases covering Part 1 (OGC 07-110r4) and Part 2
      (OGC 07-144r4) of the CSW-ebRIM 1.0.1 profile.





Overview

This document is an abstract test suite (ATS): a compendium of abstract
    test cases pertaining to implementations of the CSW-ebRIM 1.0 catalogue
    profile. It provides a basis for developing an executable test suite (ETS)
    to verify that the implementation under test (IUT) conforms to all relevant
    functional specifications. While passing all of the conformance tests defined
    in this ATS provides some assurance of overall functional correctness, it
    cannot guarantee that an implementation is faultless.

The test cases are based on requirements gleaned from the complete set
    of relevant specifications (see FigureÂ 1, “CSW-ebRIM 1.0  – Relevant specifications”, where
    each specification is depicted as a UML package.


      

FigureÂ 1.Â CSW-ebRIM 1.0  – Relevant specifications






    

Three conformance levels are defined:
    

		Level 0 - focuses on generic behaviour common
        to all CSW-based catalogue services.



		Level 1 - as for Level 0, plus test cases
        covering search and retrieval capabilities predicated on the ebRIM 3.0
        info set; a minimally conforming implementation must pass all applicable
        tests at this level.



		Level 2 - as for Level 1, plus test cases for
        managing registry content using Harvest and Transaction requests (at
        least one of which must be implemented to conform at this level);







    

In this document the prefix "wrs" designates the namespace having the
    name "http://www.opengis.net/cat/wrs/1.0". Any precondition stipulated for
    a test case that takes the form of an XPath expression pertains to the content
    of the service capabilities document.



Source documents

		
      
      CSW-ebRIM Registry Service - Part 1: ebRIM profile of CSW (OGC 07-110r4)
    

		
      
      CSW-ebRIM Registry Service - Part 2: Basic extension package (OGC 07-144r4)
    

		
      
      OpenGISÂ® Catalogue Services Specification, Version 2.0.2 (OGC 07-006r1)
    

		
      
      ebXML Registry Information Model Version 3.0 (OASIS Standard, 2 May 2005)
    

		
      
      OpenGISÂ® Web Services Common Specification, Version 1.0 (OGC 05-008)
    

		
      
      OpenGISÂ® Filter Encoding Implementation Specification, Version 1.1 (OGC 04-095)
    

		
      
      OpenGISÂ® Geography Markup Language (GML) Implementation Specification, Version 3.1
      (OGC 03-105r1, ISO/CD 19136)
    

		
      
      SOAP Version 1.2 Part 1: Messaging Framework, Second Edition
      (W3C Recommendation 27 April 2007)
    

		
      
      SOAP Version 1.2 Part 2: Adjuncts, Second Edition
      (W3C Recommendation 27 April 2007)
    








Table of Contents

		Conformance Level 0

		Conformance Level 1

		Conformance Level 2




Conformance Level 0


Purpose

All CSW-based catalogue services must implement certain basic functions
      that are independent of any particular profile. The following mandatory
      service capabilities are assessed in terms of generic csw:Record representations:
        

		GetCapabilities



		GetRecords



		GetRecordById







      

For all tests at this level, the Service and
      Version request parameters have the values "CSW"
      and "2.0.2", respectively. If applicable, the OutputSchema
      parameter has the value "http://www.opengis.net/cat/csw/2.0.2".





List of Tables

		1. Exception reports

		2. Response entity is schema-valid

		3. Request parameters - case sensitivity

		4. CSW record views

		5. GetCapabilities - CSW

		6. GetCapabilities - Version negotiation

		7. GetCapabilities - AcceptFormats parameter

		8. GetRecordById - Generic CSW records

		9. GetRecords - hits only

		10. GetRecords - maxRecords parameter

		11. GetRecords - BBOX (CSW records)

		12. GetRecords - Logical query predicates (CSW records)

		13. GetRecords - Comparison query predicates (CSW records)

		14. GetRecords - AnyText pseudo-property




ATC 1: Exception reports

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/Exceptions

		Test purpose		Check that an exception or fault is reported
        in response to any of the following conditions:


        		A service request is incorrectly formed or invalid;



		A service request could not be processed for reasons not directly
            attributable to the contents of the request message itself.







        

		Test method		Pass if any of the relevant circumstances apply
        and the response message body contains a valid error report containing the
        appropriate exception code, locator (if applicable), and HTTP status code;
        fail otherwise. The response shall include either an OWS ExceptionReport
        or a SOAP Fault element (SOAP bindings only).



        All of the following assertions must hold for the content of
        an ows:ExceptionReport element:


        		the document (root) element has [local name] = "ExceptionReport";



		the document (root) element has [namespace name] = "http://www.opengis.net/ows";



		the value of the exceptionCode attribute specifies
            the appropriate code value.



		the HTTP status code indicates a client (4nn) or server (5nn)
            error.







        

		Reference		
        		OGC 05-008: cl. 8.3, Table 19



		SOAP Fault



		
            RFC 2616: Client Error 4xx
            



		
            RFC 2616: Server Error 5xx
            







        

		Test type		Capability






ATC 2: Response entity is schema-valid

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/ValidResponseEntity

		Test purpose		Verify that the body of a service response message
        is schema-valid.
        

		Test method		Pass if the response entity is schema-valid; fail
        otherwise. This is the minimal criterion for validating a service
        response--additional constraints may also apply.

		Reference		
        		OGC 07-006r1: cl. 10.13







        

		Test type		Capability






ATC 3: Request parameters - case sensitivity

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/RequestParameters-CaseSensitivity

		Test purpose		Check that parameter names are handled in a case-insensitive
        manner and that parameter values are handled in a case-sensitive manner.

		Test method		Pass if the SUT satisfies all of the following
        constraints regarding parameters appearing in the query part of the
        Request-URI: (a) parameter names are handled in a case-insensitive manner,
        and (b) parameter values are handled in a case-sensitive manner; fail
        otherwise. These constraints apply to all GET requests and POST requests
        where Content-Type = "application/x-www-form-urlencoded".

		Reference		
        		OGC 07-006r1: cl. 10.3.6



		OGC 05-008: cl. 11.5.2







        

		Test type		Capability






ATC 4: CSW record views

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/Record-views

		Test purpose		Check that all CSW record representations
        included in a response message conform to the requested view (pre-defined
        element set), as specified by the value of the ElementSetName
        parameter.


        

		Test method		Pass if the record representations correspond to
        the requested view; fail otherwise. The CSW record types are csw:BriefRecord
        ("brief"), csw:SummaryRecord ("summary"), and csw:Record ("full"). This
        test applies to GetRecords and GetRecordById requests.

		Reference		
        		OGC 07-006r1: cl. 10.8.4.9; cl. 10.9.4.1







        

		Test type		Capability






ATC 5: GetCapabilities - CSW

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetCapabilities-CSW

		Test purpose		Check that a request for a complete and current
        description of CSW-related service capabilities is processed as expected.

		Test method		Pass if the response contains a complete description
        of mandatory CSW capabilities; fail otherwise. The GET method must be
        supported, where the service parameter has the value
        "CSW". The capabilities document corresponds to an ICS (Implementation
        Conformance Statement) in ISO conformance testing terminology.

		Reference		
        		OGC 05-008: cl. 7



		OGC 07-006r1: cl. 10.3.1, Table 54



		OGC 07-006r1: cl. 10.5







        

		Test type		Capability






ATC 6: GetCapabilities - Version negotiation

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetCapabilities-AcceptVersions

		Test purpose		Verify that version negotiation is implemented
        correctly.
        

		Test method		Pass if the response to a GetCapabilities
        request satisfies all of the following assertions; fail otherwise:


        		it contains a complete representation of the capabilities document
            corresponding to the first supported version in the value of the
            AcceptVersions parameter;



		if no version in the supplied AcceptVersions
            value is supported, it contains an exception with exceptionCode =
            "VersionNegotiationFailed";



		if the AcceptVersions parameter is absent,
            it contains the capabilities document for the latest supported version.







        

		Reference		
        		OGC 07-006r1: cl. 10.5.2



		OGC 05-008: cl. 7.3.2







        

		Test type		Capability






ATC 7: GetCapabilities - AcceptFormats parameter

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetCapabilities-AcceptFormats

		Test purpose		Verify that the response to a GetCapabilities
        request containing the AcceptFormats parameter
        satisfies the following cases:


        		if one or more supported formats are supplied, it contains a
            capabilities document in the supported format (media type) that is
            most preferred;



		if no value is supplied or if none of the preferred formats are
            supported, it contains the default (XML) representation.







        

		Test method		Pass if the applicable assertion is satisfied;
        fail otherwise.

		Reference		
        		OGC 05-008: cl. 7.3.5







        

		Test type		Capability






ATC 8: GetRecordById - Generic CSW records

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetRecordById-CSW

		Test purpose		Verify that a GetRecordById request that specifies
        the CSW output schema ("http://www.opengis.net/cat/csw/2.0.2") is processed
        as expected.
        

		Test method		Pass if the response contains a CSW record representation
        (default is csw:SummaryRecord) for each record matching a supplied identifier
        value. The GET method is mandatory.

		Reference		
        		OGC 07-006r1: cl. 10.9.4







        

		Test type		Capability






ATC 9: GetRecords - hits only

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetRecords-hits

		Test purpose		Verify that a GetRecords request in which
        the resultType parameter is either missing or has
        the value "hits" is processed as expected and includes no records in the
        response.


        

		Test method		Pass if the response entity satisfies all
        of the following constraints; fail otherwise.


        		csw:SearchResults/@numberOfRecordsMatched indicates the expected
            number of hits;



		csw:SearchResults/@numberOfRecordsReturned = 0 (zero);



		the csw:SearchResults element is empty.







        

		Reference		
        		OGC 07-006r1: cl. 10.8.4.3; 10.8.5, Table 66.







        

		Test type		Capability






ATC 10: GetRecords - maxRecords parameter

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetRecords-maxRecords

		Test purpose		Verify that the response to a GetRecords request
        contains no more than the number of records specified by the maxRecords
        parameter (10 by default).
        

		Test method		Pass if count(//csw:SearchResults/*) <= maxRecords;
        fail otherwise. The value of the @numberOfRecordsReturned attribute must
        correctly report the actual number of records included.

		Reference		
        		OGC 07-006r1: cl. 10.8.4.7







        

		Test type		Capability






ATC 11: GetRecords - BBOX (CSW records)

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetRecords-BBOX

		Test purpose		Verify that a GetRecords request that specifies
        the CSW response schema (outputSchema = "http://www.opengis.net/cat/csw/2.0.2")
        and includes a BBOX query predicate is processed as expected.
        

		Test method		Pass if all response records satisfy the BBOX
        spatial predicate; fail otherwise. The only complex spatial property defined
        for the csw:Record type is ows:BoundingBox. Support for the BBOX predicate
        is mandatory.

		Reference		
        		OGC 07-006r1: cl. 10.5.2, Table 58



		OGC 04-095: cl. 8.2







        

		Test type		Capability






ATC 12: GetRecords - Logical query predicates (CSW records)

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetRecords-Logical

		Test purpose		Verify that a GetRecords request that specifies
        the CSW response schema (outputSchema = "http://www.opengis.net/cat/csw/2.0.2")
        and includes one or more logical query predicates is processed as expected.
        

		Test method		Pass if the response entity satisfies the logical
        query predicates; fail otherwise. All logical query predicates (And, Or, Not)
        must be implemented.

		Reference		
        		OGC 07-006r1: cl. 10.5.2, Table 58



		OGC 04-095: cl. 10.2







        

		Test type		Capability






ATC 13: GetRecords - Comparison query predicates (CSW records)

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetRecords-Comparison

		Test purpose		Verify that a GetRecords request that specifies
        the CSW response schema (outputSchema = "http://www.opengis.net/cat/csw/2.0.2")
        and includes a comparison query predicate is processed as expected.
        

		Test method		Pass if the response entity satisfies the comparison
        query predicate; fail otherwise. The following comparison query predicates
        must be implemented:


        		PropertyIsEqualTo



		PropertyIsNotEqualTo



		PropertyIsLessThan



		PropertyIsGreaterThan



		PropertyIsLessThanOrEqualTo



		PropertyIsGreaterThanOrEqualTo



		PropertyIsLike







        

		Reference		
        		OGC 07-006r1: cl. 10.5.2, Table 58



		OGC 04-095: cl. 9.2







        

		Test type		Capability






ATC 14: GetRecords - AnyText pseudo-property

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-0/GetRecords-AnyText

		Test purpose		Verify that a GetRecords request that includes
        the csw:Record/csw:AnyText property in the query constraint is processed
        as expected.
        

		Test method		Pass if the response entity satisfies the search
        criteria; fail otherwise. Predicates that include the csw:AnyText pseudo-property
        shall be evaluated against all ebRIM information items for which a CSW
        mapping exists (Table 6). The POST method must be supported.

		Reference		
        		OGC 07-006r1: cl. 10.2.5.3.2, p. 120



		OGC 07-110r3: cl. 7.6, Table 6







        

		Test type		Capability







Conformance Level 1


Purpose

Conformance Level 1 includes all Level 0
      tests and adds test cases to verify the following search and retrieval
      capabilities in terms of the ebRIM v3 info set:
        

		GetCapabilities



		DescribeRecord



		GetRecords



		GetRecordById



		GetRepositoryItem



		GetDomain



		Predefined (named) queries



		Basic extension package support







      

If applicable, the OutputSchema parameter has
      the value "urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" for all tests at
      this level.





List of Tables

		15. ebRIM 3.0 support

		16. Basic extension package

		17. Mandatory request parameters

		18. CSW-ebRIM exception codes

		19. Content-Type entity header

		20. Unrecognized request parameters

		21. Preferred response format

		22. Compressed response (gzip)

		23. ebRIM registry object views

		24. Localized content

		25. Coordinate reference systems

		26. SOAP 1.2 protocol bindings

		27. SOAP 1.2 response

		28. SOAP faults

		29. OGC filter predicates - XPath expressions

		30. Query by classification

		31. Query by association

		32. OutputSchema parameter

		33. GetCapabilities - Complete

		34. GetCapabilities - Sections parameter

		35. GetCapabilities - Response

		36. DescribeRecord - POST Method

		37. DescribeRecord - TypeName parameter

		38. DescribeRecord - Qualified types

		39. DescribeRecord - SchemaLanguage parameter

		40. DescribeRecord - Response

		41. GetRecordById - GET Method

		42. GetRecordById - Identifier scope

		43. GetRecordById - Response

		44. GetRepositoryItem - GET Method

		45. GetRepositoryItem - Request parameters

		46. GetRepositoryItem - Response

		47. GetRepositoryItem - External resources

		48. GetRepositoryItem - Exceptions

		49. GetRecords - POST Method

		50. GetRecords - Asynchronous elements

		51. GetRecords - resultType parameter

		52. GetRecords - Binding variables

		53. GetRecords - RequestId parameter

		54. GetRecords - Disallowed views

		55. GetRecords - Logical predicates

		56. GetRecords - Comparison predicates

		57. GetRecords - Spatial predicates

		58. GetRecords - Exceptions

		59. GetRecords - Response

		60. Stored queries




ATC 15: ebRIM 3.0 support

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/ebRIM3

		Test purpose		Confirm that the OASIS ebRIM 3.0 information model
        is fully supported, and that all applicable constraints are satisfied.
        

		Test method		Pass if ebRIM 3.0 registry objects are handled
        correctly in all relevant request and response contexts; fail otherwise.
        The OASIS standard stipulates additional constraints that apply to particular
        classes in the information model.

		Reference		
        		OGC 07-110r3: cl. 6.2



		ebRIM 3.0







        

		Test type		Capability






ATC 16: Basic extension package

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/BasicPackage

		Test purpose		Check that the Basic Extension Package (OGC 07-144r3)
        is available and fully supported.

		Test method		Pass if all extensions and constraints specified in
        the Basic package (CSW-ebRIM, Part 2: OGC 07-144r3) are supported and
        correctly implemented; fail otherwise. All conforming services must
        implement this package.

		Reference		
        		OGC 07-110r3: cl. 2.3



		OGC 07-144r3







        

		Test type		Capability






ATC 17: Mandatory request parameters

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/MandatoryParameters

		Test purpose		Check that the SUT handles all mandatory request
        parameters: request, service, version.

		Test method		Pass if the SUT handles all mandatory request
        parameters as expected; fail otherwise. The service and
        version parameters have fixed values: "CSW" and "2.0.2",
        respectively. These parameters apply to all GET requests and POST requests
        where Content-Type = "application/x-www-form-urlencoded" (except for GetCapabilities and all profile-specific
        requests).

		Reference		
        		OGC 07-006r1: cl. 10.3.6, Table 57







        

		Test type		Capability






ATC 18: CSW-ebRIM exception codes

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/CswEbrimExceptions

		Test purpose		An OWS exception report is returned in response
        to any of the following error conditions:


        		if a request entity is malformed or invalid for any reason,
            it has exceptionCode="InvalidRequest" and status code = 400.



		if an optional HTTP method binding is not supported by the service,
            it has exceptionCode = "NotImplemented" and status code = 500.



		if the requested resource (repository item) does not exist or
            could not be found, it has exceptionCode = "NotFound" and status code = 404.



		if a service option or media type is unsupported, it has
            exceptionCode "NotSupported" and status code = 415.



		if the requested transaction could not be successfully completed
            for any reason it has exceptionCode = "TransactionFailed" and status
            code = 500.







        

		Test method		Pass if any of the relevant circumstances apply and the response
        message body contains a valid exception report and the HTTP header contains the
        appropriate status code; fail otherwise. Note that CSW-ebRIM exception codes override
        OWS exception codes when in conflict, see Exception reports.

		Reference		
        		OGC 07-110r3: cl. 7.4, Table 4; cl. 7.9.2







        

		Test type		Capability






ATC 19: Content-Type entity header

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/ContentType

		Test purpose		Verify that the Content-Type entity header
        is used correctly.


        

		Test method		
        Pass if the Content-Type entity header field value correctly
        identifies the media type of the message body; fail otherwise. Accepted
        content types for all service requests shall be declared in the capabilities
        document via the operation-specific "Content-Type" constraint.



        The following content types apply:


        		application/xml – an XML request or response
            entity.



		application/x-www-form-urlencoded – a
            request entity containing a set of name/value pairs.



		multipart/related – the message is a compound
            object containing related MIME parts structured in accord with RFC 2387.



		application/soap+xml – a W3C SOAP Envelope, if the
            service implements a SOAP message binding.







        

		Reference		
        		OGC 07-110r3: cl. 7.2, p.9



		OGC 05-008: cl. 11.7, p.61



		IANA media type registry







        

		Test type		Capability






ATC 20: Unrecognized request parameters

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/UnrecognizedParameters

		Test purpose		Verify that unrecognized request parameters are
        ignored.

		Test method		Verify the handling of unspecified request
        parameters in GET requests and POST requests where Content-Type =
        "application/x-www-form-urlencoded". Pass if they are ignored; fail
        otherwise.

		Reference		
        		OGC 07-110r3: cl. 7.4, p.11







        

		Test type		Capability






ATC 21: Preferred response format

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/PreferredFormat

		Test purpose		The response to a request containing the OutputFormat
        parameter must satisfy the applicable assertion:


        		the media type of the response corresponds to (a) the requested
            format, or (b) the preferences indicated by the Accept
            header (parameter overrides the header);



		if none of the preferred formats is supported by the service,
            it contains a status code of 415 and an exception
            with exceptionCode = "NotSupported";



		if no preference is specified, its content type matches the
            default message format ("application/xml" for applicable operations).







        

		Test method		Pass if the format of the response message is as expected; fail
        otherwise. Applies to GetRecords, GetRecordById, and DescribeRecord. Note that the
        OuputFormat overrides any values in the Accept header.

		Reference		
        		OGC 07-006r1: cl. 10.2.2, p.117



		OGC 07-006r1: cl. 10.6.4.3, p.137



		OGC 07-006r1: cl. 10.8.4.4, p.148



		OGC 07-006r1: cl. 10.9.4.3, p.162



		RFC 2616: Accept header







        

		Test type		Capability






ATC 22: Compressed response (gzip)

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/Compression-gzip

		Test purpose		Verify that the response to a request containing
        the Accept-Encoding header value "gzip" is compressed using
        Lempel-Ziv coding (LZ77).


		Precondition

//ows:OperationsMetadata/ows:Constraint[@name = 'Content-Encoding']/ows:Value/text() = 'gzip'



        

		Test method		Pass if the response entity is encoded as
        requested (gzip); fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.2.3, p.117



		RFC 2616: Accept-Encoding header



		RFC 2616: Content-Encoding entity header







        

		Test type		Capability






ATC 23: ebRIM registry object views

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/ebRIM-views

		Test purpose		Check that all ebRIM  registry object
        representations included in a response entity conform to the requested
        view (pre-defined element set), as specified by the value of the
        ElementSetName parameter.


        

		Test method		
        Pass if the record representations correspond to the requested view;
        fail otherwise. This test applies to GetRecords and GetRecordById requests.
        The available views for the CSW-ebRIM profile are listed below, where
        summary is the default view if none was specified:


        		brief



		summary



		full







        

		Reference		
        		OGC 07-110r3: cl. 7.5, p.11



		ebRIM 3.0: cl. 2.5, p.21



		OGC 07-006r1: cl. 10.9.4.1, p.162



		OGC 07-006r1: cl. 10.8.4.9, p.149







        

		Test type		Capability






ATC 24: Localized content

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/Localization

		Test purpose		Verify that a response containing any multilingual
        rim:LocalizedString elements satisfies the following assertions:


        		rim:LocalizedString/@xml:lang values shall conform to the syntax specified in RFC 4646;



		no sibling rim:LocalizedString elements have the same @xml:lang value;



		if the request contained the Accept-Language header field,
            only rim:LocalizedString elements that match the preferred language(s)
            are included in the response;



		if no preference is expressed or if there are no matching
            localizations, all rim:LocalizedString elements shall be included.







        

		Test method		Pass if the response contains the expected
        localized strings; fail otherwise. This applies to the following ebRIM
        elements: rim:Name, rim:Description, rim:UsageDescription. This applies
        anytime a rim:LocalizedString element (within the above-mentioned
        elements) is present in the response.

		Reference		
        		OGC 07-110r3: cl. 7.7, p.13



		ebRIM 3.0: cl. 2.3.2, p.19







        

		Test type		Capability






ATC 25: Coordinate reference systems

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/CRS

		Test purpose		Check that a response containing any spatial
        coordinates expressed in GML also contains an associated coordinate reference
        system (CRS) using the srsName attribute.

		Test method		Pass if the response entity contains a CRS
        reference as expected; fail otherwise. No default CRS is specified, but
        definitions from the EPSG Geodetic Parameter Dataset
        are widely used. Supported coordinates reference systems are identified
        in the capabilities document using a global "srsName" constraint; values
        must be valid URNs that adhere to the OGC URN namespace policy. This
        applies anytime a GML spatial object is included in the response.

		Reference		
        		OGC 07-110r3: cl. 7.8; cl. 8.4(b)



		OGC Urn Policy



		EPSG Geodetic Parameter Registry







        

		Test type		Capability






ATC 26: SOAP 1.2 protocol bindings

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/SoapBindings

		Test purpose		The response to a SOAP 1.2 request satisfies
        one of the following assertions:


        		if the IUT
            provides a SOAP binding for the request, it contains the expected content
            in the body of the SOAP message.

Precondition

//ows:Operation[@name='$OperationName']/ows:Constraint[@name  = 'Content-Type']/ows:Value/text() = 'application/soap+xml'




		if a SOAP binding is not supported, the response indicates
            status code 501; it may also include an exception report with
            exceptionCode="NotImplemented".

Precondition

not(//ows:Operation[@name='$OperationName']/ows:Constraint[@name  = 'Content-Type']/ows:Value/text() = 'application/soap+xml')








        

		Test method		Pass if the applicable assertion holds; fail otherwise. An
        implementation advertises support of SOAP 1.2 in the capabilities document via
        the operation-specific "Content-Type" constraint, including the value
        "application/soap+xml".

		Reference		
        		OGC 07-006r1: cl. 10.3.2, p.125



		SOAP 1.2, Part 1



		SOAP Version 1.2, Part 2 SOAP HTTP Binding



		RFC 3902 - The "application/soap+xml" media type







        

		Test type		Capability






ATC 27: SOAP 1.2 response

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/SoapResponse

		Test purpose		All of the following assertions must hold for the response
        to a SOAP 1.2 request, if supported by the service (see SOAP 1.2 protocol bindings):


        		root element with [local name] = "Envelope";



		root element with [namespace name] = "http://www.w3.org/2003/05/soap-envelope".







        

		Test method		Check the content of the response. Pass if all assertions hold;
        fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.3.2, p.125



		SOAP 1.2, Part 1



		SOAP Version 1.2, Part 2 SOAP HTTP Binding



		RFC 3902 - The "application/soap+xml" media type







        

		Test type		Capability






ATC 28: SOAP faults

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/SoapFaults

		Test purpose		Confirm that a service exception is correctly
        mapped to a SOAP fault message in accord with the specified mapping rules.


        Preconditions


          

		//ows:Operation[@name=.*]/ows:Constraint[@name = 'Content-Type']/ows:Value/text() = 'application/soap+xml'; and



		a W3C SOAP response was requested; and



		an error response is expected.







          



        

		Test method		Check the content of the SOAP error response.
        Pass if all of the following assertions are satisfied; fail otherwise:


        		env:Code/env:Value = "env:Sender" or "env:Receiver", depending
            on the source of the error and the HTTP status code (i.e., 4nn, 5nn);



		env:Code/env:Subcode/env:Value = value of ows:Exception[1]/@exceptionCode;



		env:Reason/env:Text = ows:Exception[1]/ows:ExceptionText[1], where
            @xml:lang = ows:ExceptionReport/@language;



		env:Detail contains the original ows:ExceptionReport element.







        

		Reference		
        		OGC 07-110r3: cl. 7.9.2, p.14



		SOAP 1.2, Part 1



		SOAP Version 1.2, Part 2 SOAP HTTP Binding



		RFC 3902 - The "application/soap+xml" media type







        

		Test type		Capability






ATC 29: OGC filter predicates - XPath expressions

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/OGCFilter-XPath

		Test purpose		Verify that abbreviated XPath 1.0 expressions permitted
        within OGC filter expressions are evaluated correctly when referring to
        the properties of ebRIM registry objects and CSW records.
        

		Test method		Pass if the filter predicate is evaluated as
        expected; fail otherwise. An XPath expression appearing within any
        <ogc:PropertyName> element is subject to the following constraints:


        		the first step is a relative location path that specifies either
            (a) the context node corresponding to the type of interest, or (b) an
            attribute or child element node (if only one type is implicated and the
            context node is unambiguous);



		subsequent steps use an abbreviated syntax to refer to some
            attribute or element node, the value of which is being tested in
            the filter predicate;



		embedded XPath predicates are restricted to (a) the numeric
            context position (to distinguish between multiple occurrences); and
            (b) relative location paths that constrain the value of a rim:Slot
            attribute (@name, @slotType).







        

		Reference		
        		OGC 07-006r1: Annex E



		OGC 07-110r3: cl. 7.10.1, p.15



		XML Path Language (XPath), Version 1.0







        

		Test type		Capability






ATC 30: Query by classification

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/QueryClassification

		Test purpose		Check that a filter expression that queries for objects
        by classification returns all objects that are classified by the given
        rim:Classification object.  When the classification refers to a branch node
        in some classification scheme is automatically expanded to encompass
        all descendant nodes in that scheme.

		Test method		Pass if a filter returns all objects that are classified by
        the classification node; as well as if branch nodes are automatically expanded
        as expected; fail otherwise. This applies to the following contexts: csw:Query,
        csw:Update, and csw:Delete.

		Reference		
        		OGC 07-110r3: cl. 7.10.2; cl. 10.2.3







        

		Test type		Capability






ATC 31: Query by association

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/QueryAssociation

		Test purpose		Check that a filter expression that queries for objects
        by association returns all objects that are associated by the given
        rim:Association object.

		Test method		Pass if a filter returns all objects that are associated by
        the association node.

		Reference		
        		OGC 07-110r3: cl. 10.2.3







        

		Test type		Capability






ATC 32: OutputSchema parameter

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/OutputSchema

		Test purpose		The response to a request containing the
        OutputSchema parameter must satisfy the applicable assertion:


        		if the OutputSchema parameter has the value "urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            then all matching registry object instances conform to the ebRIM 3.0 information model
            (the default schema);



		if no OutputSchema parameter value was supplied, registry object
            instances conform to the ebRIM 3.0 information model (the default
            schema);



		if the requested output schema is unsupported, it contains an
            exception report.







        

		Test method		Check that registry objects representations in the
        response entity conform to the requested output schema, or the default schema
        if none was requested. Pass if all matching representations conform; fail
        otherwise. Additional values may be advertised by the operation-specific
        "OutputFormat" parameter.


        This test applies to all GetRecordById and GetRecord requests. Record
        representations must belong to a valid substitution group (rim:RegistryObject
        or csw:AbstractRecord).


        

		Reference		
        		OGC 07-006r1: cl. 10.8.4.5; cl. 10.9.4.4



		OGC 07-110r3: cl. 10.3; cl. 11.3



		ebRIM 3.0







        

		Test type		Capability






ATC 33: GetCapabilities - Complete

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetCapabilities-Complete

		Test purpose		Check that a request for a complete and current
        description of CSW-ebRIM service capabilities is processed as expected.

		Test method		Pass if the response contains a complete description
        of CSW-ebRIM capabilities; fail otherwise. It must advertise all supported
        operations, parameters, constraints, and other metadata as defined in
        CSW-ebRIM 1.0 and all other related specifications.


        The GET method must be supported, where the service
        parameter has the value "CSW-ebRIM". The capabilities document corresponds
        to an ICS (Implementation Conformance Statement) in ISO conformance testing
        terminology.


        

		Reference		
        		OGC 07-110r3: cl. 8, p.17



		OGC 07-110r3: cl. 9.2, p.18



		OGC 05-008: cl. 7, p.10



		OGC 07-006r1: cl. 10.3.1, Table 54



		OGC 07-006r1: cl. 10.5, p.131



		OGC 07-006r1: cl. 10.8.4, p.147; cl. 10.9.4, p.162







        

		Test type		Capability






ATC 34: GetCapabilities - Sections parameter

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetCapabilities-Sections

		Test purpose		The response to a GetCapabilities request containing the
        Sections parameter must satisfy the applicable assertion:


        		if one or more section names are provided, it contains an
            abbreviated capabilities document that includes only those child
            elements with matching local names;



		if no value is provided, it contains a minimal capabilities
            document that omits all optional child elements;



		if not specified, it contains a complete representation of the
            capabilities document.







        

		Test method		Verify processing of the Sections request parameter.
        Pass if the relevant assertion holds; fail otherwise.

		Reference		
        		OGC 05-008: cl. 7.3.3, p.17







        

		Test type		Capability






ATC 35: GetCapabilities - Response

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetCapabilities-Response

		Test purpose		The response to a GetCapabilities request must have the
        following properties:


        		root element with [local name] = "Capabilities";



		root element with [namespace name] = "http://www.opengis.net/cat/wrs/1.0".







        

		Test method		Check that the response to a GetCapabilities request has
        the correct root element infoset properties. Response must also conform to its defining
        schema, see Response entity is schema-valid. Pass if it does; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 8.3, p.17







        

		Test type		Capability






ATC 36: DescribeRecord - POST Method

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/DescribeRecord-PostMethod

		Test purpose		The POST method binding for the DescribeRecord request is implemented.

		Test method		Verify that the DescribeRecord request is supported. Pass if it is; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 9.1, p.18



		OGC 07-006r1: cl. 10.3.1, Table 54



		OGC 07-006r1: cl. 10.6.1, p.134







        

		Test type		Capability






ATC 37: DescribeRecord - TypeName parameter

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/DescribeRecord-TypeName

		Test purpose		The response to a DescribeRecord request containing the
        TypeName parameter must satisfy the applicable assertion:


        		if no TypeName parameter is present then the response shall contain
            the schema describing all server-supported record types;



		if one or more types are requested then the response shall contain only
            the schema describing those requested record types and the parentSchema
            attribute shall be a URI reference to the source schema;



		if any requested types are not supported (unknown) by the server then
            the response shall not contain any record type descriptions - empty response.







        

		Test method		Verify that the DescribeRecord response contains all
        requested record type descriptions. Pass if it does; fail otherwise. When expecting all
        server-supported record types, examine the schemas for the following namespaces:
        "urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0", "http://www.opengis.net/cat/csw/2.0.2",
        and "http://www.opengis.net/cat/wrs/1.0".

		Reference		
        		OGC 07-110r3: cl. 9.3, p.18



		OGC 07-006r1: cl. 10.6.4.2, p.136







        

		Test type		Capability






ATC 38: DescribeRecord - Qualified types

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/DescribeRecord-QualifiedTypes

		Test purpose		A DescribeRecord response, when specifying type names
        to describe in the request (TypeName parameter), must satisfy the
        following conditions:


        		if over GET KVP, each type specified by the TypeName parameter must
            be qualified with an associated xmlns entry under the Namespace
            parameter.



		if over POST XML, each type specified by the TypeName parameter must
            be fully-qualified using proper XML convention.







        

		Test method		Verify that the DescribeRecord response contains all
        requested record type descriptions. Pass if all the response contains the
        expected results; fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.6.4.2, p.136







        

		Test type		Capability






ATC 39: DescribeRecord - SchemaLanguage parameter

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/DescribeRecord-SchemaLanguage

		Test purpose		The response to a DescribeRecord request containing the
        SchemaLanguage parameter must satisfy the applicable assertion:


        		if the SchemaLanguage parameter was specified (character string),
            and is an allowed format as advertised by the capabilities document, the response must
            contain a schema conforming to the requested schema description language and describe
            the requested type(s);



		if no SchemaLanguage parameter value was supplied, the response must
            contain a valid XML schema describing the requested type(s) (the default schema
            language value is "http://www.w3.org/2001/XMLSchema");



		if the requested schema language is unsupported, it contains an
            exception report.







        

		Test method		Check that the response contains a schema that conforms
        to the requested schema language. Pass if the response conforms; fail otherwise.
        Allowed values are advertised in the capabilities document via the operation-specific
        "outputFormat" parameter.

		Reference		
        		OGC 07-110r3: cl. 9.2, p.18



		OGC 07-006r1: cl. 10.6.4.4, p.137



		ebRIM 3.0







        

		Test type		Capability






ATC 40: DescribeRecord - Response

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/DescribeRecord-Response

		Test purpose		The response to a DescribeRecord request must have the
        following properties:


        		root element with [local name] = "DescribeRecordResponse";



		root element with [namespace name] = "http://www.opengis.net/cat/csw/2.0.2".







        

		Test method		Check that the response to a DescribeRecord request has
        the correct root element infoset properties. Response must also conform to its defining
        schema, see Response entity is schema-valid. Pass if it does; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 9.3, p.18







        

		Test type		Capability






ATC 41: GetRecordById - GET Method

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecordById-GetMethod

		Test purpose		The GET method binding for the GetRecordById request is implemented.

		Test method		Verify that the GET method for the GetRecordById request is
        supported. Pass if it is; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 11.1, p.21



		OGC 07-006r1: cl. 10.3.1, Table 54



		OGC 07-006r1: cl. 10.9.1, p.160







        

		Test type		Capability






ATC 42: GetRecordById - Identifier scope

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecordById-IdScope

		Test purpose		The response to a GetRecordById request must satisfy the
        applicable assertion:


        		if the result set is non-empty, it includes only those registry
            objects with matching internal (rim:RegistryObject/@id) or external
            (rim:ExternalIdentifier/@value) identifiers;



		if the result set is empty, the response is empty;



		if any of the identifiers specified in the request is invalid, then
            the response contains an exception report.







        

		Test method		Verify that Id values in GetGetRecordById requests are handled
        correctly. Pass if this is so; fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.9.4.2, p.162







        

		Test type		Capability






ATC 43: GetRecordById - Response

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecordById-Response

		Test purpose		The response to a GetRecordById request must have the
        following properties:


        		root element with [local name] = "GetRecordByIdResponse";



		root element with [namespace name] = "http://www.opengis.net/cat/csw/2.0.2".







        

		Test method		Check that the response to a GetRecordById request has
        the correct root element infoset properties. Response must also conform to its defining
        schema, see Response entity is schema-valid. Pass if it does; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 11.3, p.21







        

		Test type		Capability






ATC 44: GetRepositoryItem - GET Method

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRepositoryItem-GetMethod

		Test purpose		The GET method binding for the GetRepositoryItem request is implemented.

		Test method		Verify that the GET method for the GetRepositoryItem request is
        supported. Pass if it is; fail otherwise. Reserved characters in the query component must
        be suitably percent encoded.

		Reference		
        		OGC 07-110r3: cl. 12.1, p.22







        

		Test type		Capability






ATC 45: GetRepositoryItem - Request parameters

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRepositoryItem-RequestParameters

		Test purpose		The mandatory KVP parameters of request (fixed value:
        "GetRepositoryItem"), service (fixed value: "CSW-ebRIM"), and
        id must be present.

		Test method		Pass if all mandatory request elements are present (and all fixed
        values are correct) and the response contains the requested entity; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 12.2, p.22







        

		Test type		Capability






ATC 46: GetRepositoryItem - Response

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRepositoryItem-Response

		Test purpose		A successful GetRepositoryItem request returns the repository item, if
        avabilable, as the body of the response.  The Content-Type header must also be set
        to the proper MIME type according to the resultant repository item (including
        additional encodings that have been applied).

		Test method		Pass if the GetRepositoryItem response is correct and contains
        mandatory elements and values, according to its Content-Type.

		Reference		
        		OGC 07-110r3: cl. 12.3, p.22







        

		Test type		Capability






ATC 47: GetRepositoryItem - External resources

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRepositoryItem-ExternalResource

		Test purpose		When the resource specified in a request resides on another server the client
        shall be redirected to that resource (i.e. HTTP status code 303, "See Other"), as
        well as have the Location HTTP header set to the value of the
        ExternalLink/@externalURI attribute.

		Test method		Verify that externally linked repository items are correctly returned.

		Reference		
        		OGC 07-110r3: cl. 12.3, p.22







        

		Test type		Capability






ATC 48: GetRepositoryItem - Exceptions

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRepositoryItem-Exceptions

		Test purpose		In the case of a GetRepositoryItem exception, the following cases
        describe the exception code to be included in an ows:ExceptionReport:


        		If the repository item cannot be found or the id is invalid, an exception
            with code NotFound must be returned, along with HTTP
            status code 404.



		Any other invalid request causes an InvalidRequest error.







        

		Test method		Verify the service generates appropriate exceptions for invalid
        GetRepositoryItem requests.

		Reference		
        		OGC 07-110r3: cl. 7.4, p.11



		OGC 07-110r3: cl. 12.3, p.22







        

		Test type		Capability






ATC 49: GetRecords - POST Method

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-PostMethod

		Test purpose		The POST method binding for the GetRecords request is implemented.

		Test method		Verify that the POST method for the GetRecords request is
        supported. Pass if it is; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 10.1, p.18



		OGC 07-006r1: cl. 10.3.1, Table 54



		OGC 07-006r1: cl. 10.8.1, p.142







        

		Test type		Capability






ATC 50: GetRecords - Asynchronous elements

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-Asynchronous

		Test purpose		The csw:ResponseHandler and csw:DistributedSearch
        elements (POST) or ResponseHandler and DistributedSearch
        parameters (GET), if present, shall be ignored and the request processed in the normal
        synchronous manner.

		Test method		Verify that GetRecords requests are processed synchronously,
        ignoring asynchronous elements. Pass if it does; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 10.2.1, p.19



		OGC 07-110r3: cl. 10.2.2, p.19







        

		Test type		Capability






ATC 51: GetRecords - resultType parameter

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-ResultType

		Test purpose		The content of the GetRecords response entity is determined
        by the value of the resultType request parameter according
        to one of the following cases:


        		hits - there are no matching registry objects
            included in the response entity (default if not specified).



		results - matching registry objects from
            the result set are included in the response entity.



		validate - the response is an exception
           report with exceptionCode="NotSupported" (asynchronous behavior not
           supported in this profile).







        

		Test method		Verify that the content of the GetRecords response entity is
        consistent with the value of the resultType request parameter. Pass if
        the response is in accord with the applicable case; fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.8.4.3, p.147



		OGC 07-006r1: cl. 10.8.2, Table 65







        

		Test type		Capability






ATC 52: GetRecords - Binding variables

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-BindingVariables

		Test purpose		Variable bindings declared in queries comply with the following
        syntactical convention: rim:RegistryObject[_varName]*,
        where rim:RegistryObject may be replaced by any member of its substitution
        group.
        

		Test method		Pass if the variable bindings declared in a query (in csw:Query/@typeNames)
        are syntactically correct; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 10.2.3, p.19







        

		Test type		Capability






ATC 53: GetRecords - RequestId parameter

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-RequestId

		Test purpose		If the client supplies the RequestId parameter on the
        request, the response shall contain the csw:RequestId element.

		Test method		Pass if the RequestId element is returned when requested; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 10.3, p.20







        

		Test type		Capability






ATC 54: GetRecords - Disallowed views

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-DisallowedViews

		Test purpose		The response to a query that contains either csw:SummaryRecord or
        csw:BriefRecord within the Query/@typeNames list includes an exception report.
        

		Test method		Confirm that partial view types cannot be queried. Pass if the
        expected exception is produced; fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.2.5.3.3, p.121



		OGC 07-006r1: cl. 10.2.5.3.4, p.122







        

		Test type		Capability






ATC 55: GetRecords - Logical predicates

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-Logical

		Test purpose		The SUT must process GetRecords requests
        containing logical predicates in the query filter:


        		And



		Or



		Not







        

		Test method		Verify that GetRecords requests containing logical
        query predicates are processed as expected. Pass if the predicate is
        evaluated correctly; fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.8.4.11



		OGC 07-006r1: cl. 10.5.2, Table 58



		OGC 04-095: cl. 10







        

		Test type		Capability






ATC 56: GetRecords - Comparison predicates

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-Comparison

		Test purpose		The SUT must process GetRecords requests
        containing supported comparison predicates in the query filter:


        		PropertyIsEqualTo



		PropertyIsNotEqualTo



		PropertyIsLessThan



		PropertyIsGreaterThan



		PropertyIsLessThanOrEqualTo



		PropertyIsGreaterThanOrEqualTo



		PropertyIsLike



		PropertyIsNull

Precondition

//ogc:ComparisonOperator/text() = 'NullCheck'




		PropertyIsBetween

Precondition

//ogc:ComparisonOperator/text() = 'Between'








        

		Test method		Verify that GetRecords requests containing
        comparison predicates in the query filter are processed as expected.
        Pass if the predicate is evaluated correctly; fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.8.4.11



		OGC 07-006r1: cl. 10.5.2, Table 58



		OGC 04-095: cl. 9







        

		Test type		Capability






ATC 57: GetRecords - Spatial predicates

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-Spatial

		Test purpose		The SUT must process GetRecords requests
        containing supported spatial predicates in the query filter:


        		BBOX



		Equals

Precondition

//ogc:SpatialOperator[@name = 'Equals']




		Disjoint

Precondition

//ogc:SpatialOperator[@name = 'Disjoint']




		Intersects

Precondition

//ogc:SpatialOperator[@name = 'Intersects']




		Touches

Precondition

//ogc:SpatialOperator[@name = 'Equals']




		Crosses

Precondition

//ogc:SpatialOperator[@name = 'Crosses']




		Within

Precondition

//ogc:SpatialOperator[@name = 'Within']




		Contains

Precondition

//ogc:SpatialOperator[@name = 'Contains']




		Overlaps

Precondition

//ogc:SpatialOperator[@name = 'Overlaps']




		Beyond

Precondition

//ogc:SpatialOperator[@name = 'Beyond']




		DWithin

Precondition

//ogc:SpatialOperator[@name = 'DWithin']








        

		Test method		Verify that GetRecords requests containing
        spatial query predicates are processed as expected. Pass if the
        predicate is evaluated correctly; fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.8.4.11



		OGC 07-006r1: cl. 10.5.2, Table 58



		OGC 04-095: cl. 8







        

		Test type		Capability






ATC 58: GetRecords - Exceptions

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-Exceptions

		Test purpose		An OWS exception report is returned in response to any of the
        following conditions:


        		if the resultType attribute in the request has the value "validate"
            (i.e., process the request asynchronously), the response shall include an exception
            with code NotSupported.



		if a supplied query is expressed in an unsupported query language, the response
            shall include an exception with code NotSupported.







        

		Test method		Pass if any of the relevant circumstances apply and the response
        message body contains a valid exception report; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 10.3, p.21







        

		Test type		Capability






ATC 59: GetRecords - Response

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/GetRecords-Response

		Test purpose		The response to a GetRecords request must have the
        following properties:


        		root element with [local name] = "GetRecordsResponse";



		root element with [namespace name] = "http://www.opengis.net/cat/csw/2.0.2".







        

		Test method		Check that the response to a GetRecords request has
        the correct root element infoset properties. Response must also conform to its defining
        schema, see Response entity is schema-valid. Pass if it does; fail otherwise.

		Reference		
        		OGC 07-110r3: cl. 10.3, p.20







        

		Test type		Capability






ATC 60: Stored queries

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-1/StoredQueries

		Test purpose		Verify that the IUT correctly processes the
        stored queries defined in the Basic extension package:


        		listExtensionPackages



		showStoredQueries



		findServices



		findObjectsByClassificationNode



		findObjectsByClassificationPath







        

		Test method		
        Pass if the content of the response entity is as expected; fail otherwise.
        All queries may be invoked using the GET and POST methods (using the
        mandatory GetRecords POST endpoint).

		Reference		
        		OGC 07-110r3: cl. 16.1



		OGC 07-144r3: cl. 10







        

		Test type		Capability







Conformance Level 2


Purpose

Conformance Level 2 includes all Level 1
      tests plus test cases for managing registry content in a "pull" or "push"
      manner. To conform at this level, the Harvest or
      Transaction request (or both) must be implemented and
      advertised in the service capabilities document.





List of Tables

		61. Registration facility

		62. Insert registry object

		63. Insert extrinsic object with repository item

		64. Insert extrinsic object with repository item as XOP package

		65. Update registry object

		66. Update object properties

		67. Modify slots

		68. Delete registry object

		69. Compound transaction

		70. Transaction using SOAP messaging framework

		71. Harvest OGC service description

		72. Harvest ISO 19139 metadata document

		73. Harvest using SOAP messaging framework




ATC 61: Registration facility

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/RegistrationFacility

		Test purpose		Verify that an SUT claiming conformance at Level 2
        implements the Harvest or Transaction request.

		Test method		Pass if the Harvest or the Transaction request is
        supported; fail otherwise. The operational metadata provided in the
        capabilities document must be complete and correct.

		Reference		
        		OGC 07-110r3: cl. 2.3, p.2







        

		Test type		Capability






ATC 62: Insert registry object

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Transaction-Insert-RegistryObject

		Test purpose		Verify that the service under test correctly
        processes a request to insert one or more representations of ebRIM registry
        objects.


        Precondition

//ows:Operation[@name='Transaction']



        

		Test method		
        Pass if the response is as expected and includes brief representations
        of all objects that were created; fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.11.3.2.



		OGC 07-110r3: cl. 15.2.2.







        

		Test type		Capability






ATC 63: Insert extrinsic object with repository item

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Transaction-Insert-ExtrinsicObject

		Test purpose		Confirm that the service under test correctly
        handles a request to insert an extrinsic object and a corresponding
        repository item contained in a multipart message structure.


        Precondition

//ows:Operation[@name='Transaction']



        

		Test method		
        Pass if the multipart/related request is processed as expected and both
        items can be subsequently retrieved (via GetRecordById and GetRepositoryItem);
        fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.11.3.2.



		OGC 07-110r3: cl. 15.2.2.







        

		Test type		Capability






ATC 64: Insert extrinsic object with repository item as XOP package

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Transaction-Insert-XOP

		Test purpose		Check that the service under test correctly
        handles a request to insert an extrinsic object and a corresponding
        repository item contained in a multipart XOP package.


        Precondition

//ows:Operation[@name='Transaction']



        

		Test method		
        Pass if the multipart/related request containing a XOP package is processed
        as expected and both items can be subsequently retrieved; fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.11.3.2.



		OGC 07-110r3: cl. 15.2.2, p. 26



		XML-binary Optimized Packaging







        

		Test type		Capability






ATC 65: Update registry object

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Transaction-Update-RegistryObject

		Test purpose		Verify that the SUT correctly processes a request
        to update a registry object.


        Precondition

//ows:Operation[@name='Transaction']



        

		Test method		
        The request entity includes a full representation of a registry object
        that is intended to replace an existing registry object. A service
        exception (code = TransactionFailed) is returned if the object to be
        updated does not exist.

		Reference		
        		OGC 07-006r1: cl. 10.11.3.3



		OGC 07-110r3: cl. 15.2.3







        

		Test type		Capability






ATC 66: Update object properties

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Transaction-Update-Properties

		Test purpose		Check that the SUT correctly processes a request
        to update selected properties of one or more registry objects.


        Precondition

//ows:Operation[@name='Transaction']



        

		Test method		
        The request entity includes a list of object properties to be updated;
        the scope of the update is determined by the filter expression. A missing
        property value indicates that the (optional) property shall be deleted.

		Reference		
        		OGC 07-006r1: cl. 10.11.3.3



		OGC 07-110r3: cl. 15.2.3







        

		Test type		Capability






ATC 67: Modify slots

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Transaction-Update-Slots

		Test purpose		Check that the SUT correctly processes a request
        to modify one or more slots of a specified registry object.


        Precondition

//ows:Operation[@name='Transaction']



        

		Test method		
        The csw:Update statement includes a list of rim:ObjectRef elements that
        identify the registry objects to be modified. A slot is deleted
        by supplying an empty rim:ValueList element.

		Reference		
        		OGC 07-110r3: cl. 15.2.3







        

		Test type		Capability






ATC 68: Delete registry object

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Transaction-Delete

		Test purpose		Verify that the service under test correctly
        processes a request to delete one or more registry objects subject to
        the specified constraint.


        Precondition

//ows:Operation[@name='Transaction']



        

		Test method		
        A registry object is deleted only if there are no references to that
        object; otherwise the deletion attempt fails. Component registry objects
        are deleted with the owning object.

		Reference		
        		OGC 07-006r1: cl. 10.11.3.4



		OGC 07-110r3: cl. 15.2.4



		ebRIM 3.0: sec. 2.5.2







        

		Test type		Capability






ATC 69: Compound transaction

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/CompoundTransaction

		Test purpose		Confirm that the service under test correctly
        processes a compound transaction request that includes two or more
        insert, update, or delete statements.


        Precondition

//ows:Operation[@name='Transaction']



        

		Test method		
        The transaction statements must be processed in document order. Pass if
        the response is as expected and includes brief representations of all
        objects that were created (if any); fail otherwise.

		Reference		
        		OGC 07-006r1: cl. 10.11.3



		OGC 07-110r3: cl. 15.2.1.







        

		Test type		Capability






ATC 70: Transaction using SOAP messaging framework

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Transaction-SOAP

		Test purpose		Confirm that the IUT correctly processes a transaction
        request that includes a W3C SOAP envelope in accord with the "Request-Response"
        message exchange pattern.


        Precondition


          

		//ows:Operation[@name='Transaction']/ows:Constraint[@name = 'Content-Type']/ows:Value/text() = 'application/soap+xml'; or



		//ows:Operation[@name='Transaction']//ows:Constraint[@name = 'PostEncoding']/ows:Value/text() = 'SOAP'







          



        

		Test method		
        Pass if the content of the response is as expected; fail otherwise.
        The env:Body element must contain either a csw:TransactionResponse element
        or a env:Fault element if an exception occurred while processing the request.


        

		Reference		
        		OGC 07-110r3: cl. 7.9



		OGC 07-006r1: cl. 10.5.4



		OGC 07-006r1: cl. 10.11



		SOAP 1.2, Part 1







        

		Test type		Capability






ATC 71: Harvest OGC service description

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Harvest-OGC

		Test purpose		Verify that the service under test can harvest
        an OGC capabilities document and create the corresponding registry objects.


        Precondition

//ows:Operation[@name='Harvest']



        

		Test method		
        Pass if the Harvest request is processed as expected; fail otherwise.
        The response shall include csw:BriefRecord representations of all registry
        objects created in accord with the mapping rules documented in cl. 12.2
        of the Basic extension package.


        
        The value of the required ResourceType element specifies the namespace
        name of the root element in the capabilities document (see examples below):
        


        		WFS 1.x (ResourceType = "http://www.opengis.net/wfs")



		WMS 1.x (ResourceType = "http://www.opengis.net/wms")



		WCS 1.1 (ResourceType = "http://www.opengis.net/wcs/1.1")







        

		Reference		
        		OGC 07-006r1: cl. 10.12.3



		OGC 07-110r3: cl. 14



		OGC 07-144r3: cl. 12.2







        

		Test type		Capability






ATC 72: Harvest ISO 19139 metadata document

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Harvest-ISO-19139

		Test purpose		Verify that the service under test can harvest an
        ISO 19139 metadata document (ResourceType = "http://www.isotc211.org/2005/gmd")
        and create the corresponding registry objects.


        Precondition

//ows:Operation[@name='Harvest']



        

		Test method		
        Pass if the Harvest request is processed as expected; fail otherwise.
        The response shall include csw:BriefRecord representations of all registry
        objects created in accord with the mapping rules documented in cl. 12.4
        of the Basic extension package.


        

		Reference		
        		OGC 07-006r1: cl. 10.12.3



		OGC 07-110r3: cl. 14



		OGC 07-144r3: cl. 12.4







        

		Test type		Capability






ATC 73: Harvest using SOAP messaging framework

		Identifier		http://www.opengis.net/cat/wrs/1.0/atc/level-2/Harvest-SOAP

		Test purpose		Confirm that the IUT correctly processes a Harvest
        request that includes a W3C SOAP envelope in accord with the "Request-Response"
        message exchange pattern.


        Precondition


          

		//ows:Operation[@name='Harvest']/ows:Constraint[@name = 'Content-Type']/ows:Value/text() = 'application/soap+xml'; or



		//ows:Operation[@name='Harvest']//ows:Constraint[@name = 'PostEncoding']/ows:Value/text() = 'SOAP'







          



        

		Test method		
        Pass if the content of the response is as expected; fail otherwise.
        The env:Body element must contain either a csw:HarvestResponse element or
        a env:Fault element if an exception occurred while processing the request.


        

		Reference		
        		OGC 07-110r3: cl. 7.9



		OGC 07-006r1: cl. 10.5.4



		OGC 07-006r1: cl. 10.12



		SOAP 1.2, Part 1







        

		Test type		Capability










__MACOSX/csw-ebrim-part3/._csw-ebrim-ats.html


csw-ebrim-part3/img/csw-ebrim-specs.png


__MACOSX/csw-ebrim-part3/img/._csw-ebrim-specs.png


__MACOSX/csw-ebrim-part3/._img


__MACOSX/._csw-ebrim-part3

