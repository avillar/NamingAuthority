
 

Open Geospatial Consortium 
Date: 2010-12-11 

Internal reference number of this document: OGC 10-191r1 

Category: OpenGIS® Discussion Paper 

Editors: Claus Nagel, Thomas Becker, Robert Kaden, Ki-Joune Li, Jiyeong Lee, Thomas H. Kolbe 

 
Requirements and Space-Event Modeling  

for Indoor Navigation 
 

How to simultaneously address route planning,  
multiple localization methods, navigation contexts,  

and different locomotion types 
 
 

Copyright © 2010 Open Geospatial Consortium.  
To obtain additional rights of use, visit http://www.opengeospatial.org/legal/. 

 
Warning 

This document is not an OGC Standard. This document is an OGC Discussion Paper and is therefore not an 
official position of the OGC membership. It is distributed for review and comment. It is subject to change 
without notice and may not be referred to as an OGC Standard. Further, an OGC Discussion Paper should 
not be referenced as required or mandatory technology in procurements. 

 
 
 
Document type:  OpenGIS® Discussion Paper 

Document subtype:   

Document stage:  Approved for Public Release 

Document language:  English 



OGC 10-191r1 

 
Copyright © 2010 Open Geospatial Consortium               1 

Contents 
 

i.	   Preface ........................................................................................................................ 3	  
ii.	   Submitting organizations .......................................................................................... 3	  
iii.	   Participants in development ..................................................................................... 3	  
iv.	   Revision history ......................................................................................................... 4	  
0	   Introduction ............................................................................................................... 6	  
1	   Scope ........................................................................................................................... 8	  
2	   Conformance ............................................................................................................. 8	  
3	   Normative references ................................................................................................ 8	  
4	   Conventions ............................................................................................................... 9	  

4.1	   Abbreviated terms .............................................................................................. 9	  
4.2	   UML Notation .................................................................................................. 10	  
4.3	   XML-Schema ................................................................................................... 10	  

5	   Requirements for an Indoor Navigation Standard .............................................. 11	  
5.1	   Support of Different Navigation Contexts ....................................................... 11	  

5.1.1	   Multiple and Different Localization Methods and Infrastructures ................................ 11	  
5.1.2	   Multiple and Different Modes of Locomotion .............................................................. 12	  
5.1.3	   Logical Navigation Constraints ..................................................................................... 12	  
5.1.4	   Support for Dynamic Aspects ....................................................................................... 12	  

5.2	   Modeling of Interior Spaces ............................................................................. 13	  
5.2.1	   Compatibility to Existing 3D Building Models ............................................................ 13	  
5.2.2	   Hierarchical Grouping of Spaces .................................................................................. 13	  
5.2.3	   Mathematically Sound Framework ............................................................................... 13	  

5.3	   Practical Considerations ................................................................................... 13	  
5.3.1	   One Storage and Exchange Format Covering all Processing Steps .............................. 13	  
5.3.2	   Extensibility ................................................................................................................... 14	  

6	   Theoretical Background ......................................................................................... 15	  
6.1	   Geometric Modeling of Buildings and their Interiors ...................................... 15	  
6.2	   Topological Modeling of Buildings and their Interiors .................................... 16	  
6.3	   The Notion of Cellular Space ........................................................................... 17	  
6.4	   Semantic Modeling of Buildings and their Interiors ........................................ 18	  

7	   Related Work ........................................................................................................... 19	  
7.1	   Representing Indoor Spaces Using the Node-Relation-Structure .................... 19	  

7.1.1	   The Node-Relation-Structure (NRS) ............................................................................. 19	  
7.1.2	   Poincaré Duality ............................................................................................................ 20	  

7.2	   Combining Cells and Sensor Space in Navigation Systems ............................ 20	  
7.3	   Indoor Navigation in OWS-6 ........................................................................... 22	  



OGC 10-191r1 

 
Copyright © 2010 Open Geospatial Consortium               2 

8	   Proposed Indoor Navigation Model ...................................................................... 23	  
8.1	   Structured Space Model ................................................................................... 23	  

8.1.1	   Topographic Space Layer .............................................................................................. 24	  
8.1.2	   Sensor Space Layer ....................................................................................................... 27	  

8.2	   Multilayered Space Model ............................................................................... 28	  
8.3	   Multilayered Graph and Joint State of Navigation ........................................... 29	  
8.4	   Subspacing and Hierarchical Grouping of Spaces ........................................... 31	  
8.5	   Context as Selection Criterion .......................................................................... 32	  
8.6	   Example for the Application of the Proposed Indoor Navigation Model ........ 33	  

9	   Development of a Framework for Indoor Navigation ......................................... 37	  
10	   Data Model of the Multilayered Space Model ...................................................... 39	  
Annex A (normative)  XML Schema Definition ............................................................. 41	  
Annex B (informative)  Example XML instance document .......................................... 45	  
Bibliography ....................................................................................................................... 53	  

 



OGC 10-191r1 
 
 

 
Copyright © 2010 Open Geospatial Consortium                3 

i. Preface 

This OpenGIS® Discussion Paper presents a Multilayered Space-Event Model for indoor navigation which 
simultaneously addresses route planning, multiple localization methods, navigation contexts, and different 
locomotion types. The paper contains the corresponding data models as well as their encoding in GML 3.1.1 
which at first address a fundamental framework for navigation. To facilitate the development of a complete 
indoor navigation standard on top of this framework, the concepts introduced in this paper will be augmented in 
the future. This document is meant to serve as a basis for both discussion and development of an OGC Standard 
on Indoor Navigation.  

The research and development presented in this paper has been carried out within the Indoor Spatial Awareness 
(ISA) project. The ISA project is a R&D project funded by the Ministry of Construction and Transportation, 
Korea which has been launched in November 2007. ISA is an internal collaboration project with partners from 
academia and industry in South Korea, USA, Germany, and Denmark. 

The concepts for deriving a network topology model from a 3D CityGML building model based on a subdivision 
of rooms into smaller cells as introduced in “OWS-6 Outdoor and Indoor 3D Routing Services Engineering 
Report” (OGC Doc. No. 09-067r2) have been considered in the development and are fully covered by the Multi-
layered Space Model proposed in this Discussion Paper. 

This paper documents the developments that have been presented at OGC 3DIM DWG over the last 18 months. 
Some of the presentations can be obtained from the OGC Portal at the following URLs: 

 June 2009, 3DMIN face-to-face meeting in Boston-MIT:  
http://portal.opengeospatial.org/files/?artifact_id=34587 

 December 2009, 3DIM face-to-face meeting in Mountain View:  
http://portal.opengeospatial.org/files/?artifact_id=36918 

 September 2010, 3DIM face-to-face meeting in Toulouse:  
http://portal.opengeospatial.org/files/?artifact_id=41027 
http://portal.opengeospatial.org/files/?artifact_id=41079 

Suggested additions, changes, and comments on this draft Discussion Paper are welcome and encouraged. Such 
suggestions may be submitted by email message or by making suggested changes in an edited copy of this 
document. 

ii. Submitting organizations 

This Discussion Paper was submitted to the Open Geospatial Consortium Inc. by the following organizations: 

 Institute for Geodesy and Geoinformation Science, Technische Universität Berlin 

 Department of Geoinformatics, University of Seoul, Korea 

 Department of Computer Science and Engineering, Pusan National University, Korea 

iii. Participants in development 

Name Institution Email 
Claus Nagel, 
Thomas Becker, 
Robert Kaden, 
Thomas H. Kolbe 

Institute for Geodesy and Geoinformation 
Science, Technische Universität Berlin, 
Germany  

claus.nagel@tu-berlin.de 
thomas.becker@tu-berlin.de 
robert.kaden@tu-berlin.de 
thomas.kolbe@tu-berlin.de 

Jiyeong Lee, 
Inhye Park 

Department of Geoinformatics, University of 
Seoul, Korea 

jlee@uos.ac.kr 
ihpsm@uos.ac.kr 

Ki-Joune Li Department of Computer Science and 
Engineering, Pusan National University, 
Korea 

lik@pnu.edu 



OGC 10-191r1 
 
 

 
Copyright © 2010 Open Geospatial Consortium                4 

iv. Revision history 

Date Release Editor Description 

2010-11-11 0.1.0  Nagel, Becker, 
Kaden, Kolbe 

First draft version 0.1.0 of the document 

2010-11-28 0.1.0 Nagel, Becker, 
Kaden, Kolbe 

Minor editorial changes to the document structure and introduction 
of an example for the application of the Multilayered Space-Event 
Model 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 



OGC 10-191r1 
 
 

 
Copyright © 2010 Open Geospatial Consortium                5 

Foreword 

Attention is drawn to the possibility that some of the elements of this document may be the subject of patent 
rights. The Open Geospatial Consortium Inc. shall not be held responsible for identifying any or all such patent 
rights.  

Recipients of this document are requested to submit, with their comments, notification of any relevant patent 
claims or other intellectual property rights of which they may be aware that might be infringed by any imple-
mentation of the standard set forth in this document, and to provide supporting documentation. 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                6 

0 Introduction 

Over the last decade, personal navigation systems became an established tool for route planning and guidance of 
individual traffic using cars and other vehicles. From the technical aspect this was made possible mainly due to 
the availability of global localization techniques like GPS on the one side and the acquisition and provision of 
the road network for large parts of the world on the other side. Pedestrian navigation systems are not as success-
ful as car navigation systems yet. The crucial point is that pedestrians can freely move inside and outside of 
buildings, but satellite localization still only works outdoor and information about navigation space is mainly 
available for the outdoor environment so far. However, indoor navigation would be helpful for finding locations 
like shops, police, rest rooms, or (check-in) counters inside of airports, shopping malls, or public buildings. In an 
emergency response situation indoor navigation could provide escape routes from buildings and fastest routes for 
rescue personnel to a disaster area. 

In general, navigation comprises 1) the determination of the location of a subject or object, 2) the determination 
of the best path (often the fastest, the shortest, or the cheapest) from a start to an end location, and 3) guidance 
along the path which includes monitoring of the difference between the current position and the path and en-
forcement of appropriate actions to minimize the difference. To facilitate a navigation system, consistent geoin-
formation about the navigable indoor space including lists of localities, e.g. named places and their coordinates, 
and navigable route sections need to be available. An appropriate localization infrastructure or technology has to 
be included to determine the current position and (usually) orientation as well as to perform tracking of moving 
subjects or objects. Navigation requires spatial reference systems which typically include the spatial reference of 
the localization method which might be a local or world coordinate system as well as the natural spatial refer-
ence system of the user for naming of start and end points. The latter one is often not a coordinate system but e.g. 
addresses or points of interest. Finally, methods for position and route communication are required. 

Indoor navigation highly depends on context and requires flexible data structures to support the many use cases 
and configurations. For example, an indoor navigation system must cope with different and varying localization 
techniques and infrastructures. Each technology requires different installations and different capabilities of the 
mobile end-user devices. Also physical constraints from the built-up environment, different modes of locomotion 
(like walking, driving, or flying), and thematic or logical restrictions like security zones have to be considered. 
Each of these constraints requires a specific and separate partitioning of indoor space into navigable and non-
navigable areas which directly influence the derivation of a navigable route network for a given context of 
navigation.  

In the past, different models for structuring indoor space and localization methods have been proposed. In most 
cases space is partitioned only due to route planning and addressing criteria. Often localization technology and 
sensor characteristics are mixed within these models which has the disadvantage that changes to the building 
structure or sensor configurations may affect the entire model. For example, changes to room topology (e.g., a 
door will be closed permanently or a new door will be installed within a wall) does not necessarily have an 
impact on the localization infrastructure like Wi-Fi access points or RFID sensors and vice-versa. Furthermore, 
these models usually restrict the navigation context to one or a limited subset of possible configurations. Alt-
hough they are well-suited for their fixed and specific configuration, the proposed models lack the flexibility to 
support additional configurations such as additional modes of locomotion, different sensors, etc. 

From this we can conclude the following minimum requirements for a flexible data model supporting indoor 
navigation: 

 Support for different and multiple localization methods/infrastructures  
This includes support for arbitrary indoor sensor technologies and their abstraction, e.g. WiFi, RFID, 
Bluetooth, or Infrared as well as support for the ad-hoc selection of technologies used by the portable 
end-user device. 

 Support for different navigation contexts  
The navigation context comprises the type of locomotion, navigation constraints according to different 
criteria (e.g.: topographic/geometric constraints, such as door widths, opening directions of doors, zonal 
constraints such as security zones, or temporal access constraints such as opening hours) and the sup-
ported localization technique. 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                7 

 3D topographic representation of the interior built environment  
This is required for route planning and derivation of navigable route section from a model of the indoor 
built-up space. The representation should avoid duplicating existing concepts and, thus, should be com-
plementary to existing standards like CityGML, IFC, X3D, ESRI BISDM, etc.  

 

This talk will present a Multilayered Space-Event Model for indoor navigation meets addresses these require-
ments and which simultaneously addresses route planning, multiple localization methods, navigation contexts, 
and different locomotion types. 



OpenGIS® Discussion Paper OGC 10-191r1 

 

 
Copyright © 2010 Open Geospatial Consortium                8 

REQUIREMENTS AND SPACE-EVENT MODELING FOR INDOOR NAVIGATION 
 
How to simultaneously address route planning, multiple localization methods, naviga-
tion contexts, and different locomotion types  
 

1 Scope 

This OpenGIS® Discussion Paper presents a Multilayered Space-Event Model for indoor navigation which 
simultaneously addresses route planning, multiple localization methods, navigation contexts, and different 
locomotion types. The paper contains the corresponding data models as well as their encoding in GML 3.1.1. 

2 Conformance  

XML files must be validated against the XML Schema document provided in the normative Annex A and fulfill 
all further rules and requirements given in this OpenGIS® Discussion Paper. 

3 Normative references 

The following referenced documents are indispensable for the application of this OpenGIS® Discussion Paper.  

 

ISO 8601:2004, Data elements and interchange formats – Information interchange Representation of dates and 
times 

ISO/TS 19103:2005, Geographic Information – Conceptual Schema Language 

ISO 19105:2000, Geographic information – Conformance and testing 

ISO 19107:2003, Geographic Information – Spatial Schema 

ISO 19109:2005, Geographic Information – Rules for Application Schemas 

ISO 19111:2003, Geographic information – Spatial referencing by coordinates 

ISO 19115:2003, Geographic Information – Metadata 

ISO 19123:2005, Geographic Information – Coverages 

ISO/TS 19139:2007, Geographic Information – Metadata – XML schema implementation 

OpenGIS® Abstract Specification Topic 0, Overview, OGC document 99-100r1 

OpenGIS® Abstract Specification Topic 5, The OpenGIS Feature, OGC document 99-105r2 

OpenGIS® Abstract Specification Topic 8, Relations between Features, OGC document 99-108r2 

OpenGIS® Abstract Specification Topic 10, Feature Collections, OGC document 99-110 

IETF RFC 2396, Uniform Resource Identifiers (URI): Generic Syntax. (August 1998) 

W3C XLink, XML Linking Language (XLink) Version 1.0. W3C Recommendation (27 June 2001) 

W3C XMLName, Namespaces in XML. W3C Recommendation (14 January 1999) 

W3C XMLSchema-1, XML Schema Part 1: Structures. W3C Recommendation (2 May 2001) 

W3C XMLSchema-2, XML Schema Part 2: Datatypes. W3C Recommendation (2 May 2001) 

W3C Xpointer, XML Pointer Language (XPointer) Version 1.0. W3C Working Draft (16 August 2002) 

W3C XML Base, XML Base, W3C Recommendation (27 June 2001) 

W3C XML, Extensible Markup Language (XML) 1.0 (Second Edition), W3C Recommendation (6 October 2000) 

 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                9 

4 Conventions 

4.1 Abbreviated terms 

The following abbreviated terms are used in this document: 

2D Two Dimensional 

3D Three Dimensional 

AEC Architecture, Engineering, Construction 

B-Rep Boundary Representation 

CAD Computer Aided Design 

CAAD Computer Aided Architectural Design 

CSG Constructive Solid Geometry 

DXF Drawing Exchange Format 

FM Facility Management 

GDF Geographic Data Files 

GML Geography Markup Language 

IAI International Alliance for Interoperability 

IFC Industry Foundation Classes 

ISO  International Organization for Standardization 

OGC  Open Geospatial Consortium 

TC211 ISO Technical Committee 211 

UML  Unified Modeling Language 

URI  Uniform Resource Identifier 

W3C World Wide Web Consortium 

XML  Extensible Markup Language 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                10 

4.2 UML Notation 

The data model specification is presented in this document in diagrams using the Unified Modeling Language 
(UML) static structure diagram (cf. [23]). The UML notations used in this standard are described in the diagram 
below (Fig. 1). 

 
Fig. 1: UML notation (cf. ISO TS 19103, Geographic information - Conceptual schema language). 

The following stereotypes are used: 

<<Geometry>> represents the geometry of an object. The geometry is an identifiable and distinguishable object 
that is derived from the abstract GML type AbstractGeometryType. 

<<Topology>> represents the topology of an object. The topology is an identifiable and distinguishable object 
that is derived from the abstract GML type AbstractTopologyType. 

<<Feature>> represents a thematic feature according to the definition in ISO 19109. A feature is an identifiable 
and distinguishable object that is derived from the abstract GML type AbstractFeatureType. 

<<Enumeration>> enumerates the valid attribute values. 

4.3 XML-Schema 

The normative parts of the specification use the W3C XML schema language to describe the grammar of con-
formant data instances. XML schema is a rich language with many capabilities. While a reader who is unfamiliar 
with an XML schema may be able to follow the description in a general fashion, this specification is not intend-
ed to serve as an introduction to XML schema. In order to have a full understanding of this Discussion Paper, it 
is necessary for the reader to have a reasonable knowledge of XML schema. 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                11 

5 Requirements for an Indoor Navigation Standard  

Indoor navigation faces a large number of challenges that differ from well established outdoor navigation meth-
ods. Absolute positioning and localization methods like GPS are usually not available in indoor environments. 
Route planning requires geoinformation about the interior navigable space of buildings. The navigable space 
may not only reflect the physical built environment but has to consider the mode of locomotion of the moving 
subject or object and logical navigation constraints such as security zones and opening hours. Spatial reference 
systems are required both for the localization method and for the end-user. Whereas the former might be a locale 
or world coordinate system, the latter is rather a natural spatial reference system which is used, e.g., for naming 
of route start and end points. The communication of the current position and of routing commands poses further 
challenges.  

In the following subsections of this chapter, mandatory requirements are deduced from these challenges which 
have to be addressed and answered by any proposals and approaches aiming at establishing an Indoor Navigation 
Standard. Based on this discussion, a novel and generic Multilayered Space-Event Model is introduced in the 
further course of this Discussion Paper which meets these requirements and thus forms the basis and a general 
framework for an Indoor Navigation Standard.    

5.1 Support of Different Navigation Contexts 

Indoor navigation comprises route planning as well as localization and tracking of moving subjects or objects 
within interior built environments. Both aspects of indoor navigation depend to a great extent upon the context of 
navigation which is constituted by three main factors. A first factor is the mode of locomotion of the moving 
subject or object such as walking, driving (e.g. using a wheel chair, mobile robots), or even flying (e.g., quad-
rocopter), which defines and restricts the navigable topographic space. Second, the context of navigation is 
determined by logical contexts representing pre-knowledge or navigation constraints which result from specific 
application domains. The third factor is the localization technique and the localization infrastructure. Amongst 
others, this comprises the methods used for localization and tracking, the positioning and ranges of sensors and 
transmitters, and the technical characteristics and capabilities of end-user devices.  

The support of different contexts of navigation leads to a configuration problem with a high degree of combina-
torial complexity. Current models for indoor navigation often reduce this complexity by tailoring the context of 
navigation to either one specific configuration or a limited subset. The interior built environment is partitioned 
due to one mode of locomotion and the corresponding route planning and addressing criterions and considering a 
given localization technology and its sensor characteristics. Often a geometric route network for indoor naviga-
tion is proposed, which maps the resulting subdivisions of indoor space to a graph structure representing topo-
logical connectivity. Further navigation relevant aspects of the fixed navigation configuration are introduced into 
this graph as a set of homogenous attributes for nodes and edges. While these approaches are well suited for a 
single configuration, they lack the flexibility to support multiple contexts such as additional modes of locomo-
tion or different localization techniques. Thus, the support for multiple and different navigation contexts is an 
essential requirement for a general indoor navigation standard. 

5.1.1 Multiple and Different Localization Methods and Infrastructures 

The localization of moving subjects and objects is one of the key issues of indoor navigation as there is no 
absolute positioning method such as GPS available so far. Current approaches usually apply specialized solu-
tions and configurations tailored to their specific application scenario based on sensor technologies such as 
Barcodes, Radio Frequency ID (RFID), Infrared Beacons, Ultrasound, Bluetooth, Wireless LAN (WiFi) and 
Pseudo-GPS (Pseudolites). Even though these sensors are different, most of them have comparable spatial 
characteristics, e.g. visibility area, coverage area or signal propagation. The absolute position of portable devices 
can be derived from the locality of sensors or transmitters, their covered areas and the observed signals and 
signal strength. The uncertainty is equal to the size of the respective area of a unique signal constellation. Each 
technology requires different installations in indoor environments and capabilities of the end-user devices. With 
the increasing number of available sensor technologies, the degree of combinatorial complexity of the navigation 
context is increasing as well. 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                12 

An indoor navigation standard must support multiple and different localization methods and infrastructures 
based on arbitrary indoor sensor technologies. Furthermore, the ad-hoc selection and combination of technolo-
gies used by the portable end-user device must be supported. This requires the abstraction from concrete sensor 
technologies in order to allow for their integrated representation in a common model.  

5.1.2 Multiple and Different Modes of Locomotion 

Geoinformation about the interior built environment is nowadays available through semantic 3D city and build-
ing models, such as CityGML or IFC, which provide the geometry and the thematic differentiation of indoor 
structures and areas. This thematic differentiation is already suitable for addressing, route descriptions, and route 
tracking (homing), e.g. by room numbers. The derivation of navigable spaces and corresponding route networks, 
however, requires further partitioning of the built indoor space according to the mode of locomotion, e.g. walk-
ing, driving, and flying. Each mode of locomotion may lead to a specific and separate partitioning of indoor 
topographic space into navigable and non-navigable areas. Thus, for different modes of locomotion the resulting 
navigable areas may be disjoint, overlapping or equal.  

For example, the navigable space for persons using a wheel chair may not include areas and obstacles which are 
inaccessible by a wheel chair, such as stairs, steps or narrow passages. Since those areas may, however, be 
accessible for pedestrians, the navigable and non-navigable spaces for different types of locomotion have to be 
modeled separately from each other. An indoor navigation standard must support multiple and different repre-
sentations of navigable spaces according to various modes of locomotion as well as the selection of the appropri-
ate representation for the individual navigation context of a moving subject or object. 

5.1.3 Logical Navigation Constraints 

In addition to the mode of locomotion, the derivation of navigable route sections is also strongly affected by 
thematic or logical constraints and restrictions. For example, security zones or evacuation areas denote logical 
spaces within buildings which influence the accessibility of indoor areas such as rooms or hallways. Navigation 
constraints may result from different criteria, e.g. topographic/geometric (door widths, opening direction of 
doors, etc.), zonal (security zones, fire detector areas, etc.), or temporal access constraints (opening hours, etc.). 
Although logical spaces may lead to a further partitioning of the navigable space denoted by the mode of loco-
motion, their spatial extent does not necessarily has to follow the physical built structure of the interior environ-
ment. For example, a security zone may split a single room into accessible and non-accessible parts, and may 
even affect outdoor areas around the building. Furthermore, navigation constraints can vary according to the 
individual context of navigation. For example, security staff members usually have access permission to interior 
areas which are not accessible for other persons.  

An indoor navigation standard has to support logical navigation constraints. They should be represented inde-
pendently from the topographic interior space as changes of the interior built environment not necessarily have 
an impact on their spatial extent. Finally, the context-dependent selection of navigation constraints must be 
supported. 

5.1.4 Support for Dynamic Aspects 

Logical spaces may describe temporal and dynamic phenomena, e.g. areas covered by fire detectors which 
temporally affect the navigable space in case of a fire emergency. An active fire detector indicates a fire incident 
for its monitored area. This, however, may lead to two different navigation scenarios. The first is to navigate fire 
fighter forces to the fire spot, whereas the second aims as determining escape routes avoiding the dangerous area 
in order to evacuate the building. As soon as the fire has been fought, the fire detector will become inactive again 
giving general access to its monitored area.  

Such temporal restrictions in navigable space require a flexible model, especially if the temporal restriction 
causes ad-hoc changes of the navigation context. For example, the determination of escape routes for immediate 
evacuation in case of a fire emergency may additionally require the deregulation of access restrictions due to 
security zones. The support of dynamic aspects and corresponding flexible models are essential requirements for 
an indoor navigation standard.  



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                13 

5.2 Modeling of Interior Spaces 

5.2.1 Compatibility to Existing 3D Building Models 

Semantic models for the representation of 3D topographic indoor space nowadays become increasingly available 
in the context of Building Information Modeling (BIM) and in the field of 3D city modeling. An indoor naviga-
tion standard must be complementary to these existing data models and standards, such as OGC CityGML [10, 
11], IFC [12], X3D, or ESRI BISDM, in order to avoid duplicating existing concepts for the representation of 
interior built environment. Also referencing or embedding of the original 3D building models given in one of 
these formats should be supported. The indoor navigation standard should however not be restricted to 3D 
models; it should also be open for 2D floor plans.  

5.2.2 Hierarchical Grouping of Spaces 

Current standards for semantic building models often employ a hierarchical aggregation concept which allows 
for the semantic and geometric decomposition of a building into storeys which again are decomposed into rooms 
and hallways. This aggregation hierarchy and decomposition of features into smaller parts reflects the structural 
and spatial assembly of the built environment. Beyond the physical built structure, rooms may further be subdi-
vided due to specific aspects of the navigation context such as the mode of locomotion or logical navigation 
constraints, but may also be induced by limited propagation areas of sensor-based positioning systems. This 
leads to sub-spacing the topographic space into even smaller parts. For example, the navigable space for driving 
subjects or objects such as wheel chair users or mobile robots is a subset and finer grained partitioning of the 
topographic space which neglects obstacles such as stairs, steps, or narrow passages. And although an L-shaped 
hallway might be entirely accessible for mobile robots, a further subdivision into smaller parts could be required 
in order to derive geometric trajectories between these parts which can be automatically followed by autonomous 
mobile robots. So different topographical and logical decompositions may constitute different subsets of a room 
and therefore a separation into hierarchical grouped layers is reasonable. 

Also routing algorithms often employ hierarchical strategies. When querying a route, the algorithm has to first 
search for the correct building before it considers the layer of the building storeys. Once the correct storey is 
determined, its decomposition into rooms and even further subspaces is taken into account. Therefore, an indoor 
navigation standard has to support hierarchical grouping of spaces in order to facilitate a separation of spaces due 
to topographical (e.g. modes of locomotion) and logical (e.g. security zones) aspects and the implementation of 
effective routing algorithms.   

5.2.3 Mathematically Sound Framework 

Navigation approaches base on network topology models describing connectivity and adjacency between interior 
spaces such as rooms and hallways. However, a semi-automatic or even manual derivation of the network 
topology from the building topography as proposed by several current approaches faces severe disadvantages 
since it may lead to multiple and different graph structures for even the same interior built environment. An 
indoor navigation standard must therefore be built on top of a mathematically sound framework which defines a 
functional dependency between the representation of building topography (including subspaces and logical 
spaces) and the corresponding topological graph structure denoting adjacency and connectivity. This allows for 
fully automatic derivation of deterministic network topology models with a consistent reproducibility. And 
moreover, a mathematically sound framework with a clear definition of how to derive the network topology 
model from the 3D building topography is a mandatory prerequisite for supporting arbitrary 3D building model-
ing approaches (cf. section 5.2.1).  

5.3 Practical Considerations 

5.3.1 One Storage and Exchange Format Covering all Processing Steps 

The indoor navigation standard shall include a data format which allows storing and exchanging navigation data 
over all processing steps and transferring the data with individual application relevant content to the end-user 
device based on existing OGC standards for the transfer of navigation data. The exchange format must support 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                14 

data storage for selected navigation contexts and the derived routable network sections for different types of 
locomotion. It is required to be flexible for representing different grades of information, e.g. with or without 
original 3D input models.  

5.3.2 Extensibility 

Indoor navigation is subject to multiple influencing factors. New technologies for indoor localization are devel-
oped, additional modes of locomotion might have to be considered, and any kind of knowledge may be modeled 
as logical space restricting the navigable space. Therefore, an indoor navigation standard has to be extensible in 
order to meet future requirements. This comprises an extension mechanism to augment the standard in order to 
model and exchange data which is not yet covered (cf. CityGML’s Application Domain Extension mechanism). 
But it also addresses a future integration with outdoor navigation in order to define a general framework for 
seamless navigation in indoor and outdoor spaces.  



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                15 

6 Theoretical Background 

6.1 Geometric Modeling of Buildings and their Interiors 

Every relevant topographic object of building space has a shape, extent, position and appearance that can be 
measured and modeled. The abstraction of the real world can be described by geographical features having a 3-
dimensional geometrical representation in the metrical space IR3. Using the concepts of metrics and metric 
spaces the geometry provides the means for the quantitative description of the spatial characteristics of features. 

A metric space is defined as [18]: 

Let X be a set and d a real value. A mapping IRXXd →×:  is called a metric, if for all elements x, y and z 
from X the following axioms are fulfilled:  
 

 d(x, y) = 0; if and only if y = x 

 d(x, y) = d(y, x) 

 d(x, y) + d(y, z) ≥ d(x, z)   (Triangle inequality, for x, y, z in X) 

 d(x, y) ≥ 0 
 

Then, d is said to be a metric on X; (X, d) is called a metric space and d(x, y) is referred as the distance between 
x and y. 

The international standard for geographic information (ISO19107 [1]) provides conceptual schemas to describe 
and model real world objects as features. The included geometry package contains various classes for coordinate 
geometry. The mathematical functions which are used for describing the geometry of an object depend on the 
type of coordinate reference system which is used to define the spatial position.  

A subset of the metric space is the well known Euclidean Space. The Euclidean space is a metrical space with 
the Euclidean distance as a metric. In the general case of the n-dimensional space IRn, the Euclidean distance is 
defined between two points or vectors by the Euclidean norm of the difference vector between these points. If 

( ) ( )1 1, , , ,n nx x x and y y y= =K K  are two points of an n-dimensional space,: 

( ) ( ) ( ) ( )2 2 21 12
1

,
n

n n i i
i

d x y x y x y x y x y x y
=

= − = − = − + + − = −∑L   

is the Euclidian metric on this n-dimensional space [18]. 

The Euclidean Space is used to model real world objects like buildings and their interiors in the field of CAD 
(Computer Aided Design), computer graphic, IFC (Industry Foundation Classes [12]) or CityGML [10], by using 
cartesian coordinates. CAD systems mostly use the Constructive Solid Geometry (CSG) to represent complex 
geometrical objects (Solids). Complex solid objects are represented as Boolean combination (union, intersection 
and difference) of simpler objects (primitives) such as cylinders, cones, spheres, pyramids or cubes. In contrast 
to CSG, 3D objects modeled in Boundary Representation (B-rep), e.g. as it is realized in CityGML [10], are 
geometrically represented by its boundary surface in IR3 [cf. fig. 2]. Using geometric primitives, such as vertices, 
edges, and faces, allows more flexibility for modeling irregular geometric objects.  

The interior rooms of a building are represented as volumes in Euclidean space (3D à IR³) by boundary repre-
sentation.  
 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                16 

Geometrical- topological modeling of 
volumes by CW-Complexes
3-Cell: Solid

2-Cell: Face

1-Cell: Edge

0-Cell: Node

⊂⊂
⊂⊂

⊂⊂
⊂⊂

⊂⊂
⊂⊂

 
Fig. 2: Representation of a 3D-Solid by B-Rep in Geometry and by CW-Complexes in Topology 

Since the Euclidean space is a metric space, a natural topology such as neighborhood, interior, outer and bounda-
ry is induced. In case of transforming geographic information from one geodetic reference or coordinate system 
to another, only geometry will be changed. Topology represents an invariant structure with respect to transfor-
mations. 

6.2 Topological Modeling of Buildings and their Interiors 

Geometric calculations such as point-in-polygon strategies, adjacency and boundary are computationally inten-
sive. Therefore, combinatorial structures, known as topological complexes, are constructed. Computational 
topology provides information about the connectivity of geometric primitives that can be derived from its corre-
sponding geometry. The introduction of a topology allows a unique interpretation of position relations like “near 
by” and ”tends to” on quite general structures. 

A topological space is a set X consisting of subsets T (called open sets) from X, if the following axioms are 
fulfilled: 

 The empty set and the basic set X are open sets. 

 The intersection of any finite open sets is an open set. 

 The union of any open sets is an open set. 

A set X together with a topology T on X is called topological space (X, T) [8], [18] 

Within a topological space every point x has a filter U (x) of surroundings. 

A subset U of a topological space (X, T) is called surrounding of the point x X∈ , if an open set O with 
x O U∈ ⊆ exists. Therefore the concept “Near by” can be specified mathematically. An open subset U X⊆  
which contains x is called (open) surroundings from x. The open surroundings determine the topology (that is the 
family O of the open sets): a set is open if it contains surroundings to each of its points. 

Examples: 

1. The IR n  is a  topological space, with its topology 

( ){ }xofxBgsurroundinaUcontainsUxeachforIRUT n εε −∈⊆= ::  
2. Is (X, d) a metrical space, so is 

( ){ }
:  for each  there is a 0

:
: , Ud

U X x U
T

with x X d x y
ε

ε

⊆ ∈ >⎧ ⎫⎪ ⎪
= ⎨ ⎬

∈ < ⊆⎪ ⎪⎩ ⎭
 

a topology. Td is referred to as the topology induced by the metric d, and (X, T) is called the induced 
topological space [18]. 

 
The topological model is closely related to the representation of spatial relationships among objects in geograph-
ic phenomena. As mentioned before, the geographic phenomena (features) are mostly geometrically represented 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                17 

in Euclidean space by Cartesian coordinates in IR3 and this metric space induces a natural topology. Therefore, 
the metric defines relationships like adjacency, interior, outer, and boundary between objects, e.g. spaces relating 
to a building. To describe those topological relations, e.g. closure, interior, boundary, separated, and connected, 
in conjunction with Euclidean distances, the concept of CW-complexes [8] can be applied. The concept bases on 
a so called n-cell classification where n denotes the dimension of the cell. 0-cell represents a vertex, 1-cell a line 
or edge, 2-cell represents a face and 3-cell is a solid [cf. fig. 3]. The cells do not need to have the same size but 
they will all be of some limited range of sizes according to the used granularity of space.  

 

e1= f1∩ f2

e 2
= 

f 1∩
f 3

e 3=
 f 2∩

f 3

n
1= f1∩ f2∩ f3

 
Fig. 3: Topology derived from geometry objects 

A conceptual schema for this purpose is defined in the topology package of ISO 19107. The topological system 
of ISO 19107 is based on algebraic manipulations of multivariate polynomials. The package is defined in a way 
that geometric problems can be translated from geometric part into algebraic problems in the topology part. 
Problems can be solved in the topology domain and then translated back.  

The most essential information in case of navigation is topology specifying adjacency and connectivity between 
objects. The most 3D data models such as CityGML or IFC do not employ the topology package of ISO 19107 
due to its complexity. However, a solution for getting the topological structure of those models is to derive the 
topological relationships between objects from their geometrical representation [cf. fig. 3]. This can be done by 
using the induced natural topology of objects represented in boundary representation (i.e. the result of an inter-
section of two faces is an edge). In order to implement topology, CityGML uses the XML concept of XLinks 
provided by GML. The XLink topology is simpler to implement than the topology package of ISO 19107, but a 
query to detect topologically connected objects can only be performed in one direction. Nevertheless, it is 
possible to derive an ISO 19107 topology model from such a CityGML dataset. 

6.3 The Notion of Cellular Space 

In semantic 3D building models, spaces within buildings are modeled by non-overlapping room objects (cf. [10, 
11]). This representation of indoor environment is suitable for the derivation of a room-to-room connectivity 
graph. However, Lorenz [2] and Lefebvre [5] propose a more differentiated decomposition of the semantic room 
entities. The room itself is geometrically fragmented into so-called cells, which again represent non-overlapping 
parts of the room. In the context of navigation, the concept of cells is often used but there is no valid definition 
for cells or cellular space in matters of navigation purposes. Other valid definitions of cells in context of other 
fields of sciences have been considered in order to increase the understanding: 

 In biology a cell is the structurally smallest visible unit of living being and shows an independent, self-
preserving, separately system in itself. It contains for its functions and activities all necessary infor-
mation [16]. The “topological” relations between cells in biology are that they are only adjacent, do not 
overlap and are not disjoint.  

 In the mobile radio technology a cell represents the smallest geographical radio supply area of a radio 
network. The cells are differentiated into picocells, microcells, and macrocells according to the cover-
age area of the radio signal transmitted by a radio mast [17]. In contrast to cells in biology, cells in mo-
bile radio may overlap. Mostly, if two radio masts are adjacent their reception areas overlap. For simpli-
fying the reception areas of two radio masts they are considered as a cell and two adjacent cells have 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                18 

one bounding border (edge). A further possible relation between two radio cells is a disjoint one, if a 
gap between them exists.  

 In the field of robotics one of the main problem is robot motion planning. The emphasis is on providing 
the robot and its programmer with a basis for a path planning system. Therefore the free space is parti-
tioned into cells. These cells are represented as nodes and stored in a connectivity graph. Within mobile 
robotics systems a cell represents the structurally smallest unit of the topographic space, in such a kind 
that the union of all cells located in a space arise again a space [16]. The solid object is decomposed in-
to cells of different size or shape. The cells (e.g. Voronoi cells) can have the same shape like tetrahedra 
or be arbitrary polyhedra [20]. Unlike the relations between mobile radio cells, in fields of mobile ro-
botics cells do not overlap and are not disjoint. They touch each other in such a way that all cells locat-
ed in a space arise again a space.  

 In topology a cell is a topological space homeomorphic to a simplex or equally to a ball. The standard 
models used in cellular topology to describe cells are balls and balloons. Bn is the unit ball of dimension 
n and the boundary of Bn is the sphere with dimension n-1. A cell of dimension n is topologically 
equivalent with Bn, and an open cell of dimension n is topologically equivalent with the interior of Bn 
[19]. As mentioned before in section 3, cells in a topological space must not overlap but touch.    

There are quite different definitions and understandings of cells, but they all represent the smallest independent 
structural unit of an overall structure. The Cellular Space itself is composed of cells, which represent the struc-
turally smallest unit of the respective space. Cells can have different sizes or shapes and every cell of the respec-
tive space includes information relevant for the navigation model. Smaller partitions of the topographic space 
according to a semantic decomposition of objects (rooms) provide the necessary means for a more precise indoor 
route planning. The covered space of 3D solid objects of building and sensor space has to be decomposed or 
subdivided into a finite set of partitions, i.e. into 3D elements that will be referred to as Cells. Using Cells allows 
for a closer relation to symbolic representation, as an infinite and unbounded set of points can be now considered 
as a discrete, finite and bounded set. 

6.4 Semantic Modeling of Buildings and their Interiors 

Current and new applications of 3D city and building models like environmental and training simulations, urban 
planning and facility management, disaster management and homeland security, as well as personal (indoor) 
navigation require additional information about buildings besides their spatial and graphical aspects. In particu-
lar, the ontological structure including thematic classes, attributes, and their interrelationships such as specializa-
tion and aggregations hierarchies has to be defined. This semantic modeling allows for the decomposition of 
objects into parts due to logical criteria (and not due to graphical or purely geometrical considerations!) which 
follow structures that are given or can be observed in the real world. For example, a building will be decomposed 
into different (main) building parts, if they have different roof types and their own entrances like a house and the 
garage. The interior areas of each building can be further (hierarchically) partitioned into storeys, as well as 
rooms and hallways. In the context of indoor navigation, this thematic differentiation forms a basis for address-
ing, route descriptions and route tracking (homing), e.g. based on room numbers. Furthermore, it reflects the 
natural spatial reference system of the user of a navigation system for naming of start and end points. 

Nowadays, semantic 3D city and building models, such as the international standards CityGML [11] or IFC [12], 
provide the geometry and the thematic differentiation of buildings and their interior areas. Although CityGML 
and IFC are targeting different scales and the ontology of each semantic model is tailored to different scopes, 
both models agree to a great extent in the notion of a building and its semantic decomposition. For further 
information on CityGML or IFC, please refer to the corresponding specification documents listed in the bibliog-
raphy. 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                19 

7 Related Work 

Substantial work has already been done in the area of indoor navigation. In the following, we give a brief over-
view of current developments on specific systems and underlying information structures needed in order to 
support location services and route planning in indoor environments.  

The OntoNav system [3] describes a semantic indoor navigation system. It proposes an indoor navigation ontol-
ogy which provides semantic descriptions of the constituent elements of navigation paths such as obstacles, 
exits, and passages. Furthermore, specific user capabilities/limitations are modeled allowing for a user-centric 
navigation paradigm and the application of reasoning functionality.  

In the field of mobile robot navigation, Kulyukin et al. [4] present an indoor navigation system for assisting the 
visually impaired. The system is designed as a tool to help visually impaired customers navigate a typical gro-
cery store using a robot shopping cart. For localization, the system relies on RFID tags deployed at various 
locations in the store.  

In order to simplify complex spatial relationships between 3D objects in built environment, Lee [6] introduces a 
topological data model, the Node-Relation-Structure (NRS). The NRS is a dual graph representing the connec-
tivity relationships between 3D entities by Poincaré Duality. In the context of emergency response, Lee et al. [7] 
show the use of this simplified NRS representation of the indoor environment for routing purposes.  

Within the REWERSE project, Lorenz et al. [2, 17] provide an approach for the automated partitioning of the 
building interior not only into rooms, but also into smaller parts, so called cells. The internal structure of the 
building is hence represented as a hierarchical graph enabling localization and route planning on different levels 
of detail. The partitioning is based on the automatic cell-and-portal decomposition of polygonal scenes proposed 
by Lefebvre and Hornus [5].  

Liao et al. [13] propose an approach to track moving objects and their identity in indoor environments. Based on 
a Voronoi graph providing a natural discretization of the environment, the locations of people are estimated 
using noisy, sparse information collected by id-sensors such as infrared and ultrasound badge systems.  

Kolodziej [9] provides a comprehensive overview and discussion of existing technologies and systems in the 
context of indoor navigation. Various approaches and algorithms for indoor localization using different kinds of 
sensor systems are described, which form the basis for Location Based Services (LBS). 

7.1 Representing Indoor Spaces Using the Node-Relation-Structure 

It is assumed that for realizing navigation systems, built environments are represented geometrically in Euclide-
an space, particularly in IR3. Therefore, a building can be described using geometric and topological representa-
tions defined in ISO 19107 [1]. 

7.1.1 The Node-Relation-Structure (NRS) 

Network structure has been used to abstract geographical features such as roads or streams. According to the 
scale of topographic map, area features (e.g. cities, buildings) are represented as nodes and roads are shown as 
edges in the network [24]. Lee [6] adopted the network structure concept to represent topological relationships, 
e.g., adjacency and connectivity relationships, among 3D objects. In the network-based topological representa-
tion, 2D or 3D geographical features are represented as nodes, and the topological relationships among the 
features are represented as edges, which is called Node-Relation Structure (NRS) [6]. The NRS is a dual graph 
structure derived based on three elements, which are Poincaré Duality, graph-theoretical formalisms, and a 
hierarchical network structure [6]. Lee utilized the NRS to develop Combinatorial Data Mode (CDM), which is a 
logical data model to abstract, simplify, and represent the complex topological relationships among 3D spatial 
units in indoor environments, such as rooms within a building [6]. The CDM can be used to find spatial neigh-
bors of a particular feature or spatial unit in a building. As answer to the question “Which other 3D objects are 
located on top or under a particular 3D object?” will provide information about its neighbors, the CDM can be 
very useful in environmentally oriented analyses such as noise or air pollution and emergency situations in 
micro-spatial environments. In order to implement network-based analysis such as optimal routing, allocation, 
tracing and spatial analysis in the CDM, the logical network model needs to be complemented by a geometric 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                20 

network model that accurately represents these geometric properties. A 3D network data model, called Geomet-
ric Network Model (GNM), is developed by transforming the CDM, representing the connectivity relationships 
among 3D objects. A Straight Medial Axis Transformation Algorithm (S-MAT) is applied to perform one key 
step in this transformation [25]. 

7.1.2 Poincaré Duality 

The NRS utilizes the Poincaré Duality in order to simplify the complex spatial relationships between 3D objects 
by a combinatorial topological network model. Solid 3D objects in primal space, e.g., rooms within a building, 
are mapped to vertices (0D) in dual space. The common 2D face shared by two solid objects is transformed into 
an edge (1D) linking two vertices in dual space. Thus, edges of the dual graph represent adjacency and connec-
tivity relationships which may correspond to doors, windows, or walls between rooms, depending on the under-
lying building model concept in primal space. Fig. 4 illustrates this duality transformation. A formal definition of 
the Poincaré Duality is given in Munkres [8]. 
 

Primal Space Dual Spacefrom to

3 dim.

3 dim.

0 dim.

2 dim.1 dim.

0 dim.

1 dim.2 dim.

 
 

Fig. 4: Principles of Poincaré duality as shown by Lee [6]; for mathematical definition of Poincaré duality, see [8] 

Since the resulting combinatorial model only represents topological relations, it does not contain metric infor-
mation. However, metric information is needed in order to implement 3D spatial queries in the NRS such as 
shortest path operations. For this purpose, a complementary geometric network model is derived in Euclidean 
space by applying mathematical skeletonization algorithms and centroid calculations to the 3D spatial objects. 
By relating both graph representations, a geometric-topological network model can be established applicable to 
complex 3D spatial queries.  

7.2 Combining Cells and Sensor Space in Navigation Systems 

Generally, the dual representation of the indoor environment can be understood as a room-to-room connectivity 
graph. However, indoor navigation approaches like those proposed by OntoNav [3] and Lorenz [2, 17] rely on a 
further spatial decomposition of rooms according to the mode of navigation, e.g., to represent navigable and non-
navigable areas with respect to the capabilities and limitations of moving persons. Moreover, the partitioning of 
indoor space into smaller units may also be induced by limited propagation areas of sensor-based positioning 
systems, e.g., systems based on RFID tags, which do not cover the spatial extent of an entire room. 

In semantic 3D building models, the free space within buildings is modeled by non-overlapping room objects 
(cf. [10, 11]). Whereas this representation of indoor environment is suitable for the derivation of a room-to-room 
connectivity graph, Lorenz [2] and Lefebvre [5] propose a more differentiated decomposition of the semantic 
room entities. The room itself is geometrically fragmented into so-called cells, which again represent non-
overlapping parts of the room. Based on the topological relationships of the resulting cells, a cell-to-cell connec-
tivity graph can be derived by applying the duality transformation proposed by Lee [7].  

The importance of a fine-grained subdivision of space and its dual cell-to-cell representation is exemplified 
within a fire escape scenario illustrated in fig. 5. The figure shows several rooms connected by doors to a corri-
dor. Whereas in 5a) no further partitioning is applied to the topographic room objects, the corridor in 5b) is 
subdivided into disjoint cells representing partially accessible passages of the corridor with respect to adjacent 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                21 

doors. The corresponding dual graph representations are also shown in fig. 5. The task within this fire scenario is 
to find an evacuation route from the upper left room to the staircase. As a constraint for the modus of navigation, 
rooms affected by fire, i.e., the left part of the corridor, are marked as non-navigable. Based on the room-to-room 
connectivity graph, this task cannot be performed since the corridor is only represented by a single vertex in the 
dual graph and is completely marked as non-navigable. However, the semantic decomposition of the corridor 
into single cells allows for its dual representation by several vertices. Since only two cells are affected by fire 
and thus marked as non-navigable, a valid escape route can be computed based on the cell-to-cell connectivity 
graph (denoted using black arrows in fig. 5b). 
 

a) connectivity graph for rooms b) connectivity graph 
for part of a room

elevator staircase elevator staircase

 
Fig. 5: The effect of spatial decomposition of rooms along escape routes 

Smaller partitions of topographic space and the corresponding semantic decomposition of room objects provide 
the necessary means for a more precise indoor route planning. Although the approach of Lee [7] introduces a 
multi-scale representation of spatial objects within the geometric network model, this representation is the result 
of skeletonization processes of 3D spatial objects in Euclidean space and thus does not follow semantic decom-
positions as proposed by Lorenz et al. [2, 17]. As shown in the previous example, these decompositions of room 
space allow for a more detailed planning of escape routes.  

Furthermore, the single partitions can be individually addressed by sensor-based positioning and tracking sys-
tems to provide a more accurate location of moving subjects or objects. Lorenz et al. [2, 17] describe such a 
system by integrating a Wi-Fi sensor model using so-called fingerprints. Fingerprints represent measurements of 
the signal strength of Wi-Fi transmitters at discrete locations within a room (cf. fig. 6). The cell decomposition of 
the room is performed based on different fingerprint measurements which are modeled as attributes of room 
cells. This approach allows for localization within rooms. However, the illustrated modeling approach also faces 
substantial disadvantages. Since the partitioning of topographic Euclidean space follows the characteristics of 
sensor space, there is no separation of the different space concepts anymore. Instead of a spatial partitioning of 
topographic space according to geometrical, semantic or rule-based aspects, the decomposition is decisively 
influenced by the sensor model, e.g., by the received signal strength of the transmitter or signal source. Accord-
ingly, both space representations cannot be modeled individually. Changes to building topology or sensor con-
figuration would both affect the entire structure. Furthermore, the integration of another kind of sensors or 
transmitters, e.g., RFID tags within a Wi-Fi based system, induces further modeling complexities, since the same 
room cell in topographic space could be covered by various overlapping sensor propagation areas, e.g., based on 
Wi-Fi signal strength and RFID signal strength. 

 

10
0 

–
90

 %

90
 –

80
 %

80
 –

65
 %

60
 –

45
 %

45
 –

35
 %

> 
35

 %

 
Fig. 6: Signal propagation area of a Wi-Fi transmitter including discrete areas of different signal strength  

and measurement points referenced to a cell 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                22 

7.3 Indoor Navigation in OWS-6 

The “Outdoor and Indoor 3D Routing Services Engineering Report” (OGC Doc. No. 09-067r2) specified in 
OWS-6 proposes a service-based framework for indoor navigation utilizing 3D building data encoded in 
CityGML for route planning and the OGC WMS interface for position and route communication.  

 

 
Fig. 7: Overview of the OWS-6 Outdoor and Indoor Routing Services architecture 

The Engineering Report defines a network topology model which can be derived from 3D building models given 
in CityGML and which facilitates route planning in indoor areas. In order to derive the topological graph struc-
ture, rooms are subdivided into areas called “cells”. Each cell is mapped onto a node within the topological 
graph. Further nodes are introduced at points where two adjacent cells touch. Edges denote topological adjacen-
cy between the nodes. The resulting cell-adjacency graph also has an embedding in geometric space (cf. fig. 8). 

The partitioning of topographic space into smaller cells is mainly based on the positioning accuracy of the 
localization infrastructure and the corresponding capabilities of the end-user device. The derivation of the net-
work topology model from building topography is only defined in a semi-automatic way. The result is a fixed 
but non-deterministic graph facilitating routing in a specific navigation context with a predefined and fixed type 
of locomotion and localization method. 

 

 
Fig. 8 OWS-6 proposed derivation of network topology focused on the center points of each cell 

The indoor navigation approach proposed in OWS-6 already addresses some of the challenges and requirements 
introduced in chapter 5, e.g. the possibility to subdivide topographic space into smaller cells. However, it still 
faces open issues such as the usage of a fixed localization method as well as the lacking support for additional 
modes of locomotion and further space concepts like logical spaces including navigation constraints. The con-
cepts discussed in OWS-6 and proposed by the OGC “Outdoor and Indoor 3D Routing Services Engineering 
Report” have been considered in the development of the Multilayered Space-Event Model which is presented in 
the following chapters of this OpenGIS® Discussion Paper. The proposed framework fully covers the OWS-6 
approach and additionally meets the further requirements specified in chapter 5.  



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                23 

8 Proposed Indoor Navigation Model 

In this OpenGIS® Discussion Paper, we introduce a novel framework for a generic multilayered space-event 
model [21, 22]. A crucial aspect of this framework is the clear separation of different space models, such as 
topographic space, sensor space, and logical space. This approach allows for the decomposition of a specific 
space into smaller units according to respective semantics, without influencing other space representations. 
Furthermore, we show how to connect the layers, i.e., space models, in a well-defined way and to derive a valid 
and unique joint state embracing all linked layers at a given point in time. Based on joint states, e.g., between 
topographic space and sensor space, the proposed multilayer modeling approach can be utilized to enable locali-
zation and route planning strategies in indoor navigation.  

8.1 Structured Space Model 

While route planning requires models which reflect the internal structure of a building as well as additional 
models providing thematic and logical navigation constraints, localization techniques require complementary 
models reflecting the characteristics of sensors and transmitters. Since partitioning of building space differs for 
all these space models, a conceptual separation of different space models is proposed. Within our framework, 
alternative space models are represented as separate space layers. Each space layer, and thus each distinct space 
model, is represented according to the Structured Space Model shown in fig. 9. 

 

 
Fig. 9: The Structured Space Model allows for the conceptual separation of alternative space models  

and their representation as separate space layer 

The Structured Space Model defines the general layout of each space layer independent from the specific space 
model which it represents. Each layer is systematically subdivided into four segments (indicated by the dotted 
lines in fig. 9). The vertical division corresponds to space representations within Euclidean space respectively 
topology space on the one hand. The horizontal partitioning indicates primal and dual space on the other hand. 
Consequently, each space model is given by four distinct space representations. 

For each space layer, the upper left segment contains the 3D geometry representation of the cells in Euclidean 
primal space. Topological relationships such as connectivity and adjacency relations between 3D spatial objects 
are represented within topology space (i.e., the right side of fig. 9). In primal space, topology is induced by the 
corresponding 3D geometry in Euclidean space and represented in the upper right segment. Both primal space 
representations follow the ISO 19107 “Spatial Schema” specification for modeling geometry and topology of 
real world phenomena. Since disjoint partitioning of Euclidean space is required, the relation between both upper 
segments can be expressed with the “Realization” association between geometric and topological objects defined 
by ISO 19107. Accordingly, associated objects in either space must share a common dimension and are related 
by 1:1. 

 

NRS 

Primal 
Space 

Dual 
Space 

Topology 
Space 

Euclidean  
Space 

3D Geometry Induced 
natural  

3D Topology 

Euclidean space  
embedding of NRS 

S
ke

le
to

ni
za

tio
n 

 Poincaré D
uality  

ISO 19107 

ISO 19107 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                24 

By applying a duality transformation based on Poincaré duality, the 3D cells in primal topology space are 
mapped onto nodes (0D) in dual space. The topological adjacency relationships between 3D cells are trans-
formed to edges (1D) linking pairs of nodes in dual space. The resulting dual graph represents a Node-Relation-
Structure as proposed by Lee [7] and is represented in the lower right segment of the structured space model. As 
mentioned in section 7.1.1, the NRS does not contain metric information which is, however, necessary in terms 
of spatial 3D queries such as best path calculations. Therefore, the Euclidean space embedding of this topologi-
cal graph structure in dual space is given in the lower left segment of the structured space model. The embedding 
in IR3 introduces metric information into the topological adjacency and connectivity relationships between the 
spatial objects. Again, the conceptual model of ISO 19107 can be used to express the relation of both lower 
segments as 1:1 “Realization” association between the geometric and topological objects in either space. How-
ever, the transition from primal to dual topology space based on Poincaré Duality cannot be modeled or de-
scribed using ISO 19107. 

The dual graph is also to be seen as a state transition diagram. Each node of the dual graph represents a state in 
this diagram denoting a cell in primal space in which a subject or object can possibly be, for example a room or 
the coverage area of a sender. The event is the transition or movement of such an object or subject from one state 
to another and is represented as edge in the dual graph connecting the both states. Therefore, events are related to 
the movement of subjects or objects through the explicit topological representation of space. Accordingly, our 
modeling approach is to be seen as a generic space-event model. Since each space model has to be subdivided 
into disjoint cells in primal Euclidean space, a moving subject or object can only be in one cell at one point in 
time. Thus, exactly one node within the NRS respectively the state transition diagram can be active at this point 
in time. 

The structured space model describes a mathematically sound framework for a generic representation of spaces 
and their relations as well as spaces and events. It is independent from concrete space models such as topograph-
ic space or sensor space, and, thus, provides a conceptual model for the abstraction as well as the consistent 
specification and interpretation of various space concepts. This generic space-event modeling is even not re-
stricted to the context of (indoor) navigation. In the following two subsections, the modeling of space layers is 
exemplified for the topographic space layer and a sensor space layer. 

8.1.1 Topographic Space Layer 

The representation of the topographic space layer using the structured space model is illustrated in fig. 10. For 
indoor navigation, the topographic space represents the interior built environment of buildings and its semantic 
decomposition into building elements like rooms and doors in order to enable route planning. Semantic building 
models for the representation of topographic 3D objects nowadays become increasingly available in the context 
of Building Information Modeling (BIM), such as the Industry Foundation Classes (IFC) [12] and in the field of 
3D city modeling. The City Geography Markup Language (CityGML) [10, 11] defines a geospatial information 
model for the representation of 3D topographic urban objects including buildings and their interior.  

 

GM_Solid TP_Solid
ISO

Dual graph

Primal
Space

Dual
Space

TopologyR3 Geometry

Euclidean space 
embedding of NRS

19107 

ISO 19107 

 
Fig. 10: The topographic space 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                25 

According to the general space concept of layers as introduced in the previous section, the topographic space can 
be described by four distinct representations. The upper left element of fig. 10 illustrates the non-overlapping 3D 
geometry representation of built environment in Euclidean space. This geometry information can be directly 
derived from IFC and CityGML building models. The 3D primal cells of this segment represent the smallest 
units of the topographic space model such as rooms, hallways, or doors. 

The dual space representation in the lower right segment constitutes a network topology model of the interior 
built environment whose cell adjacency and connectivity information is already suitable for route planning (cf. 
fig. 11). The additional Euclidean space embedding of the dual topology graph (cf. lower left part of fig. 10) 
introduces metric information and results in a geometric network model [7] which, for example, facilitates the 
determination of the best path (e.g., the fastest, the shortest, or the cheapest) and the definition of route trajecto-
ries. Fig. 11 shows an excerpt of a building model describing a floor and five connected rooms as 3D primal 
cells (left part) as well as the derived dual graph in topology space denoting cell adjacency (right part). 

1 2 3

4 56

1
2

3

4
5

6  
Fig. 11 Example for the partitioning of building interior into rooms and its representation in dual space 

In order to integrate metrics, one possible solution is to use the methods “representativePoint()” and “centroid()” 
defined for GM_Objects in ISO 19107. For 3D solids, these methods return a point geometry representing the 
centroid of the volumetric object. This point representation could be stored attributively within the NRS. Since 
nodes of the NRS are directly related to TP_Solids in primal topology space, which, in turn, are directly related 
to GM_Solids in primal Euclidean space (depicted by dotted arrows in fig. 10), this metric information can be 
uniquely derived. Furthermore, weights representing, for example, distances between rooms can be assign to the 
edges of the NRS. These weights could be derived from primal Euclidean space accordingly. Alternatively to the 
methods defined in ISO 19107, the dual graph representation in Euclidean space may be derived by mathemati-
cal functions such as skeletonization processes. 

Applying the structured space model to building models from existing standards 

Semantic 3D city and building models provide geoinformation about the topographic space. However, different 
standards for 3D building models exist which result in different representations of the topographic building 
space. For example, CityGML and IFC vary in the way buildings are described with respect to their spatial and 
semantic characteristics. A fundamental difference arises from their distinct modeling paradigms which are due 
to the way 3D models are acquired in the GIS domain respectively in the field of BIM and Computer Aided 
Architectural Design (CAAD). In GIS, 3D objects are derived from surface observations of topographic features 
based on sensor-specific extraction procedures. Features are hence described by their observable surfaces apply-
ing an accumulative modeling principle. In contrast, BIM models reflect how a 3D object is constructed. They 
follow a generative modeling approach. Therefore, BIM models are typically composed of volumetric and 
parametric primitives representing the structural components of buildings [26]. This general classification into 
surface-oriented models and volumetric elements models of topographic space can also be applied to building 
models given in further standards or formats such as X3D or ESRI BISDM. A third group of building models is 
often employed in academic approaches (e.g., Gold et al. [20]). The interior built environment is represented as 
cardboard model, i.e., a wall between two adjacent rooms is represented by a single surface. Such models often 
lack a semantic description and ontology of the interior space.    

Fig. 12 illustrates the three approaches for building modeling. It shows two rooms on the same floor, which are 
connected to a hallway through doors. The scene is sketched in top view and the thematic differentiation of 
indoor features is shown (if provided by the building model).  



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                26 

 
Fig. 12: Approaches for 3D building modeling 

As discussed in section 8.1, the structured space model is independent from specific space models or concepts, 
and, thus, its general framework can be applied to each of the building modeling approaches. Fig. 13 shows the 
three example models and their resulting connectivity graphs in dual space which result from applying the 
Poincaré Duality to the 3D cells in primal topology space. 

For the surface-oriented model (fig. 13 a, e.g. CityGML), each room is modeled as closed volume and hence 
mapped onto a node in dual space. Since walls are represented by at least two different surfaces which represent 
the visible parts of the wall, the room geometries do not touch but are separated by a wall space. This wall space 
is bounded by the interior wall surfaces of the rooms on the one side and the exterior building shell on the other 
side (illustrated as blue rectangle). The wall space itself is not further partitioned and, thus, is entirely mapped 
onto a single node. Adjacency edges are introduced between the room nodes and the node representing the wall 
space because the cells share common faces in 3D topology space. Furthermore, the connection between the 
rooms and the hallway is introduced as separate edges into the dual graph because the doors are modeled as 
surfaces which again are shared as common face by the 3D cells of the rooms and the hallway. In case of a 
volumetric elements model (fig. 13 b, e.g. IFC), all volumetric elements (rooms, walls, doors) are mapped onto 
separate nodes. Thus, in contrast to the surface-oriented model, the wall space is now represented by many nodes 
each having edges to the nodes of adjacent rooms, walls and doors. Furthermore, the room nodes are not directly 
connected through one adjacency edge, but through two edges having an intermediate node which represents the 
door cell. Finally, the cardboard model results in a simple dual graph consisting of three nodes representing the 
rooms. All nodes are connected through adjacency edges because the rooms mutually share common faces. If the 
building model however lacks semantic, it is a complex task to differentiate between a face representing a wall 
and a face representing a door.  

 
(a)                        (b)                       (c) 

Fig. 13: 3D building models and their derived dual graphs in topology space by applying the Poincaré Duality 

In the context of indoor navigation, it can be sufficient to only consider navigable spaces. Accordingly, nodes 
representing non-navigable wall spaces could be omitted in order to simplify the dual graph structure. Fig. 14 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                27 

shows the resulting graphs when applying Poincaré Duality without considering wall spaces, (a) for the surface-
oriented model and (b) for the volumetric elements model. However, also information about the wall space can 
be important in emergency situations. For example, if the hallway is blocked by a fire incident, fire fighter forces 
equipped with appropriate tools could still move from one room to the other if the wall between the rooms is 
made of wood. This requires walls to be represented as nodes which are connected to the nodes of adjacent 
rooms (cf. fig 13 b) as well as additional information such as the wall material. 

 

 
 (a) (b) 

Fig. 14: 3D building models and their derived dual graphs in topology space by applying the Poincaré Duality and omitting non-navigable 
spaces 

The support for arbitrary modeling approaches for buildings and their interior, which is due to the mathematical-
ly sound definition of the structured space model, is to be seen as one of the essential advantages of the proposed 
conceptual framework compared to further proposals in the field of indoor navigation. By this means, the pro-
posed framework is not restricted to one specific way of representing the interior built environment but is open 
to any data model and standard in the field of building modeling.        

8.1.2 Sensor Space Layer 

The concept of space-event modeling allows for consistent specification and interpretation of various space 
concepts. This ensures equivalent interpretations of sensor space and topographic space. When arranging sensors 
within a building (e.g., Wi-Fi), transmission ranges may overlap, which requires their decomposition into dis-
joint regions in order to define unambiguous states (cf. fig. 15). As a state one can define the range or different 
signal strength areas. The event can be understood as an entry into a sensor area or as the crossing of a certain 
threshold value.  

 

Example Wi-Fi transmitter

Outer

Example Wi-Fi or RFID without overlapping areas

Outer

 
 

Fig. 15 Example for partitioning into cells and their representation in dual space 

Like in the topographic layer, the accuracy of positioning correlates to the granularity of partitioning. Hence with 
smaller cells, navigation gains in precision. To describe areas with no sensor coverage, an additional state called 
“outer” is defined for every sensor system. This state is needed when the navigating subject or object leaves the 
range of a sensor without other sensors around, e.g., when leaving the building. For sensor systems covering the 
whole interior building area, the state “outer” only represents the outside building environment. Fig. 15 illus-
trates the modeling of sensor space in the case of overlapping transmitter/sensor ranges. Fig. 16 further shows 
the different geometric and topological representations of sensor space based on the structured space model.  



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                28 

 

TP_SolidsGM_Solids

ISO 19107

R3 Geometry Topology

Primal
Space

Dual
Space

Dual graphEuclidean space 
embedding of NRS

ISO 19107

 
Fig. 16: Sensor space 

In IR³, the partitioned sensor areas are represented as GM_Solids (upper left part) and their topological represen-
tation as TP_Solids (upper right part). The two representations are linked by the “Realization” association 
defined in ISO 19107. The Poincaré Duality defines the mapping from the topological representation to a dual 
graph structure (lower right part), representing a state transition diagram. To allow for quantitative evaluation of 
state distances, a metric is needed within the graph structure (like in the topographic layer). This metric is de-
fined by explicit linking of nodes and corresponding GM_Solid objects. The distances between GM_Solids are 
then assigned attributively to the graph edges, resulting in a geometrical network of sensors in IR³ (lower left 
part). The link between GM_Solids and the sensor network (both defined in Euclidean space) embodies potential 
mathematical algorithms for network derivation, e.g., Delaunay Triangulation, Voronoi Diagram, etc. 

8.2 Multilayered Space Model 

Based on the structured space model introduced in chapter 8.1, separate and independent space layers represent 
different space models with different partitioning schemas. However, all of the layers spatially cover the same 
real world space, i.e. the interior building space. In order to get a comprehensive view of all space models which 
describe the entire interior building space, they are integrated within our framework into a Multilayered Space 
Model. The following fig. 17 illustrates this combination of several space layers. 

 Alternative Space  Concepts 

GM_Solid 
ISO 19107 

ISO 19107 

TP_Solid 

TP_Node / 
TP_Edge GM_Point / 

GM_Curve 

GM_Solid 
ISO 19107 

ISO 19107 

TP_Solid 

TP_Node / 
TP_Edge GM_Point / 

GM_Curve 

Primal 
Space 

Dual 
Space 

Topological 
Space Euclidean  space 

Topographic  
Space model 

Sensor Space  
models 

Subspaces 
of Top. Space 

Space 

Event 

logical  
Space(s ) 

 
Fig. 17: Multilayer combination of alternative space concepts 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                29 

The layers in the front of fig. 17 exemplarily represent topographic spaces, whereas sensor spaces are represent-
ed by the layers behind. As comprehensively discussed in the previous chapter, geo-objects in topographic space 
such as buildings may be represented using semantic 3D building models (cf. [10, 12]). Further semantic decom-
positions into, e.g., rooms, walls, doors, etc. can be applied within these model. However, the notion of sensor 
space substantially differs from topographic space. The sensor space is rather decomposed according to signal 
characteristics such as propagation and signal coverage areas, which requires its representation on separate space 
layers. Due to this conceptual separation, changes to room topology on the topographic layer do not have an 
impact on the cell representation of the sensor space layer and vice-versa. 

The space which is represented by the Multilayered Space Model can be generally subdivided in two types of 
space: physical and logical. While physical space layers are qualified by physical conditions (built-up space, 
sensor coverage), the logical ones subdivide the space according to logical or thematic conditions (e.g. accessi-
bility, navigation constraints). Physical layers comprise, for example, the topographic space and its dependent 
subspace layers (e.g. mode of navigation) and sensor space. Examples for logical layers are security zones or 
evacuation areas which denote logical spaces within buildings which influence the accessibility of indoor areas 
such as rooms or hallways. Navigation constraints may result from different criteria, e.g. topographic/geometric 
(door widths, opening direction of doors, etc.), zonal (security zones, fire detector areas, etc.), or temporal access 
constraints (opening hours, etc.). Although logical spaces may lead to a further partitioning of the navigable 
space denoted by the topography space, their spatial extent does not necessarily has to follow the physical built 
structure of the interior environment. For example, a security zone may split a single room into accessible and 
non-accessible parts, and may even affect outdoor areas around the building.  

Further alternative concepts of space can be incorporated into the framework by adding additional layers. The 
number of layers is unbounded. For example, in the area of philosophy different definitions for space (e.g., 
movement space, activity space, visual space etc.) can be encountered which can also be used to describe the 
interior built environment. However, the notion of space and its semantic decomposition again differs from 
physical or logical space. Since each layer provides a valid and consistent representation of space, the common 
framework itself is to be seen as a valid multilayered space representation, which can be used as a whole to 
describe, for example, the indoor environment of buildings. The integration of these multiple and different space 
concepts within the Multilayered Space Model is realized through their common abstraction as well as consistent 
specification and interpretation as defined by the structured space model (cf. chapter 8.1). 

8.3 Multilayered Graph and Joint State of Navigation 

As illustrated in the previous sections, the node-relation-structure NRS (bottom right in fig.s 10, 16, 17) within 
each space layer constitutes a graph. The nodes represent the possible states of a navigating subject or object and 
correspond to cells with volumetric extent in primal space while the edges represent state transitions, i.e., events 
caused by the movement of a subject or object from one cell to another. They correspond to adjacency relations 
between the cells in primal space within the same space model (e.g., neighbored rooms in topographic space). 

Joint State of Navigation 

Since each space model is based upon a disjoint partitioning of (Euclidean) space, a navigating subject or object 
can only belong to one cell at a time and thus always only one state may be active. Since we have different space 
layers with different partitioning, each layer contains such a state transition graph with exactly one active state. 
Although each layer within the multilayered model describes a specific partitioning of space, the different space 
models cover the same real space. Therefore, a subject or object is at any given time exactly in one cell (or state) 
in each layer simultaneously. The overall state is thereby denoted by the joint active states of all space models, 
i.e. all layers. 

However, only specific combinations of states from different layers are valid and can be active at the same time. 
The combinations are expressed by additional edges which link the nodes between different layers, and, thus, 
establish a connection between the separate layers of the multilayered space model. These so called joint edges 
are derived by pair wise intersecting the cell geometries from different layers in primal space. A joint edge 
between two such nodes in the dual graph is inserted, if and only if the intersection of the interior of the two 
corresponding cell geometries is non-empty. Therefore, the joint edges represent the Egenhofer relations “con-
tains” / “inside”, “overlap” and “equals” [14] between two primal cells from different space layers and thus 
denote inter-space connections. Each tuple of nodes connected in pairs by joint edges is called a joint state. The 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                30 

overall structure of joint edges connecting nodes from different space layers constitutes an n-partite graph, where 
all the nodes from all n layers are included but are separated into n partitions which are connected by the joint 
edges (inter-space connections). Fig. 18 illustrates the dual graphs of three space layers together with their inter-
space connections. The topography layer contains four rooms. Room3 is a hallway to which rooms 1, 2 and 4 are 
connected through doors. Room1 and Room2 share a further connecting door. Two sensor space layers are 
defined. The first one represents two WiFi access points A and B whose coverage areas overlap and thus are 
partitioned into the disjoint cells A, AB, and B. The second sensor space layer describes the coverage areas of 
two RFID senders (R1 and R2). 

 

 
Fig. 18: Resulting n-partite graph with intra-space connections. The hyperedge denotes a possible joint state. The incident nodes of a 

hyperedge form  a clique. Please note that the outer nodes have been omitted for the sake of readability. 

The joint state of navigation is exactly a clique of all active states of all space layers and is represented by a 
hyperedge within the graph structure. The hyperedge denotes the n-ary relationship between all affected layers 
(see the bold orange line in fig. 18). In fig. 18, the red cross in the upper part marks a possible position of a 
moving subject or object within a building. For this position, three inter-space connections can be found which 
determine a ternary relationship or clique between the affected cells from the topographic space (Room3), the 
WiFi sensor space (cell A), and the RFID sensor space (cell R1). This hyperedge can be stored, for example, as a 
tuple in a table in an n-ary relation. For the sake of readability, the outer nodes are not included in fig. 18, but 
nevertheless they also must be reflected on each space layer. 

Multilayered Graph 

The dual graph of topographic space facilitates route planning within the building. Therefore, it is already useful 
on its own, e.g. to derive escape routes without the need for an additional sensor model. On the other hand, the 
dual graph of sensor space can be used in a decoupled way for tracking and localization without knowing the 
actual position in topographic space. The edge between the two NRS denotes the joint-state connection combin-
ing the nodes of both graphs to the n-partite graph (in this example a bipartite graph) which defines the valid 
states of the entire model. A joint-state connection not only allows the determination of relative positions with 
respect to a sensor, but also the absolute position determination within the sensor and topographic space. The 
uncertainty about the absolute position in Euclidean space can be restricted to the intersection volume of all 3D 
cell geometries associated with the active nodes in the joint-state. 

4 3 

1 
2 

A B AB 

R1 R2 

1 2 

3 4 
A B 

AB 

Hyperedge, denotes  
possible simultaneous  
space occupancies 
Inter - space connection,  
denotes intersecting cells  
between different space  
layers 
Connectivity (Intra - 
space connection)  
denotes adjacent cells  
within the same space  
model 

R1 R2 

Location  of a navigating subject in primal space is 
characterized by a hyperedge in the n-partite 

 

Overlaid space  
layers  



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                31 

In addition, the n-partite graph allows also for assessment of localization infrastructure and estimation of loca-
tion uncertainty with a given building decomposition in topographic space and a given sensor / transmitter 
configuration in sensor space. 

The n-partite graph connecting the nodes of all n layers together with the n dual adjacency graphs (one per space 
layer denoting adjacency of the cells in primal space) constitutes a multi-graph structure which is inherent to the 
Multilayered Space Model itself. Within our framework, this multi-graph structure is therefore called Multi-
layered Graph.  

8.4 Subspacing and Hierarchical Grouping of Spaces 

Cells within a space model (e.g. topographic space) may be further subdivided due to specific considerations 
such as the mode of navigation. The topographic space is well defined and described by different existing stand-
ards like CityGML [11] or IFC [12] on a room (space) level, however, a decomposition due to different contexts 
in smaller parts can occur. The crucial point is that this decomposition may constitute a subset of the entire room 
and therefore a separation in one “main space layer” and additional context-dependent layers is reasonable (cf. 
fig. 19). These decompositions of space models are not independent of the higher level layer, because they 
reflect only a context specific partition of the higher level space. Therefore, the inter-space connection between a 
main layer and its subspacing layers is restricted to the topological relations qualified as “contains” / “inside” 
and “equal”. This generic subspacing concept allows for hierarchical grouping of arbitrary space models. It is 
exemplified for the topographic space in the following fig. 19. 

 
Fig. 19: Some subspace layers of topographic space. The contextual subspacing of topographic space leads to space layers which are not 

independent from topographic space. Thus, inter-space connections are restricted to topological relations “inside” and “equals”. 

The following fig. 20 shows an example for a decomposition and subspacing of topography space. The main 
topographic space is shown in the right part of fig. 20. Its subspace layer representing the navigable space for 
mode of locomotion “driving” (e.g., wheel chair users) is shown on the left. Inter-space connections between 
dual graph nodes and their topological relation are illustrated as black arrows between both layers.  

 

 
Fig. 20: Example for topographic subspacing 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                32 

In the example of fig. 20, it is assumed that there is single step in the middle of the floor which can easily be 
passed by pedestrians. However, it is an obstacle for driving subjects and objects. Therefore, route planning for 
driving subjects and objects cannot be performed on the main topographic layer but requires a subspace dedicat-
ed to this mode of locomotion. In the left part of fig. 20, the non-navigable part of the topographic space which is 
occupied by the obstacle is not represented in primal space of the subspace layer any more. This leads to a 
subdivision of the floor into smaller cells. The dual graph denoting cell adjacency within the subspace layer (see 
dotted edges between the nodes of the subspace) now contains the information, that the floor is not entirely 
navigable for driving subjects and objects. A route from the left room to the right end of the floor has to pass the 
two rooms which are illustrated on top of the floor in fig. 20. The subspacing layer is connected to the higher 
level layer by the inter-space connections which express the topological relations contains or equals (see the 
black edges between both layers). A further subspacing layer for autonomous mobile robots could be added 
which introduces a further subdivision of the primal cells in main topographic space into even smaller partitions 
than those shown in fig. 20. By this means, the Euclidean space embedding of the derived dual graph facilitates 
optimal planning of route trajectories for autonomous mobile robots. 

The example illustrates that not only different space models such as topographic space, sensor space, and logical 
space may lead to a different partitioning of indoor space. Also the decomposition of a space layer results in a 
partitioning of its primal cells into smaller subspaces. Subspacing may be applied for different reasons, e.g. to 
denote the navigable space for a specific mode of locomotion or to be able to derive a geometric network suita-
ble for planning of trajectories. The resulting partitioning of indoor space has to be represented as separate space 
layer within the multilayered space model. This allows for the support of multiple and different contexts of 
navigation. For the above example, navigating a wheel chair user has to be performed on the subspace layer 
depicted in the left part of fig. 20. The main topographic layer could be neglected in this navigation context. For 
pedestrians, the main topographic layer however is already suitable for route planning and, thus, the subspace 
layer could be neglected.        

8.5 Context as Selection Criterion 

Within the multilayered space model all contextual configurations can be represented as separate layers which 
are connected via the inter-space connection relation (cf. data model in chapter 10). The relevant data for indoor 
navigation or routing are selected and derived from the set of layers (cf. fig. 21).  

The selection is depending on logical or thematic considerations as well as on the existing localization device 
configurations. In fig. 21 an example for such a selection is shown. In the upper part the precomputed n-partite 
graph constituted by all different contexts is shown. In the lower part of the fig. 21, the user or application 
dependent selection of relevant space models from the set of layers (e.g. stored in a database) is shown. After the 
context-dependent selection, the cliques are detected in order to identify all possible joint states (hyperedges). By 
intersecting all the geometries which are associated to the incident nodes (see section 8.3) of each hyperedge, a 
3D intersection volume results which constitutes the actual area in which the navigating subject or object must 
be located. The extent of this volume is a measure for the uncertainty of the absolute position of a navigating 
subject or object. 

 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                33 

 
Fig. 21: The actual use case defines the context.  

This is reflected by the selection of the according space models 

8.6 Example for the Application of the Proposed Indoor Navigation Model 

The example in this chapter demonstrates the application of the proposed Multilayered Space-Event Model 
within the context of indoor navigation. The scenario for this example is illustrated in fig. 22. The building 
model is given as semantic 3D surface model (e.g., CityGML). It contains a floor and two adjacent rooms. Both 
rooms are connected to the floor through doors. Additionally, a door between both rooms allows for moving 
from one room to the other without having to use the floor. The building is equipped with WiFi access points 
which can be used for the localization of end-user devices. The coverage area of two of the WiFi access points 
(A and B) is sketched as spheres in fig. 22. Of course, this example only shows a small excerpt of an entire 
building model. Nevertheless, it is already suitable to illustrate the application of the Multilayered Space Model.  

 
Fig. 22: Example topographic space and sensor space  

Floor 
(Room 3) 

Room 1 

Room 2 

Doors 

Doors 

WiFi B 

WiFi A 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                34 

The floor (Room 3) can only partly be used by driving subjects or objects because of a step which is located in 
the middle of the floor between the doors connecting the floor to Room 1 and Room 2 (cf. left part of fig. 23). 
Thus, the building topography illustrated in fig. 22 and modeled by the original 3D building model is suitable for 
navigating pedestrians. However, the step is an obstacle for driving subjects or and objects and therefore repre-
sents non-navigable space for this mode of locomotion. In order to enable route planning and navigation for the 
mode of locomotion “driving”, the floor has to be subdivided into smaller cells following the concept of sub-
spacing. Only the cells representing the navigable space are necessary and have to be kept. Accordingly, the cell 
denoting the non-navigable space of the step can be omitted. Since both types of locomotion, i.e. walking and 
driving, shall be supported by the example navigation system, both subdivisions of the interior built environment 
are important and have to be used in either one of the two navigation contexts.  

Applying the concepts of the multilayered space model introduced in the previous sections, both partitioning 
schemas of the topographic space are represented on their own space layers. The cells in primal space of the 
main topographic layer which are already suitable for navigating walking subjects and objects are shown in the 
left part of  fig. 23 (blue). In the middle of fig. 23 (green), the primal space geometry of the type of locomotion 
“Drivable” is illustrated. Detached from the topographic layers, the overlapping WiFi coverage areas of the two 
access points are modeled separately as a sensor space layer “WiFi”, shown in the right part of fig. 23 (beige).  

 
Fig. 23: Primal space geometry of the topographic layers “walkable” (blue) and “wheel chair” (green) representing the navigable space (type 

of locomotion) and of the sensor space layer “WiFi” (beige) representing the signal coverage 

In primal space, the spatial decomposition is modeled as disjoint cells in 3D geometry and 3D topology. Apply-
ing Poincaré Duality to the induced 3D topology in primal space (natural topology, cf. Munkres [8]), a graph 
structure in dual topology space is deduced for each layer which represents the primal cells and their outer space 
as nodes and their topological adjacency as edges. Fig. 24 illustrates the resulting dual graphs of the topographic 
space layers “Walkable” and “Drivable” and the sensor space layer “WiFi”. Since only disjoint cells are allowed, 
the dual graph of the sensor space layer contains three nodes each representing a separate WiFi cell having 
different signal reception (only A, both A and B, and only B). 

 
Fig. 24: Derived dual graphs from primal space geometry using induced topology. Cells (rooms respectively WiFi coverage areas) are 

represented as nodes and shared faces as edges denoting cell adjacency 

Room 1 
 

Room 2 
 

Room 3 
 

Room 1 
 

Room 2 
 

Room 3b 
 Room 3a  

WiFi A 
 

WiFi B 
 

WiFi AB 
 

Non-Navigable 
Space 
 

Stair 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                35 

As shown in fig. 24, the doors in both layers describing topography space (depicted in blue and green) are 
modeled as surfaces (and not volumetric objects). Applying Poincaré Duality leads to the conversion of the door 
surface to an edge connecting the rooms whose cells in primal topology space share the door as common face. 
Doors might also be modeled as volumetric objects, e.g. regarding to the modeling paradigms of IFC. In this 
case, a door describes a primal cell in topology cell on its own and, thus, is mapped onto a separate node within 
the dual graph. Accordingly, depending on the applied modeling approach for representing 3D buildings and 
their interior built environment in primal space, the derived graph structure in dual space might be different (cf. 
chapter 8.1.1). This support for various 3D building model approaches is to be seen as essential strength of the 
proposed indoor navigation model. 

The thematically separated space layers cover the same real world space. In order to establish links between the 
different space layers, their dual graphs are combined in a Multilayered Graph by linking nodes in different 
layers, if the corresponding cell geometries in primal space overlap. Fig. 25 shows the Multilayered Space Model 
for this example including the 3D geometry in primal Euclidean space, the corresponding graph structure in dual 
topology space and the multilayered graph connecting the two topographic space layers and the sensor space 
layer. Please note, that the representations of primal 3D topology space and dual Euclidean space as well as the 
inter-space connections between the topography layer “Walkable” and the WiFi sensor space layer are omitted 
for readability reasons. Of course, further space layers may be added, for example space layers denoting further 
and different sensor spaces for localization or representing logical navigation constraints. 

 
Fig. 25: Multilayered Space Model including the geometry in primal space, the corresponding graph structure in dual space and the multi-

layered graph connecting the two topographic space layers and the sensor space layer. 

The graph structures in Fig. 25 are stored and can now be used for localization, routing and tracking in different 
navigation contexts. For example, if a wheel chair user shall be navigated through the building using WiFi for 
localization, only the space layers “Drivable” and “WiFi” as shown in fig. 25 are required. Thus, the Multi-

Geometry in IR³  
 

Topology 
 

Primal 
Space 
 

Dual 
Space 
 

Layer “Walkable” 
 

Layer “Drivable” 
 

Layer “WiFi” 
 

Room 1 

 
Room 2 

 
Room 3a 

 

 Outer 

 

Room 1 

 
Room 2 

 

Room 3 

 

 Outer 

 

 WiFi A 

 
 WiFi AB 

 

 WiFi B 

  Outer 
 

Room 3b 

 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                36 

layered Space Model can be reduced by removing all space layers which are not relevant for the selected context 
of navigation. Fig. 26 shows the reduced example scenario.  

The multilayered graph shown in fig. 26 allows for localizing a moving subject or object. For example, if the 
WiFi receiver of the end-user device only receives the signal of the WiFi access point A, the moving person 
must be in Room 3a (left part of the floor) or in Room 1. This can be deduced from the inter-space connections 
between the dual graphs of topography and sensor space which denote possible Joint States. The green dotted 
inter-space connections shown in fig. 26 link the nodes representing Room 3a and Room 1 in topography space 
to the node representing the WiFi coverage area of sender A in sensor space. The extend of the 3D intersection 
geometry between the primal cell of WiFi A and the primal cells of Room 1 and Room 3a is a measure for the 
remaining uncertainty of the actual position of the moving person. This ambiguity can be reduced, for example, 
by using further WiFi transmitters and/or other localization methods and infrastructures which would have to be 
introduced as separate space layers in the Multilayered Space model and, thus, would establish further possible 
Joint States. Of course, also historic information about previous Joint States of the moving person can be used 
for reducing the ambiguity. For example, using the cell connectivity information of the sensor space layer given 
by its dual graph together with the localization algorithm, the changes in location can be tracked (shown by the 
blue edges in fig. 26) and be fed into a reasoning process. 

 
Fig. 26: Example context of navigation “Drivable” and “WiFi” with the overlapping cell geometries of both layers in primal space (left part) 

and the resulting Multilayered Graph (right part). 

Based on the topographic space layer, routing of the moving person can be performed. In the example scenario 
shown in fig. 26, the context of navigation of the moving person contains the “Drivable” space layer (e.g., a 
wheel chair user). Thus, if the route of the user leads through the illustrated floor, a route planning algorithm will 
automatically navigate the user through Room 1 and Room 2 in order to avoid the stair in the middle of the floor, 
which represents a non-navigable obstacle. In the Multilayered Graph, the corresponding dual graph representa-
tion of the “Drivable” space layer which denotes adjacency between cells in primal space does not contain an 
edge between the nodes representing the navigable spaces of the floor (Room 3a and Room 3b). Thus, a route 
planning algorithm will follow the edge from Room 3a to Room 1, from Room 1 to Room 2, and finally from 
Room 2 to Room 3b (or vice versa).  

 

 

 
 

Room 1 

 

WiFi A 

 
WiFi B 

 

WiFi AB 

 
 Outer 

 

Lo
ca

liz
at

io
n 

 

Routing 

 

Tracking 

 

Room 3b 

 

Room 2 

 

Room 3a 

 

 Outer 

 

Layer “Drivable” 
 

Layer “WiFi” 
 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                37 

9 Development of a Framework for Indoor Navigation 

Based on the concepts introduced in the previous chapters, we propose a general framework for indoor and 
outdoor navigation which is outlined in fig. 27 using a UML package diagram.  

 

 
 Fig. 27: UML package diagram of the proposed framework for Indoor Navigation  

According to the OGC’s policy “The Specification Model — A Standard for Modular specifications [15]”, the 
overall navigation framework is split into a core module and extensions which have a mandatory dependency on 
the core. In figure 21, the separate modules are illustrated as UML packages. The dashed arrows indicate de-
pendency relations between the modules. In the following sections the modules are described in detail. 

 

Core Module: Multilayered Space Model 

The core of the navigation framework is the Multilayered Space Model module. As discussed in chapter 8, the 
Multilayered Space Model allows for the coherent combination of different decompositions of space according 
to different semantics. Each spatial decomposition is represented by a separate space layer which is systematical-
ly subdivided into primal and dual space on the one hand and geometry and topology on the other hand. In 
primal space, the spatial decomposition is modeled as disjoint cells in 3D geometry and 3D topology. By apply-
ing Poincaré Duality, for each layer a graph structure in dual topology space can be deduced which represents 
primal cells as nodes and their connectivity as edges. Since the layers cover the same real world space, the 
separate dual graphs can be combined into a Multilayered Graph by linking nodes in different layers if the 
corresponding cells in primal space overlap. Due to these abstract concepts, the Multilayered Space Model is 
generally to be seen as a conceptual framework for the generic representation of spaces and their relations.   

Please note that these fundamental concepts are not restricted to the context of navigation but may also be 
applied to different application contexts which require a generic and mathematically sound space-relation 
model. Thus, the proposed Multilayered Space Model module is designed to be context-independent and, 
thus, may be reused in different application contexts. 

Embedded in the context of navigation, the concepts of the Multilayered Space Model facilitate, amongst others, 
the support for different and multiple localization methods and infrastructures, the support for different naviga-
tion contexts with respect to the type of locomotion, the support for arbitrary configurations of space layers, as 
well as sub-spacing and the hierarchical grouping of space decompositions (cf. chapter 8). 

The Multilayered Space Model module is implemented as GML 3.1.1 application schema. Its UML data model is 
illustrated in chapter 10, whereas the corresponding XML Schema definition is given in chapter 11. 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                38 

   

Extension Module: Indoor Navigation Module 

The Indoor Navigation Module provides the 3D topographic representation of the interior built environment and 
the available localization infrastructures. This representation shall be based on already existing data models. 
However, there is no restriction to a specific data model of the 3D interior built environment due to the generic 
concepts defined by the Multilayered Space Model. 

For example, semantic 3D city and building models, such as the international standards CityGML and IFC, 
provide the geometry and the thematic differentiation of interior areas, e.g. the separation of buildings into 
building parts, storeys and rooms. This spatial decomposition of the building space can already be used for 
structuring the topographic space layer within the core module. Moreover, the thematic differentiation is already 
suitable for addressing, route descriptions and route tracking (homing), e.g. based on room numbers.  

The Indoor Navigation Module is furthermore meant to provide additions to the generic concepts of the core 
module which are required in the context of indoor navigation. This might include addressing/georeferencing 
schemas for indoor spaces, concepts for communication and visualization of position and navigable route sec-
tions, and the introduction of additional navigation constraints such as temporal access constraints like opening 
hours, or constraints resulting from material properties of the navigation path. Again, existing data models and 
concepts shall be reused. 

 

Extension Module: Outdoor Navigation Module 

The proposed navigation framework explicitly addresses 3D outdoor navigation in addition to indoor navigation. 
The generic concepts for representing spaces and their relations defined by the Multilayered Space Model within 
the core module can also be applied to outdoor environments. This facilitates the support of navigation from 
indoor to outdoor space. The Outdoor Navigation Module provides the required topographic representation of 
the outdoor space as well as additions to the core which are required in the context of outdoor navigation. As 
with the Indoor Navigation Module, existing models and standards, such as GDF, shall be reused or linked.  

 

Extension Module: Navigation Module 

The Navigation Module finally brings together the Indoor Navigation Module and the Outdoor Navigation 
Module into a common navigation framework to ensure a seamless transition from indoor to outdoor and vice 
versa. However, this module is optional which means that the Indoor Navigation Module and the Outdoor 
Navigation Module may also be used independently from each other in applications which only require one or 
the other. 

 

Please note that this OpenGIS® Discussion Paper focuses on the core module and the definition of the 
Multilayered Space Model. The specification of the Indoor Navigation Module is currently carried out 
within the Indoor Spatial Awareness Project (cf. Preface). Both the Outdoor Navigation Module and the 
Navigation Module are subject to future work. Participation and contribution in the development are 
highly welcomed and encouraged. 

 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                39 

10 Data Model of the Multilayered Space Model 

The UML diagram depicted in fig. 28 shows the data model for the Multilayered Space Model. The data model 
defines the classes and relations needed to describe the geometric and topological representations of each layer 
in primal space and their corresponding mapping in dual space. Furthermore, it contains classes representing the 
resulting state-transition diagram of each layer, and the multilayered graph linking the states between different 
layers. The XML Schema definition mapping the conceptual data model specified as UML diagram onto a GML 
3.1.1 application schema is given in Annex A. 

The classes in fig. 28 are arranged according to the subdivision of each layer into four distinct regions as dis-
cussed in section 8.1 (cf. fig. 9). For each layer, its geometry and topology representations in primal and dual 
space are modeled in accordance with ISO 19107. Thus, the geometry representation in primal Euclidean space 
is represented as GM_Solids and the corresponding induced topology (natural topology, cf. Munkres [8]) as 
TP_Solids. Both representations are linked by “realization” associations. Following the Poincaré duality, the 
TP_Solids and TP_Faces in primal topology space are mapped to TP_Nodes respectively TP_Edges in dual 
space.  

The resulting dual graph is equivalent to the topological part of the Node-Relation-Structure (NRS) proposed by 
Lee [6, 7] which allows for a simplified representation of the complex topological relationships between 3D 
spatial objects. The 3D Euclidean space embedding of the NRS is realized as GM_Points and GM_Curves. 

The separate layers of the Multilayered Space Model are represented by the class SpaceLayer which may denote 
its relation to other SpaceLayers, e.g. correlation, dependency, or aggregation (for subspaces), using the associa-
tion class TypeOfRelation. A Layer aggregates States and Transitions which are directly associated with the 
corresponding topology classes of the NRS. By this means, the state-transition diagram for each layer is realized. 
SpaceLayers can be connected through the InterSpaceConnection class which represents a TP_Edge in dual 
topology space connecting two states from separate layers. The inter-space connections (InterSpaceConnections) 
together with the intra-space connections (States and Transitions) finally establish the MultiLayeredGraph. 

The classes Space and SpaceBoundary represent real world objects in accordance with the notion of geographic 
features defined by ISO 19109. A Space is a semantic class corresponding to one cell in Euclidean primal space 
of one layer. Accordingly, SpaceBoundary is used to semantically describe the boundary faces of each cell. Both 
classes are seen as interfaces which connect the Multilayered Space Model to existing semantic 3D models 
describing e.g. the topographic interior built environment. For example, the class Space can be related to a Room 
in CityGML [11] or an IfcSpace in IFC [12]. The class SpaceBoundary can be related to a _BoundarySurface 
feature in CityGML (e.g., WallSurface, ClosureSurface, InteriorWallSurface, etc) or an IfcWall in IFC. 

 

 

 

 

 

 

 

 

 

 

 

 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                40 

 

 
 

Fig. 28: Data Model of the Multilayered Space-Event Model 

 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                41 

Annex A  
(normative) 

 
XML Schema Definition 

The data model of the Multilayered Space-Event model as introduced as UML diagram in chapter 10 (cf. fig. 28) 
has been mapped to a GML 3.1.1 application schema. The corresponding XML Schema Definition is given in 
the following. This XML Schema Definition is normative. Any XML instance document claiming conformance 
to the Multilayered Space-Event Model specified by this OpenGIS® Discussion Paper must be valid with respect 
to this XML Schema Definition. Furthermore, the rules and requirements of the Multilayered Space-Event 
Model specified in clause 8 to 10 must be obeyed.  

 
<?xml version="1.0" encoding="utf-8" ?> 
<xs:schema xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.igg.tu-berlin.de/MLSM/0.1.0" 
    attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://www.igg.tu-berlin.de/MLSM/0.1.0" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
    <xs:import namespace="http://www.opengis.net/gml" schemaLocation="3.1.1/base/gml.xsd"/> 
    <!-- ========================================================================================= --> 
    <!-- =================================== Highlevel Elements ====================================== --> 
    <!-- ========================================================================================= --> 
    <xs:complexType name="MultiLayeredGraphType"> 
        <xs:annotation> 
            <xs:documentation>The overall structure of the Multilayered Space Model constitutes a Multilayered Graph, where all 
                the nodes from all n layers are included but are separated into n partitions which are connected by interspace 
                connections. Furthermore the graph also contains the state transition edges (intraspace 
                connections).</xs:documentation> 
        </xs:annotation> 
        <xs:complexContent> 
            <xs:extension base="gml:AbstractFeatureCollectionType"> 
                <xs:sequence/> 
            </xs:extension> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:element name="MultiLayeredGraph" type="MultiLayeredGraphType" substitutionGroup="gml:_FeatureCollection"/> 
    <!--========================================================================================== --> 
    <xs:element name="spaceLayerMember" type="SpaceLayerPropertyType" substitutionGroup="gml:featureMember"/> 
    <!--========================================================================================== --> 
    <xs:complexType name="InterSpaceConnectionPropertyType"> 
        <xs:complexContent> 
            <xs:restriction base="gml:FeaturePropertyType"> 
                <xs:sequence minOccurs="0"> 
                    <xs:element ref="InterSpaceConnection"/> 
                </xs:sequence> 
            </xs:restriction> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:complexType name="InterSpaceConnectionType"> 
        <xs:annotation> 
            <xs:documentation> Intersecting the geometries of the layer combination provides an edge if the intersection of their 
                interior geometries is non-empty. The edge express the Egenhofer relations contains, overlap and equals and is 
                called interspace connection. </xs:documentation> 
        </xs:annotation> 
        <xs:complexContent> 
            <xs:extension base="gml:AbstractFeatureType"> 
                <xs:sequence> 
                    <xs:element name="state" type="ReferencePropertyType" minOccurs="2" maxOccurs="2"/> 
                    <xs:element name="topoEdge" type="gml:DirectedEdgePropertyType" minOccurs="1" maxOccurs="1"/> 
                    <xs:element name="topoRelation" type="InterSpaceTopologyRelationType" minOccurs="0" maxOccurs="1"/> 
                </xs:sequence> 
            </xs:extension> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:element name="InterSpaceConnection" type="InterSpaceConnectionType" substitutionGroup="gml:_Feature"/> 
    <!--========================================================================================== --> 
    <xs:element name="interSpaceConnectionMember" type="InterSpaceConnectionPropertyType" substitu-



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                42 

tionGroup="gml:featureMember"/> 
    <!--========================================================================================== --> 
    <xs:complexType name="SpaceLayerType"> 
        <xs:annotation> 
            <xs:documentation>The separate Layers of the Multilayered Space Model are represented by the class SpaceLayer which 
                may denote its relation to other layers, e.g. correlation, dependency or aggregation using the association class 
                TypeOfRelation. A SpaceLayer aggregates States and Transitions which are directly associated with the 
                corresponding topology and geometry classes. </xs:documentation> 
        </xs:annotation> 
        <xs:complexContent> 
            <xs:extension base="gml:AbstractFeatureType"> 
                <xs:sequence> 
                    <xs:element name="class" type="SpaceLayerClassType" minOccurs="0" maxOccurs="1"/> 
                    <xs:element name="relatedTo" type="SpaceLayerAssociationType" minOccurs="0" maxOccurs="unbounded"/> 
                    <xs:element name="space" type="SpacePropertyType" minOccurs="0" maxOccurs="unbounded"/> 
                    <xs:element name="spaceBoundary" type="SpaceBoundaryPropertyType" minOccurs="0" maxOccurs="unbounded"/> 
                    <xs:element name="state" type="StatePropertyType" minOccurs="0" maxOccurs="unbounded"/> 
                    <xs:element name="transition" type="TransitionPropertyType" minOccurs="0" maxOccurs="unbounded"/> 
                </xs:sequence> 
            </xs:extension> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:element name="SpaceLayer" type="SpaceLayerType" substitutionGroup="gml:_Feature"/> 
    <!--========================================================================================== --> 
    <xs:complexType name="SpaceLayerPropertyType"> 
        <xs:complexContent> 
            <xs:restriction base="gml:FeaturePropertyType"> 
                <xs:sequence minOccurs="0"> 
                    <xs:element ref="SpaceLayer"/> 
                </xs:sequence> 
            </xs:restriction> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:complexType name="SpaceLayerAssociationType"> 
        <xs:sequence minOccurs="0"> 
            <xs:element ref="SpaceLayer"/> 
        </xs:sequence> 
        <xs:attribute name="typeOfRelation" type="TypeOfRelationType" use="required"/> 
        <xs:attributeGroup ref="gml:AssociationAttributeGroup"/> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <!-- =================================== Primal Space Elements ================================== --> 
    <!-- ========================================================================================= --> 
    <xs:complexType name="SpaceType"> 
        <xs:annotation> 
            <xs:documentation> For each layer, its geometry and topology representations in primal and dual space are modelled in 
                accordance with ISO 19107. Thus, the geometry representation in primal Euclidean space is represented as GM_Solids 
                and the corresponding induced topology (natural topology) as TP_Solids. </xs:documentation> 
        </xs:annotation> 
        <xs:complexContent> 
            <xs:extension base="gml:AbstractFeatureType"> 
                <xs:sequence> 
                    <xs:element name="externalReference" type="ExternalReferenceType" minOccurs="0" maxOccurs="1"/> 
                    <xs:element name="topoSolid" type="gml:DirectedTopoSolidPropertyType" minOccurs="0" maxOccurs="1"/> 
                    <xs:element name="state" type="ReferencePropertyType" minOccurs="0" maxOccurs="1"/> 
                    <xs:element name="spaceBoundary" type="ReferencePropertyType" minOccurs="0" maxOccurs="unbounded"/> 
                </xs:sequence> 
            </xs:extension> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:element name="Space" type="SpaceType" substitutionGroup="gml:_Feature"/> 
    <!--========================================================================================== --> 
    <xs:complexType name="SpacePropertyType"> 
        <xs:complexContent> 
            <xs:restriction base="gml:FeaturePropertyType"> 
                <xs:sequence minOccurs="0"> 
                    <xs:element ref="Space"/> 
                </xs:sequence> 
            </xs:restriction> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:complexType name="SpaceBoundaryType"> 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                43 

        <xs:complexContent> 
            <xs:extension base="gml:AbstractFeatureType"> 
                <xs:sequence> 
                    <xs:element name="externalReference" type="ExternalReferenceType" minOccurs="0" maxOccurs="1"/> 
                    <xs:element name="topoFace" type="gml:DirectedFacePropertyType" minOccurs="0" maxOccurs="1"/> 
                    <xs:element name="transition" type="ReferencePropertyType" minOccurs="0" maxOccurs="1"/> 
                    <xs:element name="space" type="ReferencePropertyType" minOccurs="0" maxOccurs="2"/> 
                </xs:sequence> 
            </xs:extension> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:element name="SpaceBoundary" type="SpaceBoundaryType" substitutionGroup="gml:_Feature"/> 
    <!--========================================================================================== --> 
    <xs:complexType name="SpaceBoundaryPropertyType"> 
        <xs:complexContent> 
            <xs:restriction base="gml:FeaturePropertyType"> 
                <xs:sequence minOccurs="0"> 
                    <xs:element ref="SpaceBoundary"/> 
                </xs:sequence> 
            </xs:restriction> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <!-- =================================== Dual Space Elements ====================================== --> 
    <!-- ========================================================================================= --> 
    <xs:complexType name="StateType"> 
        <xs:annotation> 
            <xs:documentation> Within the dual graph structure of one layer a node in dual space represents a space (e.g. a room 
                within a building) in primal space </xs:documentation> 
        </xs:annotation> 
        <xs:complexContent> 
            <xs:extension base="gml:AbstractFeatureType"> 
                <xs:sequence> 
                    <xs:element name="topoNode" type="gml:DirectedNodePropertyType" minOccurs="1" maxOccurs="1"/> 
                    <xs:element name="transition" type="ReferencePropertyType" minOccurs="0" maxOccurs="unbounded"/> 
                    <xs:element name="interSpaceConnection" type="ReferencePropertyType" minOccurs="0" maxOccurs="unbounded"/> 
                    <xs:element name="space" type="ReferencePropertyType" minOccurs="0" maxOccurs="1"/> 
                </xs:sequence> 
            </xs:extension> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:element name="State" type="StateType" substitutionGroup="gml:_Feature"/> 
    <!--========================================================================================== --> 
    <xs:complexType name="StatePropertyType"> 
        <xs:complexContent> 
            <xs:restriction base="gml:FeaturePropertyType"> 
                <xs:sequence minOccurs="0"> 
                    <xs:element ref="State"/> 
                </xs:sequence> 
            </xs:restriction> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:complexType name="TransitionType"> 
        <xs:annotation> 
            <xs:documentation> Within the dual graph structure of one layer an edge in dual space represents the adjacencies or 
                connections (e.g. doors or passages as intraspace connections) </xs:documentation> 
        </xs:annotation> 
        <xs:complexContent> 
            <xs:extension base="gml:AbstractFeatureType"> 
                <xs:sequence> 
                    <xs:element name="topoEdge" type="gml:DirectedEdgePropertyType" minOccurs="1" maxOccurs="1"/> 
                    <xs:element name="state" type="ReferencePropertyType" minOccurs="0" maxOccurs="2"/> 
                    <xs:element name="spaceBoundary" type="ReferencePropertyType" minOccurs="0" maxOccurs="1"/> 
                </xs:sequence> 
            </xs:extension> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <xs:element name="Transition" type="TransitionType" substitutionGroup="gml:_Feature"/> 
    <!--========================================================================================== --> 
    <xs:complexType name="TransitionPropertyType"> 
        <xs:complexContent> 
            <xs:restriction base="gml:FeaturePropertyType"> 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                44 

                <xs:sequence minOccurs="0"> 
                    <xs:element ref="Transition"/> 
                </xs:sequence> 
            </xs:restriction> 
        </xs:complexContent> 
    </xs:complexType> 
    <!-- ========================================================================================== --> 
    <!-- ===========================External references ========================================= --> 
    <!-- ========================================================================================== --> 
    <xs:complexType name="ExternalReferenceType"> 
        <xs:annotation> 
            <xs:documentation>Type describing the reference to an corresponding object in an other information system, for example 
                in the german cadastre ALKIS, the german topographic information system or ATKIS, or the OS MasterMap. The 
                reference consists of the name of the external information system, represented by an URI, and the reference of the 
                external object, given either by a string or by an URI. If the informationSystem element is missing in the 
                ExternalReference, the ExternalObjectReference must be an URI, which contains an indication of the 
                informationSystem.</xs:documentation> 
        </xs:annotation> 
        <xs:sequence> 
            <xs:element name="informationSystem" type="xs:anyURI" minOccurs="0"/> 
            <xs:element name="externalObject" type="ExternalObjectReferenceType"/> 
        </xs:sequence> 
    </xs:complexType> 
    <!-- ========================================================================================== --> 
    <xs:complexType name="ExternalObjectReferenceType"> 
        <xs:choice> 
            <xs:element name="name" type="xs:string"/> 
            <xs:element name="uri" type="xs:anyURI"/> 
        </xs:choice> 
    </xs:complexType> 
    <!-- ========================================================================================== --> 
    <xs:complexType name="ReferencePropertyType"> 
        <xs:complexContent> 
            <xs:restriction base="gml:AssociationType"> 
                <xs:sequence/> 
            </xs:restriction> 
        </xs:complexContent> 
    </xs:complexType> 
    <!--========================================================================================== --> 
    <!--=========================== SIMPLE TYPES ================================================== --> 
    <!-- ========================================================================================= --> 
    <xs:simpleType name="SpaceLayerClassType"> 
        <xs:annotation> 
            <xs:documentation>SpaceLayers can be qualified by the attribute SpaceLayerClassType. The attribute differentiates 
                between Topographic and Sensor Space and logical Spaces (like zoning models for security 
                areas).</xs:documentation> 
        </xs:annotation> 
        <xs:restriction base="xs:string"> 
            <xs:enumeration value="topographic"/> 
            <xs:enumeration value="sensor"/> 
            <xs:enumeration value="logical"/> 
        </xs:restriction> 
    </xs:simpleType> 
    <!-- ========================================================================================= --> 
    <xs:simpleType name="TypeOfRelationType"> 
        <xs:restriction base="xs:string"> 
            <xs:enumeration value="correlation"/> 
            <xs:enumeration value="dependency"/> 
            <xs:enumeration value="aggregation"/> 
        </xs:restriction> 
    </xs:simpleType> 
    <!-- ========================================================================================= --> 
    <xs:simpleType name="InterSpaceTopologyRelationType"> 
        <xs:restriction base="xs:string"> 
            <xs:enumeration value="equals"/> 
            <xs:enumeration value="contains"/> 
            <xs:enumeration value="overlap"/> 
            <xs:enumeration value="inside"/> 
        </xs:restriction> 
    </xs:simpleType> 
    <!-- ========================================================================================= --> 
</xs:schema> 

Listing 1: Normative XML Schema Definition of the Multilayered Space-Event Model 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                45 

 

Annex B  
(informative) 

 
Example XML instance document 

This annex illustrates the structure of an XML instance document following to the normative XML Schema 
definition of the Multilayered Space-Event Model as introduced in Annex A. It picks up the example for the 
application of the Multilayered Space-Event Model given in chapter 8.6 and shows how to encode the separate 
space layers as well as the resulting Multilayered Graph containing both the intra-space adjacency graphs and the 
inter-space connections. In order to keep the example clear, only two of the space layers being discussed and 
modeled in chapter 8.6 are mapped to a corresponding XML instance document. All remaining layers can be 
easily added and encoded following the explanations in this annex. 

The following fig. 29 shows the setting used in the following example. On the left of fig. 29, the partitioning of 
topographic space into navigable cells suitable for the locomotion type “driving” (e.g. wheel chair users and 
mobile robots) as well as two coverage areas of WiFi access points in primal space is shown. The right part of 
fig. 29 illustrates the resulting Multilayered Graph for these two space layers in dual space. Please refer to 
chapter 8.6 for further descriptions.   

 
Fig. 29: Example selected context of navigation “Drivable” and “WiFi” as introduced and discussed in chapter 8.6. 

The following listing 2 illustrates the general skeleton of XML instance documents representing a concrete 
setting of the Multilayered Space-Event Model. The root element <MultiLayeredGraph> is a feature collection 
which maps the Multilayered Graph of the conceptual data model. The elements of this feature collection can be 
separated into two feature types: 1) <SpaceLayer> elements providing a description of each space layer accord-
ing to the structured space model (cf. chapter 8.1), and 2) <InterSpaceConnection> elements denoting the inter-
space connectivity between the <SpaceLayer>s. 
 
<?xml version="1.0" encoding="UTF-8"?> 
<MultiLayeredGraph xmlns="http://www.igg.tu-berlin.de/MLSM/0.1.0" xmlns:gml="http://www.opengis.net/gml" 
    xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.igg.tu-berlin.de/MLSM/0.1.0 MLSM_v0.1.0.xsd"> 
 
    <!-- Part 1: Description of Space Layers --> 
    <spaceLayerMember> 
        <!—E.g., Topograhy Space --> 
        <SpaceLayer>  …   </SpaceLayer> 
    </spaceLayerMember> 
 

    <spaceLayerMember> 
        <!—E.g., Sensor Space --> 

Room 1 

 

WiFi A 

 
WiFi B 

 

WiFi AB 

 
 Outer 

 

Lo
ca

liz
at

io
n 

 

Routing 

 

Tracking 

 

Room 3b 

 

Room 2 

 

Room 3a 

 

 Outer 

 

Layer “Drivable” 
 

Layer “WiFi” 
 

Room 1 
 Room 2 

 

Room 3a 
 

Room 3b 
 

WiFi A 
 

WiFi B 
 WiFi AB 

 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                46 

        <SpaceLayer>  …  </SpaceLayer> 
    </spaceLayerMember> 

 
    <!-- Part 2: Description of inter-space connectivity between the Space Layers --> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection>  …  </InterSpaceConnection>         
    </interSpaceConnectionMember> 
 
</MultiLayeredGraph> 
 

Listing 2: Skeleton of XML instance documents according to the Multilayered Space-Event Model. 

SpaceLayer element 

The general layout of a <SpaceLayer> element is shown in listing 3. The listing is an excerpt of the description 
of the topographic space as sketched in fig. 29 which represents navigable areas for driving subjects and objects. 
 
        <SpaceLayer> 
            <gml:name>Building Topography Layer (Drivable)</gml:name> 
            <class>topographic</class> 
             
            <!-- Spaces in primal space (geometry and topology) --> 
            <space> 
                <Space gml:id="TL_Space_Room1"> 
                    <externalReference> 
                        <informationSystem>file://CityGML_Builing.gml</informationSystem> 
                        <externalObject> 
                            <uri>#Room1</uri> 
                        </externalObject> 
                    </externalReference> 
                    <topoSolid> 
                        <gml:TopoSolid> 
                            <gml:directedFace xlink:href="#TL_Face_Door1"/> 
                            <gml:directedFace xlink:href="#TL_Face_Door2"/> 
                            <gml:directedFace xlink:href="#TL_Face_InteriorWall1"/> 
                            … 
                            <gml:solidProperty xlink:href="file://CityGML_Builing.gml#Room1_solid_geometry"/> 
                     </gml:TopoSolid> 
                    </topoSolid> 
                </Space> 
            </space> 
             
            <space> 
                <Space gml:id="TL_Space_Room2"> … </Space> 
            </space> 
 
            … 
             
            <!-- SpaceBoundaries in primal space (topology and geometry) --> 
            <spaceBoundary> 
                <SpaceBoundary gml:id="TL_SpaceBoundary_Door1"> 
                    <externalReference> 
                        <informationSystem>file://CityGML_Builing.gml</informationSystem> 
                        <externalObject> 
                            <uri>#Door1</uri> 
                        </externalObject> 
                    </externalReference> 
                    <topoFace> 
                        <gml:Face gml:id="TL_Face_Door1"> 
                            <gml:directedEdge> …  </gml:directedEdge> 
                            <gml:directedTopoSolid>  …  </gml:directedTopoSolid>   
                            <gml:surfaceProperty xlink:href="CityGML_Builing.gml#Door1_surface_geometry"/> 
                        </gml:Face> 
                    </topoFace> 
                </SpaceBoundary> 
            </spaceBoundary> 
 
            <spaceBoundary> 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                47 

                <SpaceBoundary gml:id="TL_SpaceBoundary_Door2">  …  </SpaceBoundary> 
            </spaceBoundary> 
             
            … 
             
            <!-- Intralayer adjacency graph --> 
            <!-- States resulting from Poincare Dualityapplied to Spaces --> 
            <state> 
                <State gml:id="TL_State_Room1"> 
                    <topoNode> 
                        <gml:Node gml:id="TL_Node_Room1"> 
                            <gml:pointProperty> 
                                <gml:Point> 
                                    <gml:pos> … </gml:pos> 
                                </gml:Point> 
                            </gml:pointProperty> 
                        </gml:Node> 
                    </topoNode> 
                </State>                 
            </state> 
             
            <state> 
                <State gml:id="TL_State_Room2">  …  </State>                 
            </state> 
            
            <state> 
                <State gml:id="TL_State_Outer">  ...  </State>                 
            </state> 
             
            … 
                         
            <!-- Transitions resulting from Poincare Dualityapplied to SpaceBoundaries --> 
            <transition> 
                <Transition gml:id="TL_Transition_Door1"> 
                    <topoEdge> 
                        <gml:Edge> 
                            <gml:directedNode xlink:href="#TL_Node_Room1"/> 
                            <gml:directedNode xlink:href="#TL_Node_Room2"/> 
                            <gml:curveProperty> 
                                <gml:LineString> 
                                    <gml:posList> … </gml:posList> 
                                </gml:LineString> 
                            </gml:curveProperty> 
                        </gml:Edge>                         
                    </topoEdge> 
                    <state xlink:href="#TL_State_Room1"/> 
                    <state xlink:href="#TL_State_Room2"/> 
                </Transition>                 
            </transition> 
             
            <transition> 
                <Transition gml:id="TL_Transition_Door2">  …  </Transition>                 
            </transition> 
             
            … 
                         
        </SpaceLayer> 
 

Listing 3: General layout of a <SpaceLayer> element describing a single space layer  
according to the structured space model (cf. chapter 8.1). 

A <SpaceLayer> is a container for further feature elements which are used to systematically describe the space 
layer in primal and dual space on the one hand and geometry and topology on the other hand. A first type of sub-
elements is <Space> which represents a real world object and one cell in primal space. In this example we 
assume that the interior built environment is modeled according to CityGML and stored in an external file. As 
shown in listing 3, <Space>s may denote references to thematic objects in external data sources such as files or 
databases. For example, the first <Space> element representing Room1 in listing 3 references an existing 
CityGML Room object. The geometry and topology in primal space of the cell represented by <Space> is 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                48 

specified using GML3 elements. Again, references to existing geometries in external data sources are allowed. In 
this example, the geometry for Room1 is also taken from the external CityGML file using the XLink mechanism 
provided by GML3. Of course, external references are not mandatory and all information may instead be given 
inline. 

In addition to <Space>, the <SpaceBoundary> sub-elements of <SpaceLayer> are used to semantically describe 
the boundary faces of each cell and to represent both their geometry and topology in primal space. For example, 
the first <SpaceBoundary> element in listing 3 represents the Door1 between Room1 and Room2 and, thus, a 
shared face where both rooms touch. Similar to the <Space> elements, <SpaceBounday> may denote a reference 
to an external data source which contains the semantic real world object. In this example, Door1 is again defined 
in the external CityGML file which is referenced in listing 3. The same CityGML file is further referenced for 
the geometry description of the door. Both geometry and topology are modeled based on GML3 elements. Please 
note, that the <gml:Face> representations of <SurfaceBoundary>s can, of course, be reused to create a 
<gml:TopoSolid> representation for the <Space>s. For example, the <gml:TopoSolid> of the first <Space> in 
listing 3 (Room1) is referencing the <gml:Face> of the first <SpaceBoundary> element (Door1) using GML3’s 
XLink mechanism. 

In addition to the primal space representation, the sub-elements <State> and <Transition> of <SpaceLayer> are 
used for the dual representation of the space layer both in topology and geometry space. A <State> results from 
applying the Poincaré Duality to a cell in primal space and, thus, represents a node in dual space. Accordingly, a 
<Transition> is the result from mapping a <SpaceBoundary> from primal space to dual space and, thus, repre-
sents as an edge. The topological representation of <State> as <gml:Node> and <Transition> as <gml:Edge> is 
used to establish the intra-layer adjacency graph. Furthermore, this graph can be embedded into 3D Euclidean 
Space through an additional geometric representation. The latter one allows for describing trajectories and 
geometric route networks.  

The following listing 4 shows the <SpaceLayer> element for representing the WiFi Sensor Layer. Please note, 
that this listing is again just an excerpt and lacks the full topological and geometric representation of the cells for 
brevity reasons.  
  
       <SpaceLayer> 
            <gml:name>WiFi Sensor Layer</gml:name> 
            <class>sensor</class> 
             
            <space> 
                <Space gml:id="SL_Space_WiFi_A">  …  </Space> 
            </space> 
             
            <space> 
                <Space gml:id="SL_Space_WiFi_AB">  …  </Space> 
            </space> 
             
            <space> 
                <Space gml:id="SL_Space_WiFi_B">  …  </Space> 
            </space> 
             
            <state> 
                <State gml:id="SL_State_Wifi_A"> 
                    <topoNode> 
                        <gml:Node gml:id="SL_Node_WiFi_A"></gml:Node> 
                    </topoNode> 
                    … 
                </State>                 
            </state> 
             
            <state> 
                <State gml:id="SL_State_Wifi_AB"> 
                    <topoNode> 
                        <gml:Node gml:id="SL_Node_WiFi_AB"></gml:Node> 
                    </topoNode> 
                    … 
                </State>                 
            </state> 
             



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                49 

            <state> 
                <State gml:id="SL_State_Wifi_B"> 
                    <topoNode> 
                        <gml:Node gml:id="SL_Node_WiFi_B"></gml:Node> 
                    </topoNode> 
                    … 
                </State>                 
            </state> 
             
            <state> 
                <State gml:id="SL_State_Wifi_Outer"> 
                    <topoNode> 
                        <gml:Node gml:id="SL_Node_WiFi_Outer"></gml:Node> 
                    </topoNode> 
                    … 
                </State>                 
            </state> 
             
            <transition> 
                <Transition> 
                    <topoEdge> 
                        <gml:Edge> 
                            <gml:directedNode xlink:href="#SL_Node_WiFi_A"/> 
                            <gml:directedNode xlink:href="#SL_Node_WiFi_AB"/> 
                        </gml:Edge>                         
                    </topoEdge> 
                    … 
                </Transition>                 
            </transition> 
             
            <transition> 
                <Transition> 
                    <topoEdge> 
                        <gml:Edge> 
                            <gml:directedNode xlink:href="#SL_Node_WiFi_AB"/> 
                            <gml:directedNode xlink:href="#SL_Node_WiFi_B"/> 
                        </gml:Edge>                         
                    </topoEdge> 
                    … 
                </Transition>                 
            </transition> 
             
            <transition> 
                <Transition> 
                    <topoEdge> 
                        <gml:Edge> 
                            <gml:directedNode xlink:href="#SL_Node_WiFi_A"/> 
                            <gml:directedNode xlink:href="#SL_Node_WiFi_Outer"/> 
                        </gml:Edge>                         
                    </topoEdge> 
                    … 
                </Transition>                 
            </transition> 
             
            <transition> 
                <Transition> 
                    <topoEdge> 
                        <gml:Edge> 
                            <gml:directedNode xlink:href="#SL_Node_WiFi_B"/> 
                            <gml:directedNode xlink:href="#SL_Node_WiFi_Outer"/> 
                        </gml:Edge>                         
                    </topoEdge> 
                    … 
                </Transition>                 
            </transition> 
             
        </SpaceLayer> 
 

Listing 4: Excerpt of the <SpaceLayer> element describing the WiFi Sensor Layer as illustrated in fig. 29. 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                50 

InterSpaceConnection element 

The <SpaceLayer> element already fully describes a single space layer of the Multilayered Space-Event Model 
both in primal and dual space. The connections between the layers are represented by the  
<InterSpaceConnection> element. As described in chapter 8, the nodes in dual space of two space layers are 
connected through an inter-space edge iff the corresponding cells in primal space overlap. By this means, the 
dual graph representations of all layers are combined to the Mutlilayered Graph. 

The following excerpt in listing 5 shows the <InterSpaceConnection> element which denotes the overlap of 
Room1 and WiFi coverage area A in primal space and, thus, establishes the corresponding edge between the 
nodes in dual space. 
 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room1"/> 
            <state xlink:href="#SL_Space_WiFi_A"/> 
            <topoEdge> 
                <gml:Edge> 
                    <gml:directedNode xlink:href="#TL_Node_Room1"/> 
                    <gml:directedNode xlink:href="#SL_Node_WiFi_A"/> 
                </gml:Edge> 
            </topoEdge> 
            <topoRelation>overlap</topoRelation> 
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
 

Listing 5: Example for a single <InterSpaceConnection> element establishing an edge between two nodes of two different space layers in 
dual space. 

As shown in listing 5, the <InterSpaceConnection> may reference the semantic <State> elements which are 
linked between the two space layers. Additionally, it establishes a mandatory <gml:Egde> between their 
<gml:Node> representations in dual topology space. In this example, the XLink mechanism of GML3 is used to 
reference the corresponding elements within the <Space> element of the two <SpaceLayer>s. Please note, that 
an <InterSpaceConnection> only represents the link between two layers. The attribute <topoRelation> can be 
used to express the type of topological relation between the primal cells of both layers. For example, a subspace 
layer is restricted to the relations “contains”, “inside”, and “equals”. 

All <InterSpaceConnection>s for the example depicted in fig. 29 are shown in the following listing 6. Please 
note, that listing 6 is an excerpt and lacks the full topological representation of the <InterSpaceConnection>s for 
brevity reasons. 
 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room1"/> 
            <state xlink:href="#SL_Space_WiFi_A"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room1"/> 
            <state xlink:href="#SL_Space_WiFi_AB"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room1"/> 
            <state xlink:href="#SL_Space_WiFi_Outer"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                51 

    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room2"/> 
            <state xlink:href="#SL_Space_WiFi_B"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room2"/> 
            <state xlink:href="#SL_Space_WiFi_AB"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room2"/> 
            <state xlink:href="#SL_Space_WiFi_Outer"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room3a"/> 
            <state xlink:href="#SL_Space_WiFi_A"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room3a"/> 
            <state xlink:href="#SL_Space_WiFi_Outer"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room3b"/> 
            <state xlink:href="#SL_Space_WiFi_B"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Room3b"/> 
            <state xlink:href="#SL_Space_WiFi_Outer"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
    <interSpaceConnectionMember> 
        <InterSpaceConnection> 
            <state xlink:href="#TL_State_Outer"/> 
            <state xlink:href="#SL_Space_WiFi_Outer"/> 
            <topoEdge> ...  </topoEdge> 
            <topoRelation>overlap</topoRelation>  
        </InterSpaceConnection>         
    </interSpaceConnectionMember> 
 

Listing 6: <InterSpaceConnection> elements denoting the connections between the two space layers shown in fig. 29. 

 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                52 

Finally, the two illustrated <SpaceLayer> elements of the Topography Space and the WiFi Sensor Space (listings 
3 and 4) together with the <InterSpaceConnection> elements shown in listing 6 should be inserted in the skele-
ton described by listing 2 in order to get a full and valid XML instance document of the example shown in fig. 
29. 

 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                53 

Bibliography 

1. Herring, J., 2001. The OpenGIS Abstract Specification, Topic 1: Feature Geometry (ISO 19107 Spatial 
Schema), Version 5. OGC Document Number 01-101. / prepared by Technical Committee ISO/TC211 Geo-
graphic information — spatial schema, available at: 

 http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_tc_browse.htm 

2. Lorenz, B., Ohlbach, H. J., Stoffel, E.-P., Rosner, M., September 2006, NL Navigation Commands from 
Indoor WLAN fingerprinting position data, Technical Report of REWERSE-Project, Munich, Germany 

 http://www.pms.ifi.lmu.de/publikationen/idefixStatic/rewerse-publications.html#REWERSE-DEL-2006-A1-
D7, (accessed November 2010),   

3. Anagnostopoulus, C., Testsos, V., Kikiras, P., Hadjiefthymiades, S. P., 2003. OntoNav: A Semantic Indoor 
Navigation System. In: First International Workshop on Managing Context Information in Mobile and Per-
vasive Environments, Vol. 165, Ayia Napa, Zypern  

4. Kulyukin, V., Gharpure, C., Nicholson, J., 2005. RoboCart: Toward Robot-Assisted Navigation of Crocery 
Stores by the Visually Impaired. In: Proceedings of the international Conference on Intelligent Robots and 
Systems, IROS 2005, IEEE/RSJ  

5.  Lefebvre S, Hornus S. Automatic cell-and-portal decomposition. Technical Report 4898, INRIA, 2003. 
http://artis.imag.fr/Publications/2003/LH03/ (accessed November 2010). 

6. Lee, J., Kwan, M.-P. 2005. A Combinatorial Data Model for Representing Topological Relationships be-
tween 3-D Geographic Entities, International Journal of Geographical Information Sciences, 19 (10), p. 
1039-1056. 

7. Lee, J., Zlatanova, S., 2008. A 3D data model and topological analyses for emergency response in urban 
areas. Geospatial Information Technology for Emergency Response – Zlatanova & Li (eds), Taylor & Fran-
cis Group, London, UK 

8.  Munkres, J. R., 1984. Elements of Algebraic Topology. Addison-Wesley, Menlo Park, CA  

9. Kolodziej, K. W., Hjelm, J., 2006, Local Positioning Systems – LBS Applications and Services, Taylor & 
Francis Group, London, UK 

10. Gröger, G., Kolbe, T.H., Czerwinski, A., Nagel, C. 2008: OpenGIS City Geography Markup Language 
(CityGML), Version 1.0.0, OGC Encoding Specification, Doc. No. 08-007r1 

11. Kolbe, T.H., Gröger, G. & Plümer, L. 2005. CityGML – Interoperable Access to 3D City Models. In P. van 
Oosterom, S. Zlatanova & E.M. Fendel (eds), Geo-information for Disaster Management; Proc. of the 1st In-
ternational Symposium on Geo-information for Disaster Management’, Delft, The Netherlands, March 21–
23, 2005. Springer. 

12. Adachi, Y., Forester, J., Hyvarinen, J., Karstila, K., Liebich, T., Wix, J. 2003. Industry Foundation Classes 
IFC2x Edition 3, International Alliance for Interoperability, http://www.iai-international.org. 

13. Liao, L., Fox, D., Hightower, J. Kautz, H., Schulz, D., 2003. Voronoi Tracking: Location Estimation Using 
Sparse and Noisy Sensor Data. In: Proc. of the International Conference on Intelligent Robots and Systems, 
IROS 2003, IEEE/RSJ 

14. Egenhofer, M., Herring, J., 1990, Categorizing Binary Topological Relations between Regions, Lines and 
Points in Geographical Databases, NCGIA Technical Report 

15. Open Geospatial Consortium Inc., 2009. The Specification Model – A Standard for Modular specifications, 
OGC 08-131r3, OGC Version: 1.0.0 

16. LaValle, S. M, 2006. Planning Algorithms. Cambridge University Press, USA 

17. Lorenz, B., Ohlbach, H. J., Stoffel, E.-P., Rosner, M., September 2007. Towards a Semantic Spatial Model 
for Pedestrian Indoor Navigation. In: Lecture Notes in Computer Science - Advances in Conceptual Model-
ing – Foundations and Applications, Volume 4802/2007, Springer, Berlin, Germany 

18. Morris, Sidney A., 2007. Topology without Tears, University of Ballarat, Australia, http://uob-
community.ballarat.edu.au/~smorris/topology.htm, (accessed November 2010) 



OGC 10-191r1 
 

 
Copyright © 2010 Open Geospatial Consortium                54 

19. Fritsch, R. & Piccinini, R. A. (1990). Cellular Structures in Topology. Cambridge University Press, Cam-
bridge, England 

20. Gold, C. M., Ledoux, H., 2007. Simultaneous Storage of Primal and Dual Three-Dimensional Subdivisions. 
In: Computers, Environment and Urban Systems – Topology and Spatial Databases, Vol. 31, Issue 4, 2007. 
Elsevier 

21. Becker, T., Nagel, C., Kolbe, T. H., 2008. A Multilayered Space-Event Model for Navigation in Indoor 
Spaces. In: Lee, Zlatanova (eds.). 3D Geo-Information Scienes, Lecture Notes in Geoinformation and Car-
tography, 2009, Part II, 61-77 

22. Becker, T., Nagel, C., Kolbe, T. H., 2009. Supporting Contexts for Indoor Navigation using a Multilayered 
Space Model, Tenth International Conference on Mobile Data Management:systems, services and middle-
ware, 2009. MDM '09 ; 18 - 20 May 2009, Taipei, Taiwan. Online available 
http://ieeexplore.ieee.org/servlet/opac?punumber=5088898 (accessed November 2010) 

23. Booch, G., Rumbaugh, J., Jacobson, I., 1997. Unified Modeling Language User Guide. Addison-Wesley. 

24. Lee, Y.C. 1990. Geographic information systems for urban applications: Problems and solutions, Environ-
ment and Planning B: Planning and Design, Vol. 17:463-473. 

25. Lee, J. 2004. A Spatial Access Oriented Implementation of a Topological Data Model for 3D Urban Entities. 
GeoInformatica 8(3), 235-262. 

26. Nagel, C., Stadler, A., Kolbe, T. H. 2009. Conceptual Requirements for the Automatic Reconstruction of 
Building Information Models from Uninterpreted 3D Models. In: Kolbe, Zhang, Zlatanova (eds). Interna-
tional Archives of the Photogrammetry, Remote Sensing and Spatial Information Sciences, Vol. XXXVIII-
3-4/C3 

 

 

 

 


