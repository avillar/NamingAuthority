
OGC® Engineering Report OGC 16-094r3r3 

 

Copyright © 2016 Open Geospatial Consortium. 1 
 

 

Open Geospatial Consortium 
Publication Date: 2017-08-18 

Approval Date: 2016-09-22 

Posted Date: 2016-06-21 

Reference number of this document: OGC 16-094r3 

Reference URL for this document: http://www.opengis.net/doc/PER/gpkg_ee_ie 

Category: Public Engineering Report 

Editor(s): Micah Brachman 

OGC GeoPackage Elevation Extension Interoperability 
Experiment Engineering Report 

Copyright © 2017 Open Geospatial Consortium. 
To obtain additional rights of use, visit http://www.opengeospatial.org/legal/. 

Warning 

This document is not an OGC Standard. This document presents a discussion of technology issues 
considered in an initiative of the OGC Innovation Program. This document does not represent an 
official position of the OGC. It is subject to change without notice and may not be referred to as an 
OGC Standard. However, the discussions in this document could very well lead to the definition of 
an OGC Standard.  

 

 

 

Document type:  OGC® Engineering Report 
Document subtype:  
Document stage:  Approved for public release 
Document language:  English 



 

 

License Agreement 

Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, 
to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property 
without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, 
distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to 
do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual 
Property is furnished agrees to the terms of this Agreement. 

If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above 
copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR. 

THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS 
THAT MAY BE IN FORCE ANYWHERE IN THE WORLD. 

THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, 
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR 
PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED 
IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL 
MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE 
UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT 
THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF 
INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY 
DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING 
FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF 
CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH 
THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY. 

This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all 
copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as 
provided in the following sentence, no such termination of this license shall require the termination of any third party end-user 
sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual 
Property, or the operation of the Intellectual Property, infringe, or in LICENSOR’s sole opinion be likely to infringe, any patent, 
copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license 
without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or 
cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party. 

Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual 
Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without 
prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may 
authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any 
LICENSOR standards or specifications. 

This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United 
Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this 
Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, 
and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be 
construed to be a waiver of any rights or remedies available to it. 

None of the Intellectual Property or underlying information or technology may be downloaded or otherwise exported or reexported in 
violation of U.S. export laws and regulations. In addition, you are responsible for complying with any local laws in your jurisdiction 
which may impact your right to import, export or use the Intellectual Property, and you represent that you have complied with any 
regulations or registration procedures required by applicable law to make this license enforceable 



Contents Page 

1	 Introduction ..............................................................................................................6	
1.1	 Scope ...................................................................................................................6	
1.2	 Future work .........................................................................................................6	
1.3	 Forward ...............................................................................................................6	

2	 References ................................................................................................................7	

3	 Terms and definitions ..............................................................................................7	
4	 Conventions .............................................................................................................9	

4.1	 Abbreviated terms ...............................................................................................9	
5	 Objectives of this Interoperability Experiment ......................................................11	

5.1	 Technical Objectives .........................................................................................11	
5.2	 Interoperability Objectives ................................................................................11	

6	 Summary of Key Findings .....................................................................................11	
7	 Setup ......................................................................................................................12	

8	 Experiments ...........................................................................................................13	
8.1	 Experiment 1 .....................................................................................................13	
8.2	 Experiment 2 .....................................................................................................14	

9	 Results ....................................................................................................................14	
9.1	 GeoPackage Creation ........................................................................................14	
9.2	 OGC GeoPackage Compliance testing ..............................................................15	
9.3	 Elevation Extension Compliance testing ...........................................................15	
9.4	 Visualization and Analytics ...............................................................................15	

10	 Technical Issues .....................................................................................................17	
10.1	 Data NULL vs. Data Missing ............................................................................18	
10.2	 Scale and Offset .................................................................................................18	
10.3	 Coordinate Reference Systems ..........................................................................19	

11	 Recommendations ..................................................................................................19	
11.1	 Encode a single NO DATA value rather than Data NULL and Data 

Missing ..............................................................................................................19	
11.2	 Specify a 2D CRS plus a vertical CRS reference for each tile table .................20	
11.3	 Use scale and offset values for each PNG tile ...................................................19	
11.4	 Develop two separate elevation extensions for OGC GeoPackage ...................20	

Annex A: Tiled Gridded Elevation Data Extension ..........................................................21	

Annex B: Height Value Encoding and Sampling ..............................................................27	
Annex C: WGS 84 accuracy ..............................................................................................28	

Annex D: GeoPackage Compliance Test Results ..............................................................29	
Annex E: Revision History ................................................................................................32	
 

  



Figures  Page 
Figure 1: NOAA Bathymetry Data ................................................................................................. 12	

Figure 2: Viewshed using the UK Ordnance Survey Elevation GeoPackage ................................ 16	

Figure 3: LOS using the NOAA Puget Sound Bathymetry GeoPackage ....................................... 16	

Figure 4: Shaded relief using a GeoPackage with NOAA and USGS data .................................... 17	

Figure 5: Elevation profile using a GeoPackage with NOAA and USGS data .............................. 17	

Tables Page 
Table 1: Elevation Extension Use Cases ........................................................................................ 11	

Table 2: Elevation Extension Data Sources .................................................................................... 12	

Table 3: Elevation Extension GeoPackages ................................................................................... 14	

 



Abstract 

    
This OGC Engineering Report (ER) describes the setup, experiments, results and issues 
generated by the GeoPackage Elevation Extension Interoperability Experiment (GPKG-
EE IE). The goal of the GPKG-EE IE was to implement and test a proposed elevation 
extension to the OGC GeoPackage Encoding Standard (12-128r1).  The proposed 
elevation extension was successfully implemented by several IE participants and was 
demonstrated using both 2-Dimensional (2D) and 3-Dimensional (3D) software clients at 
the Washington, DC OGC Technical Committee (TC) meeting in [March 9, 2016].  This 
ER concludes with several recommendations for addressing remaining technical issues 
that must be resolved in order to complete a candidate GeoPackage Elevation Extension 
standard. 

Business Value 

Currently, there is not a standardized way to store elevation data in an OGC GeoPackage.  
Software clients that currently use a GeoPackage data store to display maps, imagery, and 
features could use elevation data within a GeoPackage to extend the client capabilities to 
include 2.5D/3D visualization and analytics such as line-of-sight (LOS).  The 
GeoPackage elevation extension enables lightweight clients that run on handheld and 
tablet devices to perform visualizations and analytics directly on the device, thus provides 
access to these capabilities where a network connection and/or desktop GIS client is not 
available. 

Keywords 

ogcdoc, OGC document, GeoPackage, elevation, tiles, TIFF, PNG 

 

 



OGC GeoPackage Elevation Extension Interoperability 
Experiment Engineering Report 

1 Introduction 

1.1 Scope 

This OGC® document provides guidelines for the implementation of an OGC 
GeoPackage Elevation Extension to store gridded elevation data in a GeoPackage in 
order to support visualization and analysis operations. The elevation extension was 
successfully implemented by several Interoperability Experiment (IE) participants. Using 
elevation data stored in a GeoPackage, visualization and analysis capabilities were 
demonstrated. There are several remaining technical issues that must be resolved in order 
to fully define the GeoPackage Elevation Extension standard.  This report describes the 
setup, experiments, and results of the IE, and concludes with recommendations for 
resolving the remaining technical issues with the GeoPackage Elevation Extension. 

All questions regarding this document should be directed to the editor or the contributors: 

Name Organization 
Micah Brachman Strategic Alliance Consulting, Inc (Editor) 
Terry Idol OGC  
Chris Clark Compusult 
Thomas Neirynck Luciad  
Carl Reed III Carl Reed and Associates 
Rob Cass Compusult 
Jeff Yutzler Image Matters LLC  
Dean Hintz Safe Software Inc 
Brad Hards Brad Hards 
Even Rouault Spatialys 
Chris Little UK Met Office 

 

1.2 Future work 

Improvements in this document are desirable to describe how the remaining technical 
issues with the GeoPackage Elevation Extension are ultimately resolved.  In addition, the 
issues of elevation data interpolation and resampling methods that are not covered in this 
report should be addressed in a separate engineering report or best practices document. 

1.3 Forward 

Attention is drawn to the possibility that some of the elements of this document may be 
the subject of patent rights. The Open Geospatial Consortium shall not be held 
responsible for identifying any or all such patent rights. 

Recipients of this document are requested to submit, with their comments, notification of 
any relevant patent claims or other intellectual property rights of which they may be 



aware that might be infringed by any implementation of the standard set forth in this 
document, and to provide supporting documentation. 

2 References 

The following documents are referenced in this document. For dated references, 
subsequent amendments to, or revisions of, any of these publications do not apply. For 
undated references, the latest edition of the normative document referred to applies. 

 [OGC 12-128r1] OGC GeoPackage Encoding Standard1 (12-128r1) 
(http://www.opengeospatial.org/standards/geopackage) 

[OGC 15-039] “Envisioning an Elevation Extension to the GeoPackage Encoding 
Standard”  

[OGC 15-119] OGC GeoPackage Elevation Extension Interoperability Experiment 
(GPKG-EE IE) Activity Plan  

[Adobe 1992] TIFF http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf 

[Regenstrief Institute, Inc. and the UCUM Organization, 2014]  The Unified Code for 
Units of Measure (UCUM) http://unitsofmeasure.org/ucum.html 

[NGA.STND.0036_1.0.0_WGS84] “Department of Defense World Geodetic System 
1984: Its Definition and Relationships with Local Geodetic Systems”, 8 July 2014. 

[ISO 19111:2007] “Geographic Information – Spatial Referencing by Coordinates”, 
International Organization for Standardization 1 July 2007. 

[ISO/IEC 15948:2004] Portable Network Graphics (PNG): Functional specification. 

[OGC 16-011] Volume 8: CDB Spatial and Coordinate Reference Systems Guidance 

 [OGC 16-006] Volume 10: OGC CDB Implementation Guidance 

[OGC 07-057r7] OpenGIS Web Map Tile Service Implementation Standard 

[OGC 12-101] OGC Web Coverage Service 2.0 Interface Standard – GeoTIFF Coverage 
Encoding Extension 

[Open Source Geospatial Foundation 2012] Tile Map Service Specification 
https://wiki.osgeo.org/wiki/Tile_Map_Service_Specification 

3 Terms and definitions 

For the purposes of this report, the definitions specified in Clause 4 of the OWS Common 
Implementation Standard [OGC 06-121r3] shall apply. In addition, the following terms 
and definitions apply. 

                                                

1 http://www.geopackage.org/ for more information. 



3.1  
Elevation 
A height above a given level.  The common methods of depicting elevation data include 
using a regular grid, a Triangulated Irregular Network (TIN), a point cloud, or contour 
lines.  The GPKG elevation extension was designed for elevation data depicted using a 
regular grid (aka gridded) 

3.2  
GeoPackage 
A platform-independent SQLite database file that contains GeoPackage data and 
metadata tables [OGC 12-128r1] 

3.3  
Extended GeoPackage 
A GeoPackage that contains any additional data elements (tables or columns) or SQL 
constructs (data types, functions, indexes, constraints or triggers) that are not specified in 
[OGC 12-128r1]. 

3.4  
Vertical Datum 
Datum describing the relation of gravity-related heights or depths to the Earth. In most 
cases the vertical datum will be related to mean sea level. Ellipsoidal heights are treated 
as related to a three-dimensional ellipsoidal coordinate system referenced to a geodetic 
datum. Vertical datums include sounding datums (used for hydrographic purposes), in 
which case the heights may be negative heights or depths.[ISO 19111:2007] 

3.5  
Vertical Coordinate 
One-dimensional coordinate reference system based on a vertical datum [ISO 
19111:2007] 

3.6  
Height Above Ellipsoid (HAE) 
Geodetic height h - distance of a point from the ellipsoid measured along the 
perpendicular from the ellipsoid to this point positive if upwards or outside of the 
ellipsoid. NOTE: Only used as part of a three-dimensional ellipsoidal coordinate system 
and never on its own. [ISO 19111-2007] 

3.7  
Geodetic Datum 
Datum describing the relationship of a 2- or 3-dimensional coordinate system to the 
Earth [ISO 19111] 

3.8  
Geoid 
Equipotential surface of the Earth’s gravity field which is everywhere perpendicular to 
the direction of gravity and which best fits mean sea level either locally or globally [ISO 
19111:2007] 



3.9  
Ellipsoid 
Surface formed by the rotation of an ellipse about a main axis. In this International 
Standard, ellipsoids are always oblate, meaning that the axis of rotation is always the 
minor axis. [ISO 19111:2007] 

3.10  
World Geodetic System 1984 (WGS 84) 
An Earth-centered, Earth-fixed (ECEF) worldwide geodetic datum and reference system 
based on a determination of the Earth's parameters and gravity field.  NGA developed the 
system as the standard geographic reference system for use within the Department of 
Defense.  NGA uses World Geodetic System 1984 in its production of maps and charts. 
In principle, NATO and the allied nations approved the use of the World Geodetic 
System 1984 for geospatial information purposes.  It provides uniform datum and 
reference system information for use in joint and multinational operations. In addition, 
GPS - which is a navigation tool for air, land, sea and space operations within the 
Department of Defense - is designed to work in World Geodetic System 1984. 
[NGA.STND.0036_1.0.0_WGS84] 

3.11  
Coordinate System  
Set of mathematical rules for specifying how coordinates are to be assigned to points 
[ISO 19111:2007] 

3.12  
Coordinate Reference System (CRS) 
A Coordinate System that is related to an object by a datum. For geodetic and vertical 
datums, the object will be the Earth. [ISO 19111:2007] 

3.13  
Height 
Distance of a point from a chosen reference surface measured upward along a line 
perpendicular to that surface. A height below the reference surface will have a negative 
value. [ISO 19111:2007] 

3.14  
Mean Sea Level (MSL) 
Average level of the surface of the sea over all stages of tide and seasonal variations. 
Mean sea level in a local context normally means mean sea level for the region calculated 
from observations at one or more points over a given period of time. Mean sea level in a 
global context differs from a global geoid by not more than 2 meters. [ISO 19111:2007] 

3.15  
Gravity-Related Height  
Height (H) dependent on the Earth’s gravity field. NOTE: In particular, orthometric 
height or normal height, which are both approximations of the distance of a point above 
the mean sea level. [ISO 19111:2007] 

4 Conventions 

4.1 Abbreviated terms 

2D Two-Dimensional 



2.5D Two and One-Half Dimensional 

3D Three-Dimensional 
AGC US Army Geospatial Center 

CDB Common DataBase 
CRS Coordinate Reference System 

DIL Disconnected, Intermittent, or Limited 
DTED Digital Terrain and Elevation Data 

ECEF Earth Centered Earth Fixed 
EE  Elevation Extension 

EGM Earth Gravitational Model 
EPSG European Petroleum Specialty Group 

GDAL Geospatial Data Abstraction Library 
GIS Geographic Information System 

GPKG GeoPackage 
GPS Global Positioning System 

HAE Height Above Ellipsoid 
HLZ Helicopter Landing Zone 

IE Interoperability Experiment 
LOS Line of sight 

MSL Mean Sea Level 
NAN Not a number   

NATO North Atlantic Treaty Organization 
NGA National Geospatial Intelligence Agency 

NOAA National Ocean and Aeronautical Administration 
NSG National System for Geospatial Intelligence 

OGC Open Geospatial Consortium 
PNG Portable Network Graphics 

SRS Spatial Reference System 
TIFF Tagged Image File Format 

TMS Tile Map Service 
UK United Kingdom 

USGS United States Geological Survey 
WCS Web Coverage Service 

WKT Well Known Text 
WGS84 World Geodetic System 1984 

WMTS Web Map Tile Service 



5 Objectives of this Interoperability Experiment 

5.1 Technical Objectives 

• Convert gridded elevation data from multiple source formats and store in an OGC 
GeoPackage; 

• Load elevation data stored in a GeoPackage into a map viewer to display 
elevation data in 2D and 2.5/3D; and 

• Accessing elevation data stored in a GeoPackage, perform analytics such as line 
of sight.  

5.2 Interoperability Objectives 

• Develop an interoperable method of storing elevation data in a GPKG that 
supports visualization and analysis use cases (Table 1) on a mobile device 
operating in a disconnected, intermittent, or limited (DIL) data network 
environment. 

• Define a standardized approach to storing elevation data that is aligned with 
current or emerging OGC standards. 

Table 1: Elevation Extension Use Cases 

Use Case Example(s) 

2D Terrain Visualization Hillshade, color relief, slope, contour lines 

3D Terrain Visualization Changing view angles and level of detail 

Site Suitability Analysis Viewsheds, line of sight, slope analysis for 
helicopter landing zones (HLZs)  

Mobility Analysis Calculating least cost paths to support 
terrain-based routing 

Terrain Association Adding photographs and/or imagery to 
mapped locations 

Modeling and Simulation Representation of 3D Geometries (e.g. 
buildings) and models needed to support 
augmented reality training 

 

6 Summary of Key Findings 

The technical objectives of the Elevation Extension Interoperability Experiment were 
achieved.  Three IE participants were able to convert gridded elevation data from source 
data and store it in an OGC GeoPackage compliant data store. Two participants were able 
to display these GeoPackages in a map viewer and perform line of sight analysis.  
GeoPackage elevation extensions were shown to be interoperable, thus the first 
interoperability objective was met. Based on the implementation experience, this report 
recommends that the PNG and TIFF elevation data tiling options be split into two 
separate GeoPackage extensions in order to meet the second interoperability objective, 
alignment with existing or emerging OGC Standards.   



7 Setup 

Several source datasets were obtained and used to generate example Elevation Extension 
GeoPackages.  These data sources are listed in Table 2 below. 

Table 2: Elevation Extension Data Sources 

Source Location Format Spatial 
Resolution (m) 

Area covered 
(km2) 

Size on disk 
(MB) 

USGS Alaska TIFF 10 66 3 

NOAA Puget 
Sound 

TIFF 24 28,000 25 

USGS Puget 
Sound 

DTED2 30 75,000 26 

Ordnance 
Survey 

UK ASC 50 243,000 159 

 

The Alaska Elevation Data obtained from the United States Geological Survey (USGS) 
has the highest spatial resolution (10m) and also contains a mountain. Therefore, this 
dataset has a change of approximately 800 meters of height values. The Puget Sound 
Bathymetry Data obtained from the National Oceanic and Aeronautic Administration 
(NOAA) and contains depth values for a large portion of the Puget Sound area (Figure 1). 
However, the dataset also has sparse coverage for some areas.  The Digital Terrain 
Elevation Data (DTED) has 30-meter spatial resolution and also covers the Puget Sound 
area. The elevation data obtained from the United Kingdom (UK) Ordnance Survey 
covers the entire UK at 50m spatial resolution and is the largest dataset at approximately 
159MB in size. 

Figure 1: NOAA Bathymetry Data 



 

8 Experiments 

Two experiments were performed to assess the suitability of the GPKG Elevation 
Extension in meeting the technical and use case objectives defined above.  The first 
experiment tested the ability to implement the proposal elevation extension using the 
source datasets and the second experiment tested the suitability of these elevation data 
GeoPackages for visualization and analysis.  

8.1 Experiment 1 

For the first experiment the IE participants created GeoPackage elevation data instances 
using the three source datasets described above. These GeoPackages were tested for 
compliance with the OGC GeoPackage Standard [OGC 12-128r1] and with the 
requirements of the proposed elevation extension (please see Annex A for a description 
of the proposed GeoPackage Elevation Extension).  The scope of this experiment was 
initially determined during the kick-off meeting and discussions continued throughout the 
IE. At the 18 January teleconference, the participants agreed to work with a limited 
number of data sets. The participants determined that the USGS Alaska data is interesting 
due to the large range of elevation values (i.e. lots of slope) but too small to test 
scalability. The UK Ordnance Survey data is better for testing scalability due to the larger 
size of the dataset. The NOAA Puget Sound bathymetry data is of value due to the 
sparseness of the data and the use of negative height values (i.e. below Mean Sea Level 
(MSL)). DTED2 is a global elevation dataset and is of special interest to the defense and 
intelligence communities. 



8.2 Experiment 2 

In the second experiment IE participants loaded the elevation data OGC GeoPackages 
into handheld and desktop software, visualized the data in 2D/2.5, and performed a line 
of sight analysis. At the 12 January teleconference, the participants reached a consensus 
to limit the scope of this experiment to color relief for visualization and line of sight for 
analysis. The advantage of this approach was that it simplifies the process of confirming 
that different software applications behaved similarly.  A simple visual qualitative 
comparison of the color relief and line of sight outputs was sufficient to confirm that the 
elevation data GeoPackages were being used similarly by different software applications, 
rather than the more detailed quantitative comparison that would be required by more 
advanced elevation data based analytics such as terrain-based off-road routing. 

9 Results 

9.1 GeoPackage Creation 

A total of fourteen elevation GeoPackages were created during the first experiment.  
Luciad and Brad Hards both created GeoPakages using the Alaska, Puget Sound, and UK 
source data while Compusult created GeoPackages using the three aforementioned data 
sources as well as the DTED2 data. These GeoPackages are listed below in Table 3.  It is 
notable that the elevation extension GeoPackages that use PNG format tiles (uint16) are 
considerably smaller in size than the TIFF format tiles (float32).  For example, the 
DTED2 source data is 26MB in size.  The Compusult elevation extension GPKG that 
uses TIFF encoding (CSLT_n47_w123_1arc_v2_dt2_float32.gpkg) is 74.2MB in size, 
while the PNG elevation extension (CSLT_n47_w123_1arc_v2_dt2_uint16.gpkg) is 
6.7MB. 

Table 3: Elevation Extension GeoPackages 

Creator File name Source 
data 

Size 
on 
disk 
(MB) 

Luciad alaska_png_2016_02_04.gpkg USGS 0.6 

Luciad puget_pseudomercator_20150210.gpkg NOAA 10.8 

Luciad UK_elevation_20160228.gpkg UK 125.1 

Compusult CSLT_All_Puget_16m_depths_float32.gpkg NOAA 820.6 

Compusult CSLT_All_Puget_16m_depths_uint16.gpkg NOAA 10.1 

Compusult CSLT_DSM_N6130W14900_3857_clip_float32.gpkg USGS 6.2 

Compusult CSLT_DSM_N6130W14900_3857_clip_uint16.gpkg USGS 0.5 

Compusult CSLT_n47_w123_1arc_v2_dt2_float32.gpkg DTED 74.2 

Compusult CSLT_n47_w123_1arc_v2_dt2_uint16.gpkg DTED 6.7 



Compusult CSLT_ukoselev_float32.gpkg UK 2080 

Compusult CSLT_ukoselev_uint16.gpkg UK 77.5 

Brad Hards alaska_bradh_2016-01-07_tiff.gpkg USGS 6.4 

Brad Hards alaska_bradh_2016-01-07.gpkg USGS 0.46 

Brad Hards osterrain50_2016-01-22.gpkg UK 1790 

 

9.2 OGC GeoPackage Compliance testing 

Each of the elevation extension GeoPackages listed in Table 3 above was tested for 
compliance with the OGC GeoPackage 1.0 Specification using a Java-based GeoPackage 
verifier tool developed by Reinventing Geospatial, Inc.  The Java code used to create this 
tool was recently integrated with OGC Team Engine, thus will form the basis of the 
OGC-approved method for verifying GeoPackage compliance.  

The verify tool tests against the requirements in the Core, Tiles, and Schema sections of 
the OGC GeoPackage Encoding Standard (12-128r1). Most of the elevation extension 
GeoPackages passed the compliance tests with minor warnings.  These warnings were a 
direct result of how the proposed elevation data extension was implemented, and 
indicated that more work is needed in specifying a) how the elevation data tiles table 
should be cross-referenced in other GeoPackage tables and b) how the CRS of the 
elevation data should be specified. Other minor issues uncovered by the testing tool 
included missing columns and values. The complete results of this testing can be found in 
Annex D. 

9.3 Elevation Extension Compliance testing 

For the final phase of Experiment 1 these GeoPackages were checked for compliance 
with the proposed GeoPackage elevation extension (Annex A).  All GeoPackages 
complied with the requirements of the elevation extension as specified in Annex A, and 
no substantive irregularities were found in how the extension was implemented. There is 
some inconsistency in how the gpkg_contents identifier and description columns are 
being used, thus better guidance on appropriate usage should be developed for the next 
version(s) of the GeoPackage elevation extension. 

9.4 Visualization and Analytics 

In the second experiment, Compusult and Luciad successfully demonstrated the use of 
the prototype GeoPackages elevation extension for visualization and analytics.  This 
demonstration was given at the OGC Technical Committee (TC) meeting in Washington, 
DC on March 9, 2016.  Luciad used a desktop client to visualize the UK and Puget Sound 
Elevation Extension GeoPackages in both 2D and 2.5D, and also calculated a line of sight 
on each GPKG (Figure 2 and Figure 3).  Compusult used a desktop client and a mobile 
Android client to produce a 2D shaded relief visualization using the Elevation Extension 
GPKGs (Figure 4), and also calculated LOS and produced an elevation profile (Figure 5).  
The Web Mercator Coordinate Reference System (CRS) was used for this demonstration 
since as this was the native CRS for the mobile clients used in the demonstration. The 
Luciad desktop software can re-project on the fly to support other CRSs. 



Figure 2: Viewshed using the UK Ordnance Survey Elevation GeoPackage 

 

Figure 3: LOS using the NOAA Puget Sound Bathymetry GeoPackage 

 



Figure 4: Shaded relief using a GeoPackage with NOAA and USGS data 

 

 

Figure 5: Elevation profile using a GeoPackage with NOAA and USGS data 

 

10 Technical Issues 

There are three significant technical issues that need to be resolved in order to maximize 
interoperability and simplify the implementation of the GeoPackage Elevation Extension.  
These technical issues were discussed in several forums:  

• During the bi-weekly Interoperability Experiment teleconference meeting;  
• On GitHub (https://github.com/opengeospatial/geopackage-elevation); and  
• During the GeoPackage SWG session at the March 9, 2016 OGC TC meeting.   

These technical issues are described below. 



10.1 Data NULL vs. Data Missing 

In the proposed GeoPackage elevation extension, the gpkg_2D_gridded_ancillary table 
contains a column named data_null and a column named data_missing.  The intent of 
data_missing is to indicate the numeric value used for tiles where source data is missing. 
data_null is to be used where source data is available but does not have a height value for 
a tile.  Some participants proposed that one of these columns be eliminated in favor of a 
single “no data” option. This would simplify the extension by eliminating the need for 
software clients to interpret two different values, and also allow data produces to use a 
single “no data” value when creating tiles from source data.  However, having both of 
these columns does make data interpolation more clear. This could useful when working 
with sparse datasets.  

The Data NULL vs. Data Missing issue raises the larger question of how the height 
values in source data should be sampled and encoded into tiles.  The encoding issue is 
addressed in the following two sections of this report. However, the sampling issue 
remains an open question. One of the central questions is if the height values should be 
considered as area samples that can be applied to an entire pixel or as discrete point 
samples that fall within the center of each pixel.  This question will impact the 
resampling methods that can be used to generate different zoom levels.  More 
information on the resampling issue can be found in Annex B of this report. 

10.2 Scale and Offset  

The proposed GeoPackage elevation extension contains a scale column and an offset 
column in the gpkg_2D_gridded_ancillary table.  These parameters are applied globally 
to each table containing elevation data tiles listed in the gpkg_tile_matrix_set table. The 
intent is allowing highly precise height measurements to be preserved within the 16-bit 
(~65000) value-range of a PNG color channel.  One IE participant expressed two 
concerns about using the scale and offset parameters:  

1) Even with the use of these values, the 16-bit precision of PNG is not enough to 
represent centimeter precision heights and; 

2) Elevation extension implementers would need to know the minimum and maximum 
values of an elevation datasets before creating the GeoPackage elevation instance, which 
could be difficult in situations where metadata is lacking. 

Therefore, there was a proposal that scale and offset columns be added to the 
gpkg_2D_tile_ancillary table, which would allow these values to be specified on a per 
tile basis.  This would allow scale and offset values to be assigned to individual tiles 
based on their horizontal spatial resolution. Thus, high spatial resolution tiles could 
contain highly precise height values while low spatial resolution tiles would have less 
precise heights.  This approach would also eliminate the need to calculate the minimum 
and maximum vales of an elevation dataset before creating tiles.  Participants suggested 
that adding scale and offset columns to the gpkg_2D_tile_ancillary table makes the PNG 
format a more viable option for elevation data tiles by simplifying the tile production 
process and allowing for highly precise height values without adding significant client 
side overhead when reading in tiles. 

A counter argument was made against adding a scale column and an offset column to the 
gpkg_2D_gridded_ancillary table. The central concern was that applying a linear 
transformation of height values on a per-tile basis would add significant complexity on 



the client side. Second order concerns focused on having to first decode all of the height 
values in order to determine the correct scaling for visualizations and the additional 
complexity of performing cross-tile analyses. 

10.3 Coordinate Reference Systems 

One of the early drafts of the GeoPackage Elevation Extension required that a 3-
dimensional Coordinate Reference System (CRS) be used in the gpkg_spatial_ref_sys 
and gpkg_tile_matrix_set tables.  The intent of the 3D CRS requirement was to explicitly 
specify the horizontal datum, projection, and coordinate system as well as the vertical 
datum and height type within a single EPSG code.  Several participants expressed 
concern with this approach. The main concern is the lack of 3D CRS implementations in 
the software used to both create and read OGC GeoPackages and the limited variety of 
3D CRSs currently specified in the EPSG CRS registry.  Several alternatives to using a 
3D CRS were proposed, including providing separate columns to specify a 2D CRS and a 
vertical CRS, or creating a custom Well Known Text (WKT) string to describe both the 
horizontal and vertical CRS components within a single field. 

While creating a custom WKT to describe a 3D SRS offers a great amount of flexibility 
to GeoPackage elevation extension producers, this approach may ultimately hinder 
interoperability.  Software clients that currently read WKT strings will need to be 
expanded to interpret a wide variety of non-standard, custom WKT strings, and software 
clients that do not currently read the WKT will need to add support.  There was a general 
consensus among IE participants that specifying a 2D CRS plus a vertical CRS for each 
elevation data tile table is the preferred approach.  The latter approach provides a flexible 
yet standardized way for GeoPackage elevation extension producers to georeference 
elevation data This approach also allows both simple, lightweight software clients and 
more complex GIS software read, display, and analyze elevation data GeoPackages.   

11 Recommendations 

11.1 Encode a single NO DATA value rather than Data NULL and Data Missing 

The data_null and data_missing columns in the gpkg_2D_gridded_ancillary table should 
be eliminated and replaced with a single no_data column.  This will simplify the 
extension by eliminating the need for software clients to interpret two different values, 
and also allow data produces to use a single “no data” value when creating tiles from 
source data.  If data interpolation is needed, it should be performed during the tile 
creations process.  Data interpolation is highly dependent on the underlying resampling 
process used to create tiles. This remains an open question that should be addressed but is 
outside the scope if this ER. 

11.2 Use scale and offset values for each PNG tile  

Scale and offset columns should be added to the gpkg_2D_tile_ancillary table allowing 
these values to be specified on a per tile basis.  High spatial resolution tiles could contain 
highly precise height values while low spatial resolution tiles would have less precise 
heights, and the need to calculate the minimum and maximum vales of an elevation 
dataset before creating tiles would be eliminated.  Scale and offset values are only needed 
for PNG tiles since the 32-bit float values encoded in the TIFF format tiles are already 
sufficient to support highly precise heights.  The final recommendation below addresses 
this important different between the PNG and TIFF formats.  



11.3 Specify a 2D CRS plus a vertical CRS reference for each tile table 

This method of georeferencing elevation data will provide flexibility on both data 
production and client side data ingest, while ensuring that the height values being 
encoded into OGC GeoPackages are consistent with EPSG standards.  One method of 
specifying the 2D CRS and vertical CRS of a tile set would be to add a column called 
vert_srs_id to the gpkg_tile_matrix_set table.  The vertical CRS would be added as an 
mandatory additional row in the gpkg_spatial_ref_sys table.  

11.4 Develop two separate elevation extensions for OGC GeoPackage 

The GeoPackage elevation extension as currently written allows tiles to be generated in 
either the TIFF or the PNG format.  The 16-bit integer storage constraints of the PNG 
format necessitate adding additional per-tile scale and offset values to support high 
precision height values, while the 32-bit float values encoded in the TIFF format are 
already sufficient to support highly precise heights.  However, there are significant 
advantages in file size and built-in client support for the PNG format.  Given the 
fundamental differences and trade-offs associated with the PNG and TIFF tile encodings, 
the IE participants recommend that each approach be developed into separate OGC 
GeoPackage elevation extension candidate standards. 

The first extension should be designed for simple, lightweight clients that are used 
primarily for visualization and have limited data storage space and processing power.   
This extension should specify that PNG be used for tile encoding, and have the option for 
scale and offset columns in the gpkg_2d_gridded_tile_ancillary table.  Different best 
practice documents should be developed that define the 2D and vertical CRS and tile 
indexing schemes to be used, and in general these best practices should match well-
known industry standard tile sets such as Tile Map Service (TMS).  This extension 
should maximize elevation data interoperability between existing commercial 
GeoPackage implementations, and will be suitable for the terrain visualizations specified 
in Table 1. These elevation data tiles should also be compatible with Web Map Tile 
Service (WMTS) [OGC 07-057r7] 

The second extension should be designed for full-featured clients that require a high level 
of precision and accuracy and implement a diverse set of terrain-based analytics.  This 
extension should specify that TIFF with LZW compression be used for tile encoding, thus 
eliminating the need for scale and offset columns. The rules for TIFF encoding and 
spatial referencing used in Common Data Base (CDB) Guidance [OGC 16-011] [OGC 
16-006] should be considered. Finally, requirements to ensure that the elevation data tiles 
are also compatible with Web Coverage Service (WCS) [OGC 12-101] should be 
considered.  Special consideration should also be given to CRS encodings to ensure the 
application-specific requirements for precision and accuracy of the height values are met. 
(See Annex C for further discussion). The elevation data in this second extension will be 
suitable for the 3D Terrain Visualizations, Analyses, Terrain Association, and Modeling 
and Simulation specified in Table 1. 

  



Annex A: Tiled Gridded Elevation Data Extension  

 

Extension Title 

Tiled Gridded Elevation Data 

Introduction 

The GeoPackage Standards Working Group (SWG) has identified a need for the ability to 
store tiled gridded elevation data in a GeoPackage. This capability will be used to support 
use cases such as the following: 

Visualization 

2D (hillshade, color relief, slope) 

3D (supporting changing view angles and level of detail) 

Analysis 

Viewshed and line-of-sight 

Cross-country mobility (off-road routing) 

Site suitability and planning (slope analysis such as helicopter landing zones) 

3D geometry representations of features (ground-based, airspace) 

Terrain association (associating images to mapped locations) 

Augmented reality training 

This extension to the OGC GeoPackage Encoding Standard leverages the existing 
structure for raster tiles using PNG files as the container for the elevation values 
themselves. This capability was designed to be relatively easy to implement and to be 
suitable for a wide variety of computing environments including the mobile/handheld 
computing environment[1]. 

Extension Author 

GeoPackage SWG, author_name gpkg. 

Extension Name or Template 

gpkg_elevation_tiles 

Extension Type 

New requirement dependent on Clause 2.2. 



Applicability 

This extension applies to tile pyramid user data tables that are used to hold tiled, gridded 
elevation data. 

Scope 

read-write 

Requirements 
Table Definitions 
Coverage Ancillary 

[requirement] A GeoPackage that contains tiled gridded elevation data SHALL contain a 
gpkg_2d_gridded_coverage_ancillary table or view as per Coverage Ancillary Table 
Definition. Subsequent extensions or custom implementations MAY add additional 
columns to this table. Clients SHALL ignore additional columns that are unrecognized. 

Table 1. Coverage Ancillary Table Definition  

Column Name Column Type Column Description Null Default Key 

id INTEGER Autoincrement primary key no  PK 

tile_matrix_set_name TEXT Foreign key to table_name in gpkg_tile_matrix_set no  FK 

datatype TEXT 'integer' no   
scale REAL Scale as a multiple relative to the unit of measure yes 1  
offset REAL The offset to the 0 value yes 0  
precision REAL[2] The smallest value that has meaning for this dataset yes 1  
data_null REAL[3] The value that indicates NULL yes   
data_missing REAL[4] The value that indicates data is missing yes   
Tile Ancillary 

[requirement] A GeoPackage that contains tiled gridded elevation data SHALL contain a 
gpkg_2d_gridded_tile_ancillary table or view as per Tile Ancillary Table 
Definition. Subsequent extensions or custom implementations MAY add additional 
columns to this table. Clients SHALL ignore additional columns that are unrecognized. 

Table 2. Tile Ancillary Table Definition  

Column 
Name 

Column 
Type Column Description Null Default Key 

id INTEGER Autoincrement primary key no  PK 
tpudt_name TEXT Name of tile pyramid user data no  unique[5] 



Column 
Name 

Column 
Type Column Description Null Default Key 

table 

tpudt_id INTEGER Foreign key to id in tile pyramid user data table no  unique[6] 

scale REAL Scale as a multiple relative to the unit of measure yes 1  
offset REAL The offset to the 0 value yes 0  
min REAL[7] Minimum value of this tile yes   
max REAL[8] Maximum value of this tile yes   
mean REAL The arithmetic mean of values in this tile yes   

std_dev REAL The standard deviation of values in this tile yes   

[requirement] The min, max, and mean values SHALL be natural, i.e., not scaled or offset. 
Similarly, the std_dev SHALL be calculated based on the natural values. 

Using the scale and offset values 

[requirement] Integer elevation values MAY be scaled and offset in order to make more 
efficient use of 16-bit integer space available in PNG files. The scope the scale and offset 
apply to can be both the entire coverage and the individual tile. 

Actual elevation values SHALL be calculated by 

first multiplying the stored value by the 
gpkg_2d_gridded_tile_ancillary_table.scale value and then adding the 
gpkg_2d_gridded_tile_ancillary_table.offset, 

followed by multiplying that value by the 
gpkg_2d_gridded_coverage_ancillary.scale value and then adding the 
gpkg_2d_gridded_coverage_ancillary.offset. 

In pseudo-code, this conversion would look like: 

elevationInUnitOfMeasure = (SomeElevationCoverage.tile_data-
>pngpixels[i] * gpkg_2d_gridded_tile_ancillary.scale + 
gpkg_2d_gridded_tile_ancillary.offset) * 
gpkg_2d_gridded_coverage_ancillary.scale + 
gpkg_2d_gridded_coverage_ancillary.offset; 
 

Table Values 
gpkg_spatial_ref_sys 

[requirement] GeoPackages complying with this extension SHALL have a row in the 
gpkg_spatial_ref_sys table as described in Spatial Ref Sys Table Record: 

 



Table 3. Spatial Ref Sys Table Record  

srs_name srs_id organization organization_coordsys_id definition description 

any 4979 EPSG or epsg 4979 any any 

[requirement] The geopackage_spatial_ref_sys table in a GeoPackage SHALL 
contain records to define all spatial reference systems used by tiled gridded elevation data 
in a GeoPackage. The spatial reference system SHALL be used to define the vertical 
datum, reference geoid, and units of measure for the tiled gridded elevation data. 

gpkg_contents 

[requirement] (extends GPKG-34) The gpkg_contents table SHALL contain a row with 
a data_type column value of 2d-gridded-coverage for each tile pyramid containing 
tiled gridded elevation data. The srs_id column value for that row SHOULD reference 
an SRS that has a vertical datum[9]. 

gpkg_extensions 

[requirement] GeoPackages complying with this extension SHALL have rows in the 
gpkg_extensions table as described in Extensions Table Record: 

Table 4. Extensions Table Record  

table_name column_name extension_name definition scope 

gpkg_2d_gridded_coverage_anci
llary null 

gpkg_elevation_
tiles TBD [10] 

read-
write 

gpkg_2d_gridded_tile_ancillar
y null 

gpkg_elevation_
tiles TBD [11] 

read-
write 

name of actual tile pyramid user data 
table containing unsigned integer 
data 

tile_data gpkg_elevation_
tiles TBD [12] 

read-
write 

gpkg_2d_gridded_coverage_ancillary 

The following requirements refer to the gpkg_2d_gridded_coverage_ancillary table 
as per Coverage Ancillary Table Definition. 

[requirement] Values of the tile_matrix_set_id column SHALL reference values in 
the gpkg_tile_matrix_set id column. 

[requirement] Values of the datatype column SHALL be 'integer'. 

gpkg_2d_gridded_tile_ancillary 

The following requirements refer to the gpkg_2d_gridded_tile_ancillary table as per 
Tile Ancillary Table Definition. 



[requirement] Values of the tpudt_name column SHALL reference existing tile pyramid 
user data tables. 

[requirement] Values of the tpudt_id column SHALL reference values in id column of 
the table referenced in tpudt_name. 

Tile Pyramid User Data Tables 

[requirement] The tile_data BLOB in the tile pyramid user data table containing tiled, 
gridded elevation data SHALL be of MIME type image/png and the data SHALL be 16-
bit unsigned integer (single channel - "greyscale"). 

Table Definition SQL 
Table 5. Coverage Ancillary Table Definition SQL  

 CREATE TABLE 'gpkg_2d_gridded_coverage_ancillary' ( 
  id INTEGER PRIMARY KEY AUTOINCREMENT, 
  tile_matrix_set_name TEXT NOT NULL, 
  datatype TEXT NOT NULL DEFAULT 'integer', 
  scale REAL DEFAULT 1.0, 
  offset REAL DEFAULT 0.0, 
  precision REAL DEFAULT 1.0, 
  data_null REAL, 
  data_missing REAL, 
  CONSTRAINT fk_g2dgtct_name FOREIGN KEY('tile_matrix_set_name') 
REFERENCES gpkg_tile_matrix_set ( table_name ) 
  CHECK (datatype in ('integer','float'))); 

Table 6. Tile Ancillary Table Definition SQL  

 CREATE TABLE gpkg_2d_gridded_tile_ancillary ( 
  id INTEGER PRIMARY KEY AUTOINCREMENT, 
  tpudt_name TEXT NOT NULL, 
  tpudt_id INTEGER NOT NULL, 
  scale REAL DEFAULT 1.0, 
  offset REAL DEFAULT 0.0, 
  min REAL DEFAULT NULL, 
  max REAL DEFAULT NULL, 
  mean REAL DEFAULT NULL, 
  std_dev REAL DEFAULT NULL, 
  CONSTRAINT fk_g2dgtat_name FOREIGN KEY (tpudt_name) REFERENCES 
gpkg_contents(table_name), 
  UNIQUE (tpudt_name, tpudt_id)); 

References 
Normative References  

The following normative documents contain provisions which, through reference in this 
text, constitute provisions of this document. For dated references, subsequent 
amendments to, or revisions of, any of these publications do not apply. However, parties 
to agreements based on this part of this document are encouraged to investigate the 
possibility of applying the most recent editions of the normative documents indicated 
below. For undated references, the latest edition of the normative document referred to 
applies. 

[1] OGC 12-128r10 OGC® GeoPackage Encoding Standard (On-line) 

[1a] OGC 12-128r10 OGC® GeoPackage Encoding Standard (PDF) 



 

1 We acknowledge that this approach will not support certain applications that require a 
high degree of precision and/or accuracy (e.g., targeting).  

2 This is a REAL to support extensions that use non-integer data.  

3 This is a REAL to support extensions that use non-integer data.  

4 This is a REAL to support extensions that use non-integer data.  

5 These two values are designed to be jointly unique so that they refer to a single row in a 
single table.  

6 These two values are designed to be jointly unique so that they refer to a single row in a 
single table.  

7 This is a REAL to support extensions that use non-integer data.  

8 This is a REAL to support extensions that use non-integer data.  

9 Ideally the vertical datum for each pyramid of elevation will be specified. However, it 
is impractical to mandate this for a number of reasons, including the difficulty in testing 
whether a specific SRS has a valid vertical datum.  

10 Pending OGC naming authority decision.  

11 Pending OGC naming authority decision.  

12 Pending OGC naming authority decision.  

  



Annex B: Height Value Encoding and Sampling  

The following content is from an issue raised by tseval on the GitHub GeoPackage 
Elevation extension website (https://github.com/opengeospatial/geopackage-elevation) 

I cannot find anything in the specification on how the elevation samples should be 
georeferenced, if they should be considered as areas or grid points. I think the most 
common philosophy here is to consider everything as area pixels, and offset the 2D 
position by a half pixel to find the actual position of each sample. More background in 
these two links: 

http://trac.osgeo.org/gdal/wiki/rfc33_gtiff_pixelispoint 

http://www.remotesensing.org/geotiff/spec/geotiff2.5.html#2.5.2.2 

If we only support area pixels this will have impact on the resampling methods we can 
use to generate the LOD (zoom) levels for each tile. This will also introduce a 2D offset 
that will vary by detail level, since the half pixel offset will vary in size from level to level. 

In this case it would also be useful to include information on how the resampling is done. 
For elevation data it is significant if the zoom levels are made by averaging pixels or by 
selecting min/max values for example. 

If we could support a point pixel grid with 2^n + 1 size, we could resample it by simply 
picking every second sample, and all the samples will be in their original positions. This 
is a commonly used resampling method for hierarchical 3D surface models, where you 
want the samples to move as little as possible from one detail level to the next. 

I think the standard should include information on how to interpret the georeferencing of 
the samples, and what type of resampling has been used in the zoom levels. 

 

 

  



Annex C: WGS 84 accuracy 

The following content is from an issue raised by Dean Hintz on the GitHub GeoPackage 
Elevation extension website: 

At the last EE.IE meeting there was broad agreement that 3D spatial reference should in 
general be expressed as a 2D spatial reference standard such as epsg, plus a separate 
vertical spatial reference (such as a separate vertical epsg). This agrees with the general 
consensus as discussed here under the #19 3D CRS github topic. 

This led to some discussion about what it takes to be certain about a given location 2D 
using LL-WGS84. I expressed some concern that LL-WGS84 can vary significantly based 
on the time of the observation. WGS84 observations are dependent on the epoch or 
WGS84 realization that they are based on. Every GPS or survey instrument is tuned to a 
certain WGS84 epoch. This can result in variances of more than 0.7 metres, such as in 
the case of WGS84 (G730) epoch 1994 vs WGS84 (G1674) epoch 2005. This is due to 
both differences in the survey station network coordinates used and to tectonic plate 
movements over time. Transformations between epochs require a position-dependent 
velocity model, at least if accuracies of less than 1 meter are required. 

On the other hand, I would agree that not all applications require this level of accuracy, 
so it may not be warranted to enforce the need to track epoch for all data. I believe it 
would suffice if we recommended the collection of survey date or epoch as an optional 
parameter or as a metadata entry. At the end of the day it does come down to the data 
custodian to maintain good metadata on any datasets they are responsible for, and the 
accuracy of any given dataset is hard for any standards group to ensure. 

Still, I thought it important to raise this issue that a 2D CRS reference such as LL-
WGS84 or epsg:4326 is not enough in and of itself to get sub metre accuracy, and that 
epoch or survey date would go a long way to raising the usefulness of any given dataset 
as it would allow for future corrections if and when higher accuracy is needed. 

I don't disagree with the issue, and that for many purposes it would be better to use 
something other than WGS-84. I don't think we should embed epoch into the CRS, since 
most users are lucky to understand spatial reference on their GPS, let alone guess with 
epoch. 

I do not think that this is specific to elevation extension, and probably should be raised as 
a geopackage spec issue, rather than an elevation-extension specific recommendation. 

  



Annex D: GeoPackage Compliance Test Results 

Participant A (Luciad) 

Tiles Issues: 

(Warning) Requirement 33: "The gpkg_contents table SHALL contain a row with a 
data_type column value of "tiles" for each tile pyramid user data table or view." 

  
The Tile Pyramid User Data table that is not refrenced in gpkg_contents table is: 
uk_elevation_tiles.  This table needs to be referenced in the gpkg_contents table. 

  
(Warning) Requirement 42: "Values of the gpkg_tile_matrix table_name column SHALL 
reference values in the gpkg_contents table_name column for rows with a data_type of 
'tiles'. " 

  
 There are Pyramid user data tables in gpkg_tile_matrix table_name field such that the 
table_name does not reference values in the gpkg_contents table_name column for rows 
with a data type of 'tiles'. Unreferenced table: uk_elevation_tiles 

 

Participant B (Compusult) 

Core Issues: 

(Warning) Requirement 11: "The gpkg_spatial_ref_sys table in a GeoPackage SHALL 
contain a record for organization EPSG or epsg and organization_coordsys_id 4326 for 
WGS-84, a record with an srs_id of -1, an organization of "NONE", an 
organization_coordsys_id of -1, and definition "undefined" for undefined Cartesian 
coordinate reference systems, and a record with an srs_id of 0, an organization of 
"NONE", an organization_coordsys_id of 0, and definition "undefined" for undefined 
geographic coordinate reference systems. " 

  
The gpkg_spatial_ref_sys table shall contain a record with an srs_id of -1, an 
organization of "NONE", an organization_coordsys_id of -1, and definition "undefined" 
for undefined Cartesian coordinate reference systems 

 

Tiles Issues: 

(Warning) Requirement 42: "Values of the gpkg_tile_matrix table_name column SHALL 
reference values in the gpkg_contents table_name column for rows with a data_type of 
'tiles'. " 

  
There are Pyramid user data tables in gpkg_tile_matrix table_name field such that the 
table_name does not reference values in the gpkg_contents table_name column for rows 
with a data type of 'tiles'. Unreferenced table: All_Puget_16m_depths 



 

Participant C (Brad Hards) 

Core Issues: 

(Warning) Requirement 11: "The gpkg_spatial_ref_sys table in a GeoPackage SHALL 
contain a record for organization EPSG or epsg and organization_coordsys_id 4326 for 
WGS-84, a record with an srs_id of -1, an organization of "NONE", an 
organization_coordsys_id of -1, and definition "undefined" for undefined Cartesian 
coordinate reference systems, and a record with an srs_id of 0, an organization of 
"NONE", an organization_coordsys_id of 0, and definition "undefined" for undefined 
geographic coordinate reference systems. " 

  
The gpkg_spatial_ref_sys table shall contain a record with an srs_id of -1, an 
organization of "NONE", an organization_coordsys_id of -1, and definition "undefined" 
for undefined Cartesian coordinate reference systems 

Tiles Issues: 

(Warning) Requirement 33: "The gpkg_contents table SHALL contain a row with a 
data_type column value of "tiles" for each tile pyramid user data table or view." 

  
The Tile Pyramid User Data table that is not refrenced in gpkg_contents table is: 
DSM_N6130W14900.  This table needs to be referenced in the gpkg_contents table. 

(Warning) Requirement 34: "In a GeoPackage that contains a tile pyramid user data table 
that contains tile data, by default, zoom level pixel sizes for that table SHALL vary by a 
factor of 2 between zoom levels in tile matrix metadata table." 

  
Note: This next message is an additional concern that is related to this requirement but 
not the requirement itself. 

The pixel_x_size and pixel_y_size should satisfy these two equations: 

 pixel_x_size = (bounding box width  / matrix_width)  / tile_width AND  

 pixel_y_size = (bounding box height / matrix_height)/ tile_height.   

Based on these two equations, the following pixel values are invalid for the table 
'DSM_N6130W14900'.: 

 Invalid pixel_x_size: 41.934373, Invalid pixel_y_size: 41.949579 at zoom_level 1 

 Invalid pixel_x_size: 20.967187, Invalid pixel_y_size: 20.974790 at zoom_level 2 

 Invalid pixel_x_size: 10.483593, Invalid pixel_y_size: 10.487395 at zoom_level 3  

 



  
(Warning) Requirement 42: "Values of the gpkg_tile_matrix table_name column SHALL 
reference values in the gpkg_contents table_name column for rows with a data_type of 
'tiles'. " 

 

  
There are Pyramid user data tables in gpkg_tile_matrix table_name field such that the 
table_name does not reference values in the gpkg_contents table_name column for rows 
with a data type of 'tiles'. Unreferenced table: DSM_N6130W14900 

Schema Issues: 

(Error) Requirement 60: "A GeoPackage MAY contain a table or updateable view named 
gpkg_data_column_constraints. If present it SHALL be defined per clause 2.3.3.1.1 
Table Definition, Data Column Constraints Table or View Definition and 
gpkg_data_columns Table Definition SQL. " 

  
Required column: gpkg_data_column_constraints.maxIsInclusive is missing 

  



Annex E: Revision History 

Date Release Editor Primary clauses 
modified 

Description 

     
     
     

 


