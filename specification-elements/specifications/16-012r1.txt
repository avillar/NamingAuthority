
  
 

Open Geospatial Consortium 
Publication Date: 2016-12-22 

Approval Date: 2016-06-23 

Posted Date: 2016-05-30 

Reference number of this document: OGC 16-012r1 

External identifier for this document: http://www.opengis.net/doc/dp/citygml-indoorgml 

Category: Discussion Paper 

Editors: Ki-Joune Li, Hyung-Gyu Ryu, Hak-Cheol Kim, Jun Hee Lee, Joo-Ho Lee 

Comparing CityGML and IndoorGML  
based on a use case at Lotte World Mall  

  

Copyright © 2016 Open Geospatial Consortium. 
To obtain additional rights of use, visit http://www.opengeospatial.org/legal/. 

 

Warning 

This document is not an OGC Standard. This document is an OGC Discussion Paper and is therefore 
not an official position of the OGC membership. It is distributed for review and comment. It is 
subject to change without notice and may not be referred to as an OGC Standard. Further, an OGC 
Discussion Paper should not be referenced as required or mandatory technology in procurements.  

 

 

 

Document type:  OGC® Discussion Paper 
Document subtype: NA 
Document stage:  Approved for public release 
Document language:  English 



OGC 16-012r1 

ii Copyright © 2012 Open Geospatial Consortium. 
 

 

License Agreement 

Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth 
below, to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual 
Property without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, 
merge, publish, distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual 
Property is furnished to do so, provided that all copyright notices on the intellectual property are retained intact and that each person to 
whom the Intellectual Property is furnished agrees to the terms of this Agreement. 

If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above 
copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR. 

THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS 
THAT MAY BE IN FORCE ANYWHERE IN THE WORLD. 

THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, 
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR 
PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED 
IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL 
MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE 
UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT 
THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF 
INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY 
DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING 
FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF 
CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH 
THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY. 

This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all 
copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as 
provided in the following sentence, no such termination of this license shall require the termination of any third party end-user 
sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual 
Property, or the operation of the Intellectual Property, infringe, or in LICENSOR’s sole opinion be likely to infringe, any patent, 
copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license 
without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or 
cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party. 

Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual 
Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without 
prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may 
authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any 
LICENSOR standards or specifications. 

This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United 
Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this 
Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, 
and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be 
construed to be a waiver of any rights or remedies available to it. 

None of the Intellectual Property or underlying information or technology may be downloaded or otherwise exported or reexported in 
violation of U.S. export laws and regulations. In addition, you are responsible for complying with any local laws in your jurisdiction 
which may impact your right to import, export or use the Intellectual Property, and you represent that you have complied with any 
regulations or registration procedures required by applicable law to make this license enforceable. 



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. iii 
 

Contents                 Page 

1 Introduction ............................................................................................................. 2 
1.1 Scope .................................................................................................................. 2 
1.2 Document contributor contact points ................................................................. 2 
1.3 Forward .............................................................................................................. 2 

2 References ............................................................................................................... 2 

3 Conventions ............................................................................................................ 3 
3.1 Abbreviated terms .............................................................................................. 3 
3.2 Notations ............................................................................................................ 3 
3.3 Used parts of other documents ........................................................................... 3 

4 Use case Site – Lotte World Mall ........................................................................... 3 

5 Comparison from expressive power viewpoint ...................................................... 7 
5.1 Feature Model versus Cellular Space Model ..................................................... 7 
5.2 Layered Space Model and Hierarchical Representation of Indoor Space .......... 8 
5.3 Topology ............................................................................................................ 9 
5.4 Closure of space ............................................................................................... 10 
5.5 Nested room ..................................................................................................... 11 
5.6 Cell decomposition ........................................................................................... 12 
5.7 Orientation of door surface ............................................................................... 13 
5.8 Representation of texture and material of wall ................................................. 13 

6 Comparison from application viewpoint. ............................................................. 13 
6.1 Visibility analysis from attraction point ........................................................... 14 
6.2 Visibility analysis from attraction path ............................................................ 15 
6.3 Path analysis between two attraction points ..................................................... 15 
6.4 Trajectory analysis ........................................................................................... 16 
6.5 Movement pattern and context analysis ........................................................... 17 

7 Summary ............................................................................................................... 17 
Table 1 — Summary of the comparison between CityGML LoD 4 and IndoorGML ..... 18 

Bibliography ..................................................................................................................... 18 
Revision history ................................................................................................................ 19 
 

 



OGC 16-012r1 

iv Copyright © 2012 Open Geospatial Consortium. 
 

 

Figures Page 
Figure 1 – Lotte World Mall (LWM) ........................................................................................... 4 

Figure 2 – Multi-level hall at Lotte World Mall .......................................................................... 3 

Figure 3 – CityGML data at Lotte World Mall ........................................................................... 4 

Figure 4 – Statistics of CityGML data at Lotte World Mall ...................................................... 5 

Figure 5 – States and Transitions of InfoorGML at Lotte World Mall .................................... 6 

Figure 6 – Cells and Cell Boundaries of IndoorGML at Lotte World Mall ............................. 6 

Figure 7 – Examples in CityGML and IndoorGML ................................................................... 8 

Figure 8 – Hierarchical Representation of Indoor Space ........................................................... 9 

Figure 9 – Non-Shared Surfaces due to Thickness of Wall ...................................................... 10 

Figure 10 – Closed space: Stair case ........................................................................................... 11 

Figure 11 – Wall and door space ................................................................................................. 11 

Figure 12 – Nested room .............................................................................................................. 12 

Figure 13 – A Big Cell in Lotte World Mall ............................................................................... 13 

 

 

 



OGC® Discussion Paper OGC 16-012r1 

 

Copyright © 2012 Open Geospatial Consortium. 1 
 

Abstract 

This OGC Discussion Paper provides a comparison between the OGC CityGML and 
IndoorGML standards. The goals and approaches of these two standards are different and 
they can be used in a complementary way. This discussion paper aims to compare the 
strengths and weakness of the standards, and explain how to integrate the standards to 
make useful applications. These comparative experiments are based on a real site: a 
shopping mall at Lotte World Mall in Seoul, South Korea. 

Keywords 

OGC, Indoor space, CityGML, LoD 4, IndoorGML, Comparison 

  



OGC 16-012r1 

2 

    

Copyright © 2012 Open Geospatial Consortium. 
 

Comparing CityGML and IndoorGML  
based on a use case at Lotte World Mall 

1 Introduction 

1.1 Scope 

This OGC® document is applicable to the understanding of the differences between OGC 
CityGML LoD 4 and OGC IndoorGML, both of which cover indoor space. The scope of 
this discussion paper is therefore to investigate the strengths and weaknesses of each 
standard and how to integrate the standards in a complementary way. This Discussion 
Paper consists of two parts: 

 Expressive power of data models in CityGML LoD 4 and IndoorGML; and 
 Analysis with service use case scenarios. 

1.2 Document contributor contact points 

This discussion paper is written by a collaboration between Pusan National University, 
Lotte Information and Communication, Virtual Builders, and Realtimetech. 

Name Organization 
Ki-Joune Li Pusan National University 

Hyung-Gyu Ryu Pusan National University 
Hack-Cheol Kim Realtime Tech. Company 

Junhee Lee Lotte Information and Communication 
Jooho Lee Virtual Builders Co. 

1.3 Forward 

Attention is drawn to the possibility that some of the elements of this document may be 
the subject of patent rights. The Open Geospatial Consortium shall not be held 
responsible for identifying any or all such patent rights. 

Recipients of this document are requested to submit, with their comments, notification of 
any relevant patent claims or other intellectual property rights of which they may be 
aware that might be infringed by any implementation of the standard set forth in this 
document, and to provide supporting documentation. 

2 References 

The following documents are referenced in this Discussion Paper.  



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. 3 
 

OGC: OGC 12-019, OGC® City Geography Markup Language (CityGML) Encoding 
Standard (2012) 

OGC: OGC 14-005r3, OGC® IndoorGML (2014) 

3 Conventions 

3.1 Abbreviated terms 

The following abbreviated terms are used in this discussion paper; 

CityGML City Geographic Markup Language 

IndoorGML Indoor Geographic Markup Language 

OGC Open Geospatial Consortium 

3.2 Notations 

All terms in Calibri in the text denote class names of CityGML and IndoorGML. 

3.3 Used parts of other documents 

This document uses significant parts of the paper published by H. G. Ryu, T. H. Kim, and 
K.J. Li [1]. To reduce the need to refer to that document, this Discussion Paper copies 
from the referenced paper some text with small modifications.  

4 Use Case Site – Lotte World Mall 

The experiments for the use case study have been conducted at a real site: Lotte World 
Mall in Seoul, composed of four buildings including a shopping mall (Avenue Mall and 
Lotte Causal), concert hall, and cinema, all connected via an underground parking 
structure as shown in Figure 1.  

  

Figure 2 – Multi-level hall at Lotte 



OGC 16-012r1 

4 

    

Copyright © 2012 Open Geospatial Consortium. 
 

Figure 1 – Lotte World Mall (LWM) World Mall 

There is a multi-level hall at the center of the building, where several escalators and lifts 
connect floors as Figure 2. The stores are arranged around the hall of multi-levels in a 
complex manner.  

The indoor data set for the use case consists of GML documents in CityGML and 
IndoorGML encodings. The indoor spatial data in CityGML has been constructed from 
the footprints by use of an indoor spatial data tool called GongBuilder. In order to 
produce clean data set, we defined a data specification of CityGML as follows. 

1. [CityGML Specification 1] The data set contains only the LoD 4 of a building 
model. More precisely, it contains the feature types of Door,	 Room,	
ClosureSurface,	 CielingSurface,	 FloorSurface,	 InteriorWallSurface,	 and 
InteriorBuildingInstallation, and their ancestor or container types.   

2. [CityGML Specification 2] The geometry type of Room is GM_Solid and the 
geometric type of other features is GM_MultiSurface.   

3. [CityGML Specification 3] Stationary installations such as escalators are defined 
as IntBuildingInstallation. 

 

 

Figure 3 – CityGML data at Lotte World Mall 
The specifications above define only the basic aspects of the CityGML data for the use 
case. More detailed issues will be discussed at the next section. Note that the data set 
contains only LoD 4 data without any data of lower LoDs, although the strict definition 



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. 5 
 

of LoD 4 includes not only LoD 4 itself but also its lower LoDs. The data sets do not 
include any terrain data. The brief sketch of the data set and its statistics are shown in 
Figure 3 and Figure 4. 

 
Figure 4 – Statistics of CityGML data at Lotte World Mall 

In addition to CityGML data, we also constructed an IndoorGML data set for the same 
sites. We used an IndoorGML editing tool (JINedit found at http://indoorgml.net) to 
make indoor network, cells, and cell boundaries from the footprint images. The data 
specifications for IndoorGML are summarized as follows. 
 

1. [IndoorGML Specification 1] The geometries of CellSpace and 
CellSpaceBoundary are GM_Solid and GM_Surface respectively. 

2. [IndoorGML Specification 2] Escalators are not contained in IndoorGML data but 
stair cases and elevator shafts are represented as cells.  

The network composed of states and transitions and the cells in IndoorGML are shown in 
Figures 5 and 6, respectively. 
 



OGC 16-012r1 

6 

    

Copyright © 2012 Open Geospatial Consortium. 
 

 

Figure 5 – States and Transitions of InfoorGML at Lotte World Mall 
 

 

Figure 6 – Cells and Cell Boundaries of IndoorGML at Lotte World Mall 



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. 7 
 

5 Comparison from expressive power viewpoint 

While CityGML LoD 4 aims to represent features in indoor space, the basic goal of 
IndoorGML is to provide indoor space model. In this section, we investigate the 
differences of CityGML and IndoorGML from expressive power viewpoint. 

5.1 Feature Model versus Cellular Space Model 

The basic goal of CityGML is to reach a common definition of basic entities with 
attributes and relationship in 3D city model. It provides a common feature model of 3D 
city space from vegetation objects to indoor spatial objects such as building furniture. 
Therefore, the main focus of CityGML is to define individual features and the 
relationships between them in 3D city space, where CityGML LoD 4 covers indoor 
spaces. However, IndoorGML is focused on how to define the indoor space rather than 
the features that define the indoor space. IndoorGML provides a common indoor space 
model. Note that indoor furniture, for example, is not in the scope of IndoorGML since it 
has nothing to do with indoor space model. The indoor space model of IndoorGML is 
called cellular space model, as defined below. 

Definition –  Indoor Cellular Space Model 
A cellular space C of an indoor space U is defined as a set of cells c such that 

- for any pair of cells ci, cj  C,  ci  cj = , 
-  ci  U, and 
- each cell c has a unique identifier c.id 

The basic entity of IndoorGML is a cell and IndoorGML covers not only properties of 
each cell but also the topological relationships between cells to explain the structure of 
indoor space.  

The difference is explained by an example in Figure 7. A given indoor space can be 
represented either in CityGML or in IndoorGML as left and right parts in Figure 7, 
respectively. The data set in CityGML includes a set of features, which are mostly 
surfaces. However, the given indoor space is decomposed into a set of non-overlapping 
small cells, where objects are located or events take place, and doors connecting cells.  

 



OGC 16-012r1 

8 

    

Copyright © 2012 Open Geospatial Consortium. 
 

 
Figure 7 – Examples in CityGML and IndoorGML 

 

5.2 Layered Space Model and Hierarchical Representation of Indoor Space 

An important strength of IndoorGML is that it supports a multi-layered space model. It is 
possible to interpret a given indoor space in different ways depending on the purpose of 
the interpretation, where each layer of a multi-layered space model represents an 
interpretation of the space. An excellent utilization of multi-layered space model is the 
hierarchical representation of an indoor space. An example is given in Figure 8. Node n12 
in level 1 partitioning corresponds with n1, n2, and n3 of level 2 partitioning forming a 
hierarchical structure of indoor space. In [2] and [3], this hierarchical structure is defined 
as a hierarchical graph. This hierarchical structure is useful in modeling indoor spaces, 
which are very often composed of several sections, such as floors or wings, and each 
section has several cells in hierarchical arrangements. The multi-layered space model in 
IndoorGML therefore provides a tool to understand and represent indoor spaces 
reflecting the various characteristics of the spaces. 

The space model of CityGML, however, does not sufficiently reflect the properties of 
indoor space for anything other than a flat interpretation with a single space layer. This 
limitation reflects the basic difference between the aims of two standards; feature 
modeling and space modeling. 



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. 9 
 

 
Figure 8 – Hierarchical Representation of Indoor Space 

5.3 Topology 

The connectivity and adjacency of indoor spaces are fundamental topological properties 
in an indoor spatial data model. Since many applications in indoor spatial information 
demand such topological information, IndoorGML supports the topological 
representation between cells for adjacency in an explicit way. A connectivity network 
through doors is also derived from the duality of original indoor space where nodes and 
edges of the network represent cells and doors connecting cells, respectively.  

In CityGML, the adjacency topology can be implicitly represented via surfaces, which 
can be shared by two rooms. However, the adjacency is lost if there is an empty space 
between two surfaces as shown in Figure 9. In this Figure, interior surfaces A1 and B1 are 
disjointed due to the thickness of wall between them. It means that we cannot directly 
derive adjacency topology from such indoor modeling in CityGML.  

 



OGC 16-012r1 

10 Copyright © 2012 Open Geospatial Consortium. 
 

 
Figure 9 – Non-Shared Surfaces due to Thickness of Wall 

5.4 Closure of space 

In CityGML, a cell can be represented only as an instance of Room. The geometry of 
Room can be either an instance of GM_Solid as a closed space or as one or multiple 
GM_MultiSurface, which are not necessarily closed. For example, stairs are considered as 
IntBuildingInstallation, while the geometry of a staircase can be a GM_MultiSurface as 
shown in Figure 10. If we want to close the space of a staircase, then we need to define 
an additional feature of ClosureSurface or FloorSurface, which is often missing in 
practice.  

In IndoorGML, stairs are considered as an indoor installation, which is not within its 
scope and therefore not included in IndoorGML. However, staircase is represented by a 
cell of closed space either as a GM_Solid in 3-D space or a GM_Surface in 2-D space. 

In CityGML, while the boundary of a wall is represented, the wall itself is not explicitly 
described as a feature. For this reason, some part of the boundary of a wall and door can 
be missing. For example, no CeilingSurface or FloorSurface are defined for walls as 
shown in Figure 11. However, we can explicitly define a wall as an independent cell by 
thick-wall model in IndoorGML. Therefore, the boundary of wall can be also represented 
in IndoorGML.  

 



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. 11 
 

 

Figure 10 – Closed space: Stair case 

 

Figure 11 – Wall and door space 

5.5 Nested room 

There is no explicit topological constraint between rooms in CityGML as long as the 
relationship satisfies the topological model of ISO 19107. A room can be located in a 
room in CityGML, which is strictly forbidden in IndoorGML. In Figure 12, two rooms 
are defined in CityGML in a nested way. In IndoorGML, the nesting room must be 



OGC 16-012r1 

12 Copyright © 2012 Open Geospatial Consortium. 
 

defined as a solid with holes and the nested room must be another solid located at the 
hole of the nesting room.  

 

Figure 12 – Nested room 

5.6 Cell decomposition 

In our use case study, we have a large cell as shown in Figure 13. In IndoorGML, such a 
large cell is often meaningless for practical application and it is strongly recommended to 
decompose such cells as described below. However, the decomposition is not mandatory 
in CityGML except in the case where we need to distinguish the attribute of room such as 
function or usage.  

The decomposition of a large cell is an important requirement in IndoorGML and the rule 
for decomposition depends on type of application. For example, it is appropriate to 
decompose the central large cell in shopping mall (Figure 10) according to the location of 
stores, while it is appropriate to decompose the long corridor space in a subway station 
according to ticket gates, stairs, and intersections. 



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. 13 
 

 

Figure 13 – A Large Cell in Lotte World Mall 

5.7 Orientation of door surface 

In CityGML, a door can be attached to two instances of InteriorWallSurface with reverse 
orientations. We can distinguish each door face, which allows us to specify the side 
where we can attach an object. This is a useful property when we place a painting on a 
side of door face. However, it is not possible to distinguish the face orientation of the 
door by the thin door model in IndoorGML, since a door of the thin door model is 
represented as a single GM_Surface instance of CellSpaceBoundary. It means that a door 
or wall in the thin door model of IndoorGML does not consider wall surface as a type of 
2D space, where objects are located and events take place.   

5.8 Representation of texture and material of wall 

In CityGML, every wall surface is considered to be a feature with attributes and textures, 
while it is optional in IndoorGML to define a wall surface as an independent feature. 
Furthermore, we cannot assign texture to wall surfaces in IndoorGML, since visualization 
is not a purpose of IndoorGML and no orientation is defined for wall surfaces.  

6 Comparison from application viewpoint. 

In this section, we compare CityGML and IndoorGML from an application viewpoint 
with the use case site at Lotte World Mall. For this comparison, we define a set of 
application scenarios at shopping malls. Note that the scenarios are not implemented but 
merely virtual application services. 

[Scenario 1] visibility analysis from attraction point 
In large shopping mall areas, there is a practice to control the flow of visitors so that 
they move slowly or stay at specific locations. For example, performances or parades 
may occur to attract the attention of visitors and to let them stay at the performance 



OGC 16-012r1 

14 Copyright © 2012 Open Geospatial Consortium. 
 

places or move slowly with the parades, which we call attraction points or attraction 
paths. This scenario considers analysis of the coverage area from attraction points or 
attraction paths. For example, an ice cream store near an attraction point can take 
advantage of the performance. In order to find the coverage of attraction point, we 
compute the visibility from the attraction point in 2D and 3D. As we observed in the 
previous section, there are sophisticated structures at Lotte World Mall, such as 
vertical halls with multi-levels, which should be also considered in the visibility 
computation.  

[Scenario 2] visibility analysis from attraction path 
As with scenario 1, we need to compute the coverage area from attraction path along 
parade. 
  

[Scenario 3] path analysis between two attraction points 
There are many attraction points in Lotte World Mall such as meeting plazas and 
places of performance. This scenario considers computation of the path between two 
attraction points along which visitors move. It means that stores located along a path 
between two attraction points are in advantageous positions. For example, the 
locations along the path between the main entrance and meeting plaza on the ground 
floor are the best location in the shopping mall. 
 

[Scenario 4] visitor trajectory and moving pattern analysis 
Trajectory analysis of visitors is an essential function in marketing planning for a 
large shopping mall. In particular, it is very important to analyze the relationship 
between trajectories and sales at each store. The discovery of movement patterns is 
also helpful to understand the intention of visitors, such as speed and staying time at 
each store.  

 
These four scenarios were used to compare CityGML and IndoorGML, as described 
below. 
 
6.1 Visibility analysis from attraction point 

In order to analyze visibility from an attraction point at shopping mall, we need to 
implement a set of visibility functions. These functions can be implemented with 
CityGML and IndoorGML.  

Step 1 – Viewshed computation: Viewshed is the area visible from a point. In our use 
case, we assume a 3D shopping mall space where several structures are installed 
such as a central multi-level hall and escalators across floors. In order to compute 
visibility, we need 3D geometric data of indoor features. While IndoorGML does not 
include detailed representation of indoor features, CityGML does include such 
geometries. It is therefore possible to compute a viewshed only with CityGML. 



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. 15 
 

Step 2 – Searching stores within viewshed: After computing the viewshed from an 
attraction point, we need to find all stores overlapping with the viewshed area. Stores 
are defined as Room instances of CityGML or CellSpace instances of IndoorGML. 
CellSpace	 of IndoorGML has a closed geometry (either GM_Surface in 2D or 
GM_Solid in 3D) and we can find the instances of CellSpace in IndoorGML which 
overlap with the viewshed. However, if the geometry of Room is defined as 
GM_MultiSurface,	 then it is not always possible to find the Room instances of 
CityGML overlapping with the viewshed. 

In conclusion, both standards are required to perform the visibility analysis: CityGML for 
the first step and IndoorGML for the second step. 

6.2 Visibility analysis from attraction path 

Visibility analysis from attraction path is very similar with visibility analysis for an 
attraction point except that the viewshed is computed from a path (line or curve). This 
means that once we compute a viewshed, the remainder of the process is identical to the 
visibility analysis from point. Only CityGML supports the computation of viewshed from 
line or curve since IndoorGML does not include the detailed 3D geometry of features. 
However, it is not always possible to find the stores overlapping with the viewshed with 
CityGML if the geometry of Room is not closed solid. It is therefore recommended to 
integrate CityGML and IndoorGML in a way that we analyze the visibility by CityGML 
and the search the overlapping stores with IndoorGML. 

6.3 Path analysis between two attraction points 

The stores on the path between two attraction points can be found by the following 
procedure. 

Step 1- Finding path between two attraction points: Given two points in an indoor 
space, we first have to compute the optimal path between two indoor points. Because 
connectivity between portions of an indoor space vary, we cannot find the optimal 
path in simple Euclidean space: it is difficult to compute the optimal path without 
understanding the indoor network. IndoorGML provides a model for an indoor 
network, CityGML has no such function. The optimal path is calculated from the 
indoor network. 

Step 2 – Computation of viewshed on the path: Once we discover the optimal path, 
then we can compute the viewshed from the path. As we discussed in section 6.2, only 
CityGML supports the computation of viewshed from a line or curve in 3D space.  

Step 3 – Finding stores in the viewshed: The last step is to find the stores overlapping 
with the viewshed. This process is identical with step 2 in section 6.1. While 
IndoorGML supports finding stores overlapping with the viewshed, we can find the 
overlapping stores in CityGML only if the geometry of Room instance is closed.    



OGC 16-012r1 

16 Copyright © 2012 Open Geospatial Consortium. 
 

From this operation, we conclude that neither CityGML nor IndoorGML independently 
cover the entire process of this application scenario and a proper integration of both 
standards is required to handle this scenario. 

6.4 Trajectory analysis 

The trajectories of visitors in a shopping mall contain useful information, particularly to 
support marketing strategy. In order to explore the trajectories, we need to satisfy the 
following functional requirements. 

Trajectory representation: We may simply represent trajectory in indoor space as a 
sequence of (id, x, y, z, t) where id is the identifier of visitor, (x, y, z) are the 
coordinates, and t is a timestamp. However, the coordinates do not include any 
semantic information. An alternative way to represent the trajectory is by the 
sequence of (id, cid, t), where cid indicates the cell identifier. By the second approach, 
we specify the location of visitor by cell identifier, which is in fact the key concept 
of the cellular space model and the basic understanding of space in IndoorGML. 
Since each cell has richer semantic information than simple coordinates, we can 
extract more useful information from trajectories represented as sequences of cell 
identifiers. Moreover, we can provide finer semantic information by decomposing a 
large cell like a central hall in a shopping mall or a long corridor of a subway station. 
The cellular space model is well supported by IndoorGML, which provides richer 
semantics than CityGML.  

Indoor map matching: Given a point in (x, y, z) coordinates, the process to find the cell 
containing the point is called indoor map matching. This process is defined as a 
function f (L, p) = cid , where L is an indoor cellular layout. The cellular layout L 
consists of cells with boundary geometry and topology between cells as represented 
in IndoorGML. CityGML does not support cellular space model and we need 
additional information in a CityGML building model to clearly implement the indoor 
map matching.  

Trajectory analysis: Most trajectory analysis methods, such as trajectory clustering and 
trajectory median analysis, assume Euclidean space. These methods can be 
implemented with CityGML and IndoorGML. We can also analyze trajectories 
represented by cellular space model of IndoorGML. We expect that the cellular 
space model approach would produce more useful information than an approach in 
Euclidean space. 

In conclusion, the cellular space model is more relevant to analyze indoor trajectories 
than Euclidean space and IndoorGML supports the indoor trajectory analysis better than 
CityGML.  



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. 17 
 

6.5  Movement pattern and context analysis 

From an archive of trajectories during a certain period of time, we can extract useful 
information for marketing insight, which is an important requirement for the use case 
site. One of the fundamental functional requirements is to understand the context of 
visitors, for example, whether she/he is staying in a coffee shop or moving around to find 
a specific item. We expect that we could extract important contextual information by 
analyzing the movement pattern of visitors. The basic functions for movement pattern 
analysis are listed below. 

Staying or movement: The most primitive function is to see whether a visitor is staying 
in a location or moving during a given time interval or at a time instance. As an 
example, let us not identify a movement if the visitor just is walking around inside a 
store. However, if the visitor is walking in a corridor, we consider that as a 
movement. Thus, the decision of movement depends on the granularity and 
classification of location. With IndoorGML, we can consider a visitor as staying if 
she/he stays in a cell of GeneralSpace (e.g. room) during longer than a given time 
interval. And if she/he is changing position in a cell of TransitionSpace (e.g. 
corridor), then we consider that motion as a movement. By decomposing a large 
room such as long hallway, we can provide a more precise model of movement 
patterns. Classification of rooms is also offered by CityGML, for which two 
conditions should be satisfied to determine staying and movement. First, all 
navigable spaces should be defined as rooms and second, the geometry of the room 
must also be closed to determine if a visitor is in a room. In order to satisfy these 
conditions, the specification of CityGML data should be carefully defined. In 
IndoorGML, we can also control the granularity by decomposing a central hallway 
and determine the category of each decomposed space. 

Individual and collective context analysis: After determining whether a visitor is 
moving or staying in a cell, we can develop additional insight by combining the 
visitor’s activities with her/his personal context, such as age, gender, profession, etc.; 
environmental context, such as the store where she/he is staying; and the period of 
staying. If she/he is repeating a sequence of moving and staying at stores of a 
particular category, we can infer what the visitor is looking for. In order to find the 
store where the visitor is staying, IndoorGML is more appropriate than CityGML 
due to the closed geometry. In general, the information about the cells is helpful in 
analyzing the environmental context. In addition to individual analysis, it is helpful 
for marketing purposes to analyze collective patterns of visitors, such as how many 
visitors and how long they stayed in a store or how many visitors entered via gate 1 
on rainy day. 

7 Summary 

Two OGC standards, CityGML 2.0 (at LoD 4) and IndoorGML support the modeling of 
indoor space. Since their scope and objectives are different, proper understanding of the 
differences, strengths, and weaknesses for each is essential in using and integrating the 



OGC 16-012r1 

18 Copyright © 2012 Open Geospatial Consortium. 
 

standards. This Discussion Paper provides a comparison of CityGML 2.0 and 
IndoorGML with a use case at a large shopping mall in Seoul. 

This comparative study was conducted from two viewpoints – expressive modeling 
power and applications. A brief summary of the comparison is provided as Table 1 where 
the greater than/less than sign indicates which standard is better for a particular task. 

Table 1 — Summary of the comparison between CityGML LoD 4 and IndoorGML 

Viewpoint CityGML LoD 4 IndoorGML 
Model Feature Model Cellular Space Model 

Visualization > 

  Geometric analysis > 
 Cell finding < 

Hierarchical Representation  < 

Route analysis < 
 Context analysis < 

   

Bibliography 

[1] H. G. Ryu, T. H. Kim, and K.J. Li, Comparison between two OGC standards for 
indoor space – CityGML and IndoorGML, In the Seventh ACM SIGSpatial 
Workshop on Indoor Spatial Awareness (ISA 2015), pages 1-8, (2015) 

[2] E.-P. Stoffel, K. Schoder, and H. J. Ohlback, Applying Hierarchical Graphs to 
Pedestrian Indoor Navigation, In ACM GIS 2008, pp.54-57, (2008) 

 
[3] J.S. Kim and K.J. Li, Location K-Anonymity in Indoor Spaces, In Journal of 

Geoinformatica, 20(3), pp.415-451, (2016) 
 



OGC 16-012r1 

Copyright © 2012 Open Geospatial Consortium. 19 
 

Revision	history	
Date Release Editor Primary clauses 

modified 
Description 

Nov. 3, 2015  Hyung-Gyu Ryu, 
Taehoon Kim, 
Ki-Joune Li 

 Version published in [1] 

Feb. 1, 2016  Ki-Joune Li, 
Hack-Cheol Kim, 

Jun Hee Lee, 
Joo-Ho Lee 

 Modification as an OGC DP 

May 23, 2016  Ki-Joune Li  Adding subsections 
11 October 2016  Scott Simmons  Edited for publication 
 

 


