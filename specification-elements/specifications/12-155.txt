
  
 

Open Geospatial Consortium 
Publication Date: 2013-06-18 

Approval Date: 2013-03-22 

Posted Date: 2013-01-02 

Reference number of this document: OGC 12-155 

Reference URL for this document: http://www.opengis.net/def/doc-type/per/ows9-wcs-lidar 

Category: Engineering Report 

Editors: Weiguo Han, Yuanzheng Shao, Liping Di 

OGC® OWS-9 OWS Innovations WCS for LIDAR 
Engineering Report  Report 

  

Copyright © 2013 Open Geospatial Consortium. 
To obtain additional rights of use, visit http://www.opengeospatial.org/legal/. 

Warning 

This document is not an OGC Standard. This document is an OGC Public 
Engineering Report created as a deliverable in an OGC Interoperability Initiative 
and is not an official position of the OGC membership. It is distributed for review 
and comment. It is subject to change without notice and may not be referred to as 
an OGC Standard. Further, any OGC Engineering Report should not be referenced 
as required or mandatory technology in procurements.  

 

  

Document type:  OGC® Engineering Report 
Document subtype: NA 
Document stage:  Approved for public release 
Document language:  English 



OGC 12-155 

ii Copyright © 2013 Open Geospatial Consortium. 
 

Abstract 

This Engineering Report is prepared as a deliverable for the OGC Web Services, Phase 9 
(OWS-9) initiatitive of the Innovations Coverages Sub-Thread. This document represents 
the OWS-9 OWS Innovations WCS for LIDAR Engineering Report. In this report, the 
implementation of WCS 2.0 service that serves the LIDAR data in NITF format is 
introduced. This service supports the JPEG 2000 output format along with GMLJP2 
metadata description as well as the JPIP protocol to deliver the output JPEG2000 data.  

Keywords 

ogcdoc, OGC document,ows9, ows-9, wcs, lidar, jpip 

What is OGC Web Services 9 (OWS-9)? 

OWS-9 builds on the outcomes of prior OGC interoperability initiatives and is organized 
around the following threads: 

-   Aviation: Develop and demonstrate the use of the Aeronautical Information Exchange 
Model (AIXM) and the Weather Exchange Model (WXXM) in an OGC Web Services 
environment, focusing on support for several Single European Sky ATM Research 
(SESAR) project requirements as well as FAA (US Federal Aviation Administration) 
Aeronautical Information Management (AIM) and Aircraft Access to SWIM (System 
Wide Information Management) (AAtS) requirements. 

-   Cross-Community Interoperability (CCI): Build on the CCI work accomplished in 
OWS–8 by increasing interoperability within communities sharing geospatial data, 
focusing on semantic mediation, query results delivery, data provenance and quality and 
Single Point of Entry Global Gazetteer. 

-   Security and Services Interoperability (SSI): Investigate 5 main activities: Security 
Management, OGC Geography Markup Language (GML) Encoding Standard 
Application Schema UGAS (UML to GML Application Schema) Updates, Web Services 
Façade, Reference Architecture Profiling, and Bulk Data Transfer. 

-   OWS Innovations: Explore topics that represent either new areas of work for the 
Consortium (such as GPS and Mobile Applications), a desire for new approaches to 
existing technologies to solve new challenges (such as the OGC Web Coverage Service 
(WCS) work), or some combination of the two. 

-   Compliance & Interoperability Testing & Evaluation (CITE): Develop a suite of 
compliance test scripts for testing and validation of products with interfaces 
implementing the following OGC standards: Web Map Service (WMS) 1.3 Interface 
Standard, Web Feature Service (WFS) 2.0 Interface Standard, Geography Markup 



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. iii 
 

Language (GML) 3.2.1 Encoding Standard, OWS Context 1.0 (candidate encoding 
standard), Sensor Web Enablement (SWE) standards, Web Coverage Service for Earth 
Observation (WCS-EO) 1.0 Interface Standard, and TEAM (Test, Evaluation, And 
Measurement) Engine Capabilities. 

The OWS-9 sponsors are: AGC (Army Geospatial Center, US Army Corps of 
Engineers), CREAF-GeoViQua-EC, EUROCONTROL, FAA (US Federal Aviation 
Administration), GeoConnections - Natural Resources Canada, Lockheed Martin 
Corporation, NASA (US National Aeronautics and Space Administration), NGA (US 
National Geospatial-Intelligence Agency), USGS (US Geological Survey), UK DSTL 
(UK MoD Defence Science and Technology Laboratory). 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

  



OGC 12-155 

iv Copyright © 2013 Open Geospatial Consortium. 
 

License Agreement 

Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, 
to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property 
without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, 
distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to 
do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual 
Property is furnished agrees to the terms of this Agreement. 

If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above 
copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR. 

THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS 
THAT MAY BE IN FORCE ANYWHERE IN THE WORLD. 

THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, 
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR 
PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED 
IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL 
MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE 
UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT 
THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF 
INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY 
DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING 
FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF 
CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH 
THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY. 

This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all 
copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as 
provided in the following sentence, no such termination of this license shall require the termination of any third party end-user 
sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual 
Property, or the operation of the Intellectual Property, infringe, or in LICENSOR’s sole opinion be likely to infringe, any patent, 
copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license 
without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or 
cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party. 

Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual 
Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without 
prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may 
authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any 
LICENSOR standards or specifications. 

This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United 
Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this 
Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, 
and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be 
construed to be a waiver of any rights or remedies available to it. 

None of the Intellectual Property or underlying information or technology may be downloaded or otherwise exported or reexported in 
violation of U.S. export laws and regulations. In addition, you are responsible for complying with any local laws in your jurisdiction 
which may impact your right to import, export or use the Intellectual Property, and you represent that you have complied with any 
regulations or registration procedures required by applicable law to make this license enforceable 



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. v 
 

Contents 

1	   Introduction ............................................................................................................. 1	  
1.1	   Scope .................................................................................................................. 1	  
1.2	   Document contributor contact points ................................................................. 1	  
1.3	   Revision history .................................................................................................. 1	  
1.4	   Forward .............................................................................................................. 2	  

2	   References ............................................................................................................... 2	  
3	   Terms and definitions ............................................................................................. 2	  

3.1	   JPEG2000 ........................................................................................................... 2	  
3.2	   JPIP ..................................................................................................................... 2	  
3.3	   NITF ................................................................................................................... 3	  

4	   Conventions ............................................................................................................ 3	  
4.1	   Abbreviated terms .............................................................................................. 3	  
4.2	   UML notation ..................................................................................................... 4	  

5	   Overview ................................................................................................................. 4	  
6	   GMLJP2 WCS implementation .............................................................................. 5	  

6.1	   Data selection ..................................................................................................... 5	  
6.2	   Metadata interoperability .................................................................................... 7	  
6.3	   WCS implementation ......................................................................................... 7	  
6.4	   WCS usage ......................................................................................................... 8	  
6.5	   JPIP protocol support ......................................................................................... 8	  

7	   Future work ............................................................................................................. 8	  

Annex A: GMLJP2 XML document for the sample data ................................................... 9	  
Annex B: Request parameters of GMLJP2 WCS ............................................................. 12	  

Annex C: Request and response of GetCoverage for JPIP coverage ................................ 15	  
Annex D: Tools to visualize JPIP stream ......................................................................... 16	  
 

 

 





OGC® Engineering Report OGC 12-155 

 

Copyright © 2013 Open Geospatial Consortium. 1 
 

OGC® OWS-9 OWS Innovations WCS for LIDAR 
Engineering Report  Report 

1 Introduction 

1.1 Scope 

This document represents the OWS-9 OWS Innovations WCS for LIDAR Engineering 
Report. In this report, the implementation of WCS 2.0 service that serves the LiDAR 
HRE data in NITF format is introduced. This service supports the JPEG 2000 output 
format along with GMLJP2 metadata description as well as the JPIP protocol to deliver 
the output JPEG2000 data. 

This document is applicable to OGC® GML in JPEG 2000 for Geographic Imagery 
(GMLJP2) Implementation Specification [OGC 05-047r2] and OGC® Web Coverage 
Service 2.0 – Core [OGC 09-110r4] along with its extensions. 

1.2 Document contributor contact points 

All questions regarding this document should be directed to the following editors or the 
contributors: 

Name Organization 
Weiguo Han (whan@gmu.edu) Center for Spatial Information Science and Systems, 

George Mason University 
Yuanzheng Shao (yshao3@gmu.edu) Center for Spatial Information Science and Systems, 

George Mason University  
Liping Di (ldi@gmu.edu) Center for Spatial Information Science and Systems, 

George Mason University 
 

1.3 Revision history 

Date Release Editor Primary clauses modified Description 
2012-10-02 0.1 Yuanzheng Shao, 

Weiguo Han 
All Initial version 

2012-12-03 0.2 Yuanzheng Shao, 
Weiguo Han 

Section 4, 5, 6 Add the detailed 
implementation framework 

2012-12-17 1.0 Weiguo Han, 
Yuanzheng Shao 

 Finalize this document 

 



OGC 12-155 

2 

    

Copyright © 2013 Open Geospatial Consortium. 
 

1.4 Forward 

Attention is drawn to the possibility that some of the elements of this document may be 
the subject of patent rights. The Open Geospatial Consortium shall not be held 
responsible for identifying any or all such patent rights. 

Recipients of this document are requested to submit, with their comments, notification of 
any relevant patent claims or other intellectual property rights of which they may be 
aware that might be infringed by any implementation of the standard set forth in this 
document, and to provide supporting documentation. 

2 References 

The following documents are referenced in this document. For dated references, 
subsequent amendments to, or revisions of, any of these publications do not apply. For 
undated references, the latest edition of the normative document referred to applies. 

- OGC 06-121r9, OGC® Web Services Common Standard, Version 2.0 

- OGC 05-047r2, OGC® GML in JPEG 2000 for Geographic Imagery (GMLJP2) 
Implementation Specification, Version 1.0 

- OGC 09-110r3, OGC® Web Coverage Service 2.0 Interface Standard Core, 
Version 2.0 

- NGA.IP.0002_1.0, NGA Standardization Document - Implementation Profile for 
High Resolution Elevation (HRE) Products, Version 1.0 

3 Terms and definitions 

For the purposes of this report, the definitions specified in Clause 4 of the OWS Common 
Implementation Standard [OGC 06-121r3] and in GML in JPEG 2000 for Geographic 
Imagery (GMLJP2) Implementation Specification [OGC 05-047r2] shall apply. In 
addition, the following terms and definitions apply: 

3.1 JPEG2000 

JPEG 2000 is an image compression standard and coding system. It was created by the 
Joint Photographic Experts Group (JPEG) committee in 2000 with the intention of 
superseding their original discrete cosine transform-based JPEG standard (created in 
1992) with a newly designed, wavelet-based method. 

3.2 JPIP 

JPIP (JPEG 2000 Interactive Protocol) is a compression streamlining protocol that works 
with JPEG 2000 to produce an image using the least bandwidth required. It can be very 



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. 3 
 

useful for medical and environmental awareness purposes, among others, and many 
implementations of it are currently being produced.  

3.3 NITF 

The National Imagery Transmission Format Standard (NITFS) is a U.S. Department of 
Defense (DoD) and Federal Intelligence Community (IC) suite of standards for the 
exchange, storage, and transmission of digital-imagery products and image-related 
products. 

4 Conventions 

4.1 Abbreviated terms 

API     Application Programming Interface 

ESA    European Space Agency 

DoD    Department of Defense 

GDAL    Geospatial Data Abstraction Library 

GMLCOV   OGC GML 3.2.1 Application Schema – Coverages 

GMU    George Mason University 

HRE    High Resolution Elevation 

IC     Intelligence Community 

JPEG    Joint Photographic Experts Group 

JPIP    JPEG 2000 Interactive Protocol 

LiDAR     Light Detection And Ranging 

NGA    National Geospatial-Intelligence Agency 

NITF    National Imagery Transmission Format 

OWS    OGC Open Web Service 

OWS-9    OGC Web Services Initiative, Phase 9  

SDK    Software Development Kit 

TRE    Tagged Record Extension 

UML    Unified Modeling Language 



OGC 12-155 

4 

    

Copyright © 2013 Open Geospatial Consortium. 
 

WCS    Web Coverage Service 

4.2 UML notation 

Diagrams presented using the Unified Modeling Language (UML) static structure 
diagram follow Subclause 5.2 of [OGC 06-121r3]. 

5 Overview 

This report introduces the technical implementation of GMLJP2 WCS service for the 
LiDAR HRE data in NITF format with its native Tagged Record Extension (TRE). A 
general program is built to convert data from NITF format to JPEG2000 format and 
transform native TREs to GML metadata. Moreover, a JPIP server is set up to deliver the 
response of WCS to clients using JPIP protocol.  

Open source geospatial package Geospatial Data Abstraction Library (GDAL) is utilized 
in data reformatting and re-projection because it supports multiple geospatial data 
formats, including GeoTIFF and NITF. However, GDAL does not support the JPEG2000 
format with its default configuration, so it is re-configured with OpenJPEG library (or 
Japser library) to support JPEG2000 format in the GMU GMLJP2 WCS implementation.   

ESA JPIP server is configured to support JPIP protocol in the implementation. It is found 
that ESA JPIP server doesn’t support the JPEG2000 file generated from GDAL directly. 
So Kakadu software (including command line tools and APIs, freely obtained from 
Kakadu Software, www.kakadusoftware.com) is adopted to generate the output data in 
JPEG2000 format.  

In the implementation, GeoTIFF serves as an intermediate data format between NITF and 
JPEG2000, that is, the original source data in NITF format is converted to the one in 
GeoTIFF format using GDAL, and then the GeoTIFF file is converted to the output 
JPEG200 file using Kakadu. A metadata converter is developed to transform metadata 
information in NITF format to GMLJP2 metadata in XML format. Finally, ESA JPIP 
server will deliver the responses in JPIP protocol, and GMU WCS server is responsible 
for handling the HTTP requests. 

The whole process is illustrated in Figure 1. The technical details will be described in 
Section 6. 



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. 5 
 

 

Figure 1. GMU GMLJP2 WCS implementation framework 

6 GMLJP2 WCS implementation  

6.1 Data selection 

The following four LiDAR HRE sample files provided by NGA are used in the 
implementation and testing of the GMLJP2 WCS service: 

 Case1_HRE10G324642N1170747W_Uxx.hr5 
 Case2_HRE10G324642N1170747W_Uxx.hr5 
 Case3_HRE10G324642N1170747W_Uxx.hr5 
 Case4_HRE10G324642N1170747W_Uxx.hr5 

These HRE files are in NITF format and their metadata information are described in the 
NITF Headers/Sub-Header and TREs. Taking the sample data of 
Case1_HRE10G324642N1170747W_Uxx.hr5 as an example, its headers, sub-headers 
and TREs are retrieved and listed as the following:  

1) Header information 
<headers> 
    <field name="CLEVEL" value="03"/> 
    <field name="ENCRYP" value="0"/> 
    <field name="FBKGC" value="000000"/> 
    <field name="FDT" value="20081201000000"/> 
    <field name="FHDR" value="NITF02.10"/> 

JPIP Request/Response 

Intermediate 
Data 

(GeoTIFF 
format) 

Kakadu 

GMLJP2 
Data 

 

JPEG2000 
format 

 
 

JPEG2000 
& 

Other 
formats 

 

 

LiDAR 
Data 

(NITF 
format) 

GDAL 

Metadata Converter GMLJP2 
Metadata 

(XML format) 

ESA JPIP Server 

HTTP Request/Response 
GMU WCS Server 



OGC 12-155 

6 

    

Copyright © 2013 Open Geospatial Consortium. 
 

    <field name="FSCATP" value=""/> 
    <field name="FSCAUT" value=""/> 
    <field name="FSCLAS" value="U"/> 
    <field name="FSCLSY" value="US"/> 
    <field name="FSCLTX" value=""/> 
    <field name="FSCODE" value=""/> 
    <field name="FSCOP" value="00000"/> 
    <field name="FSCPYS" value="00000"/> 
    <field name="FSCRSN" value=""/> 
    <field name="FSCTLH" value="FO"/> 
    <field name="FSCTLN" value=""/> 
    <field name="FSDCDT" value=""/> 
    <field name="FSDCTP" value=""/> 
    <field name="FSDCXM" value=""/> 
    <field name="FSDG" value=""/> 
    <field name="FSDGDT" value=""/> 
    <field name="FSREL" value=""/> 
    <field name="FSSRDT" value=""/> 
    <field name="FTITLE" value="HRE High Resolution Elevation Data HRE10G324642N1170747W_Uxx.hr5"/> 
    <field name="ONAME" value="NGA"/> 
    <field name="OPHONE" value="1-800-455-0899"/> 
    <field name="OSTAID" value="NGA"/> 
    <field name="STYPE" value="BF01"/> 
</headers> 

2) Sub-header information 
<subheaders> 
    <field name="ABPP" value="32"/> 
    <field name="CCS_COLUMN" value="0"/> 
    <field name="CCS_ROW" value="0"/> 
    <field name="IALVL" value="0"/> 
    <field name="IC" value="NC"/> 
    <field name="ICAT" value="DTEM"/> 
    <field name="ICORDS" value="D"/> 
    <field name="IDATIM" value="20041201000000"/> 
    <field name="IDLVL" value="1"/> 
    <field name="IGEOLO" value="+32.781-117.129+32.781-117.126+32.778-117.126+32.778-117.129"/> 
    <field name="IID1" value="HRE"/> 
    <field name="IID2" value="HRE0120081201"/> 
    <field name="ILOC_COLUMN" value="0"/> 
    <field name="ILOC_ROW" value="0"/> 
    <field name="IMAG" value="1.0"/> 
    <field name="IMODE" value="B"/> 
    <field name="IREP" value="NODISPLY"/> 
    <field name="ISCATP" value=""/> 
    <field name="ISCAUT" value=""/> 
    <field name="ISCLAS" value="U"/> 
    <field name="ISCLSY" value="US"/> 
    <field name="ISCLTX" value=""/> 
    <field name="ISCODE" value=""/> 
    <field name="ISCRSN" value=""/> 
    <field name="ISCTLH" value="FO"/> 
    <field name="ISCTLN" value=""/> 
    <field name="ISDCDT" value=""/> 
    <field name="ISDCTP" value=""/> 
    <field name="ISDCXM" value=""/> 
    <field name="ISDG" value=""/> 
    <field name="ISDGDT" value=""/> 



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. 7 
 

    <field name="ISORCE" value="IFSAR"/> 
    <field name="ISREL" value=""/> 
    <field name="ISSRDT" value=""/> 
    <field name="PJUST" value="R"/> 
    <field name="PVTYPE" value="R"/> 
    <field name="TGTID" value=""/> 
</subheaders> 

3) TREs information 
<tres> 
    <tre name="PIAPRD" location="file"> 
        <field name="ACCESSID" value=""/> 
        <field name="FMCONTROL" value=""/> 
        <field name="SUBDET" value=""/> 
        <field name="PRODCODE" value=""/> 
        <field name="PRODUCERSE" value=""/> 
        <field name="PRODIDNO" value=""/> 
        <field name="PRODSNME" value="HRE"/> 
        <field name="PRODUCERCD" value=""/> 
        <field name="PRODCRTIME" value="20081201000000"/> 
        <field name="MAPID" value=""/> 
        <field name="SECTITLEREP" value="00"/> 
        <field name="REQORGREP" value="00"/> 
        <field name="KEYWORDREP" value="00"/> 
        <field name="ASSRPTREP" value="00"/> 
        <field name="ATEXTREP" value="02"/> 
        <repeated name="ATEXT" number="2"> 
            <group index="0"> 
                <field name="ATEXT" value="HREG120081201"/> 
            </group> 
            <group index="1"> 
                <field name="ATEXT" value="RSF0120081201"/> 
            </group> 
        </repeated> 
    </tre> 
</tres> 

6.2 Metadata interoperability 

To implement the GMLJP2 WCS service, the metadata of headers, sub-headers, and 
NITF TREs will be converted to the GMLJP2 elements according to the schema files, 
which are provided by the sponsor. The specific schema files are obtained from the 
following link:  

https://portal.opengeospatial.org/files/?artifact_id=50045   

Taking the sample data of Case1_HRE10G324642N1170747W_Uxx.hr5 as an example, 
its headers/sub-headers and TREs are converted to the corresponding elements in 
GMLJP2 (Refer to Annex A). 

6.3 WCS implementation  

In the implementation of this WCS service, the WCS 2.0 specification is adopted and the 
following three mandatory operations are implemented: 



OGC 12-155 

8 

    

Copyright © 2013 Open Geospatial Consortium. 
 

 GetCapabilities 
 DescribeCoverage 
 GetCoverage 

Currently, only HTTP/GET method is supported.  

If the output format is specified as image/jpeg2000, this WCS service will insert the 
GMLJP2 metadata to the XML box in the output JPEG2000 data by calling API function 
of Kakadu SDK. 

6.4 WCS usage 

The request parameters and sample URL are listed in Annex B. 

6.5 JPIP protocol support   

The JPIP server also is set up to support the delivery of the generated JPEG2000 data via 
JPIP protocol.  

To get the output data via JPIP protocol, the output format in the GetCoverage request 
needs to be specified as the following: 

format=text/xml;urn:ogc:def:wcs:2.0:jpip-response  

The request and response example are given in Annex C.  

Annex D introduces how to visualize the JPIP stream and check the GMLJP2 metadata 
information via the third-party JPIP client software. 

7 Future work 

Geospatial data products in other raster formats will be served with GMLJP2 using the 
similar solution and a general metadata schema will be defined for these data products 
accordingly in the implementation.  

  



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. 9 
 

Annex A: GMLJP2 XML document for the sample data  

<?xml version="1.0" encoding="UTF-8"?> 
<gmljp2:RootFeatureCollection xmlns:geopsb="http://www.example.org/nitf/tre/geopsb" 
   xmlns:geolob="http://www.example.org/nitf/tre/geolob" 
   xmlns:histoa="http://www.example.org/nitf/tre/histoa" xmlns:saxon="http://saxon.sf.net/" 
   xmlns:maplob="http://www.example.org/nitf/tre/maplob" 
   xmlns:prjpsb="http://www.example.org/nitf/tre/prjpsb" 
   xmlns:piaprd="http://www.example.org/nitf/tre/piaprd" xmlns:xlink="http://www.w3.org/1999/xlink" 
   xmlns:eop="http://www.opengis.net/eop/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" 
   xmlns:ntf="http://www.example.org/nitf" xmlns:gmlcov="http://www.opengis.net/gmlcov/1.0" 
   xmlns:om="http://www.opengis.net/om/2.0" xmlns:gmljp2="http://www.opengis.net/gmljp2/2.0" 
   xmlns:swe="http://www.opengis.net/swe/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xsi:schemaLocation="http://www.example.org/nitf 
http://129.174.131.8:9003/ows9_ic/schema/gmljp2v2.0/NITF_2.1.xsd  http://www.example.org/nitf 
http://129.174.131.8:9003/ows9_ic/schema/gmljp2v2.0/NITF_TRE_Types.xsd http://www.opengis.net/gmljp2/2.0 
http://129.174.131.8:9003/ows9_ic/schema/gmljp2v2.0/GMLJP2.xsd http://www.example.org/nitf/tre/geopsb 
http://129.174.131.8:9003/ows9_ic/schema/gmljp2v2.0/GEOPSB-TRE.xsd http://www.example.org/nitf/tre/geolob 
http://129.174.131.8:9003/ows9_ic/schema/gmljp2v2.0/GEOLOB-TRE.xsd http://www.example.org/nitf/tre/histoa 
http://129.174.131.8:9003/ows9_ic/schema/gmljp2v2.0/HISTOA-TRE.xsd http://www.example.org/nitf/tre/maplob 
http://129.174.131.8:9003/ows9_ic/schema/gmljp2v2.0/MAPLOB-TRE.xsd http://www.example.org/nitf/tre/prjpsb 
http://129.174.131.8:9003/ows9_ic/schema/gmljp2v2.0/PRJPSB-TRE.xsd http://www.example.org/nitf/tre/piaprd 
http://129.174.131.8:9003/ows9_ic/schema/gmljp2v2.0/PIAPRD-TRE.xsd " 
   gml:id="FC001"> 
   <ntf:sourceFileMetadata> 
      <ntf:FileHeader> 
         <ntf:fhdr>NITF</ntf:fhdr> 
         <ntf:fver>02.10</ntf:fver> 
         <ntf:clevel>1</ntf:clevel> 
         <ntf:stype>BF01</ntf:stype> 
         <ntf:ostaid>NGA</ntf:ostaid> 
         <ntf:fdt>2008-12-01T00:00:00</ntf:fdt> 
         <ntf:ftitle>HRE High Resolution Elevation Data HRE10G324642N1170747W_Uxx.hr5</ntf:ftitle> 
         <ntf:fsclas>U</ntf:fsclas> 
         <ntf:fsclsy>US</ntf:fsclsy> 
         <ntf:fscode/> 
         <ntf:fsrel/> 
         <ntf:fsdctp/> 
         <ntf:fsdcxm/> 
         <ntf:fsdg/> 
         <ntf:fsdgdt>1900-01-01</ntf:fsdgdt> 
         <ntf:fscltx/> 
         <ntf:fscatp/> 
         <ntf:fscaut/> 
         <ntf:fscrsn/> 
         <ntf:fssrdt>1900-01-01</ntf:fssrdt> 
         <ntf:fsctln/> 
         <ntf:fscop>0</ntf:fscop> 
         <ntf:fspys>0</ntf:fspys> 
         <ntf:encryp>0</ntf:encryp> 
         <ntf:fbkgc>000000</ntf:fbkgc> 
         <ntf:oname>NGA</ntf:oname> 
         <ntf:ophone>1-800-455-0899</ntf:ophone> 
         <ntf:xhd> 
            <piaprd:DataSetMetadata> 
               <piaprd:cetag>PIAPRD</piaprd:cetag> 
               <piaprd:prodSnme>HRE</piaprd:prodSnme> 
               <piaprd:prodCrTime>2008-12-01T00:00:00</piaprd:prodCrTime> 
               <piaprd:aText>HREG120081201</piaprd:aText> 
               <piaprd:aText>RSF0120081201</piaprd:aText> 
            </piaprd:DataSetMetadata> 



OGC 12-155 

10 Copyright © 2013 Open Geospatial Consortium. 
 

         </ntf:xhd> 
      </ntf:FileHeader> 
   </ntf:sourceFileMetadata> 
   <gmljp2:featureMember> 
      <gmljp2:CodeStreamData gml:id="CodeStream1"> 
         <gml:boundedBy xmlns:wcs="http://www.opengis.net/wcs/2.0" 
            xmlns:wcseo="http://www.opengis.net/wcseo/1.0"> 
            <gml:Envelope axisLabels="lon lat" srsDimension="2" 
               srsName="http://www.opengis.net/def/crs/EPSG/0/4326" uomLabels="deg deg"> 
               <gml:lowerCorner>-117.129 32.778</gml:lowerCorner> 
               <gml:upperCorner>-117.126 32.781</gml:upperCorner> 
            </gml:Envelope> 
         </gml:boundedBy> 
         <ntf:imageMetadata> 
            <ntf:ImageSubheader> 
               <ntf:im>1</ntf:im> 
               <ntf:iid1>HRE</ntf:iid1> 
               <ntf:idatim>2004-12-01T00:00:00</ntf:idatim> 
               <ntf:tgtid/> 
               <ntf:iid2>HRE0120081201</ntf:iid2> 
               <ntf:isclas>U</ntf:isclas> 
               <ntf:isclsy>US</ntf:isclsy> 
               <ntf:iscode/> 
               <ntf:isctlh>FO</ntf:isctlh> 
               <ntf:isrel/> 
               <ntf:isdcdt>1900-01-01</ntf:isdcdt> 
               <ntf:isdcxm/> 
               <ntf:isdg/> 
               <ntf:isdgdt>1900-01-01</ntf:isdgdt> 
               <ntf:iscatp/> 
               <ntf:iscaut/> 
               <ntf:iscrsn/> 
               <ntf:issrdt>1900-01-01</ntf:issrdt> 
               <ntf:isctln/> 
               <ntf:encryp>0</ntf:encryp> 
               <ntf:nrows>1</ntf:nrows> 
               <ntf:ncols>1</ntf:ncols> 
               <ntf:pvtype>R</ntf:pvtype> 
               <ntf:irep>NODISPLY</ntf:irep> 
               <ntf:icat>DTEM</ntf:icat> 
               <ntf:abpp>1</ntf:abpp> 
               <ntf:pjust>R</ntf:pjust> 
               <ntf:icords>D</ntf:icords> 
               <ntf:igeolo> 
                  <gml:Envelope> 
                     <gml:lowerCorner>-117.129 +32.778</gml:lowerCorner> 
                     <gml:upperCorner>-117.126 +32.781</gml:upperCorner> 
                  </gml:Envelope> 
               </ntf:igeolo> 
               <ntf:ic>NC</ntf:ic> 
               <ntf:imode>B</ntf:imode> 
               <ntf:nbpr>1</ntf:nbpr> 
               <ntf:nbpc>1</ntf:nbpc> 
               <ntf:nppbh>0</ntf:nppbh> 
               <ntf:nppbv>0</ntf:nppbv> 
               <ntf:nbpp>1</ntf:nbpp> 
               <ntf:idlvlv>1</ntf:idlvlv> 
               <ntf:ialvl>0</ntf:ialvl> 
               <ntf:iloc>00000000</ntf:iloc> 
               <ntf:imag>0</ntf:imag> 



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. 11 
 

            </ntf:ImageSubheader> 
         </ntf:imageMetadata> 
         <gmljp2:coverage> 
            <ntf:RectifiedGridCoverage gml:id="RectifiedGrid1"> 
               <gml:rectifiedGridDomain> 
                  <gml:RectifiedGrid xmlns:wcs="http://www.opengis.net/wcs/2.0" 
                     xmlns:wcseo="http://www.opengis.net/wcseo/1.0" dimension="2" 
                     gml:id="Case1_HRE10G324642N1170747W_Uxx.hr5_grid"> 
                     <gml:limits> 
                        <gml:GridEnvelope> 
                           <gml:low>0 0</gml:low> 
                           <gml:high>333 357</gml:high> 
                        </gml:GridEnvelope> 
                     </gml:limits> 
                     <gml:axisLabels>lon lat</gml:axisLabels> 
                     <gml:origin> 
                        <gml:Point gml:id="Case1_HRE10G324642N1170747W_Uxx.hr5_grid_origin" 
                           srsName="http://www.opengis.net/def/crs/EPSG/0/4326"> 
                           <gml:pos>-117.129 32.781</gml:pos> 
                        </gml:Point> 
                     </gml:origin> 
                     <gml:offsetVector srsName="http://www.opengis.net/def/crs/EPSG/0/4326" 
                        >9.00901e-06 0.0</gml:offsetVector> 
                     <gml:offsetVector srsName="http://www.opengis.net/def/crs/EPSG/0/4326">0.0 
                        -8.40336e-06</gml:offsetVector> 
                  </gml:RectifiedGrid> 
               </gml:rectifiedGridDomain> 
               <ntf:rangeSet> 
                  <gml:File> 
                     <gml:rangeParameters nilReason="unknown"/> 
                     <gml:fileName/> 
                     <gml:fileStructure/> 
                  </gml:File> 
               </ntf:rangeSet> 
            </ntf:RectifiedGridCoverage> 
         </gmljp2:coverage> 
      </gmljp2:CodeStreamData> 
   </gmljp2:featureMember> 
</gmljp2:RootFeatureCollection> 

 



OGC 12-155 

12 Copyright © 2013 Open Geospatial Consortium. 
 

 Annex B: Request parameters of GMLJP2 WCS  

Table 1 GetCapabilities operation 

Parameter Description Values Mandatory/Optional 

service Requested service WCS Mandatory 

request Type of request GetCapabilities Mandatory 

version Version number 2.0 Mandatory 

sections Comma-separated 
section names 

ServiceIdentification 

ServiceProvider 

OperationsMetadata 

Contents 

Optional 

Sample request 

http://ows9.csiss.gmu.edu/cgi-
bin/ows9/gmuwcs?service=WCS&version=2.0&request=GetCapabilities   

 

Table 2 DescribeCoverage operation 

Parameter Description Values Mandatory/Optional 

service Requested service WCS Mandatory 

request Type of request GetCapabilities Mandatory 

version Version number 2.0 Mandatory 

coverageId valid coverageID 
of coverage(s) 

Example: 

 NITF:"/home/shao/ows9/jpip
/data/NITF_Sample_Data/Fil
es/LandSat_Vendor3_1.ntf":
Data 

Mandatory 

Sample request 

http://ows9.csiss.gmu.edu/cgi-bin/ows9/gmuwcs?service=WCS&version=2.0& 

request=describeCoverage&coverageId=NITF:"/home/yshao/ows9/jpip/data/ 



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. 13 
 

NITF_Sample_Data/Files/Case1_HRE10G324642N1170747W_Uxx.hr5":Data 

 

Table 3 GetCoverage operation 

Param
eter Description Values 

Mandator
y/Optional 

service Requested service WCS Mandatory 

request Type of request GetCapabilities Mandatory 

version Version number 2.0 Mandatory 

coverag
eId 

valid coverageID of 
coverage(s) 

Example: 

 NITF:"/home/shao/ows9/jpip/data/NITF_Sa
mple_Data/Files/LandSat_Vendor3_1.ntf":D
ata 

Mandatory 

subset Trimming and (or) 
slicing of coverage 
dimension 

Examples: 

 Long,http://www.opengis.net/def/crs/EPSG/
0/4326(-120,-100) 

 Long,EPSG:4326(-120,-100) 
 Lat,http://www.opengis.net/def/crs/EPSG/0/

4326(20,40) 
 Lat,EPSG:4326(20,40) 
 phenomenonTime("2009-01-01") 
 phenomenonTime("2009-01-

01T12:12:00Z","2009-01-07") 

Optional 

format Requested format of 
coverage to be 
returned 

Examples: 

 image/nitf 
 image/jpeg2000 
 application/x-netcdf 
 image/tiff 

Mandatory 

outputc
rs 

CRS for the 
requested output 
coverage 

Examples: 

 http://www.opengis.net/def/crs/EPSG/0/326
12 

 http://www.opengis.net/def/crs/EPSG/0/432
6 

Optional 

mediat
ype 

Coverage delivered 
directly as image file 
or enclosed in GML 
structure 

Example: 

 multipart/mixed  
Optional 

size/res
olution 

Specify the output 
width/height or 
resolution per axis. 

Examples: 

 size=Long(20) 
 size=x(50) 
 resolution=long(0.01) 
 resolution=y(0.3) 

 

Optional 



OGC 12-155 

14 Copyright © 2013 Open Geospatial Consortium. 
 

interpol
ation 

interpolation method 
to be used 

Examples: 

 nearest(default) 
 bilinear 
 cubic 
 cubicspline 
 lanczos 

Optional 

Sample request 

http://ows9.csiss.gmu.edu/cgi-
bin/ows9/gmuwcs?service=WCS&version=2.0&request=GetCoverage&coverageid=NIT
F:"/home/yshao/ows9/jpip/data/NITF_Sample_Data/Files/Case1_HRE10G324642N1170
747W_Uxx.hr5":Data&format=image/jpeg2000&mediatype=multipart/mixed 

http://ows9.csiss.gmu.edu/cgi-
bin/ows9/gmuwcs?service=WCS&version=2.0&request=GetCoverage&coverageId=NIT
F:%22/home/yshao/ows9/jpip/data/NITF_Sample_Data/Files/Case1_HRE10G324642N1
170747W_Uxx.hr5%22:Data&format=iamge/JPEG2000&subset=Lat,http://www.opengi
s.net/def/crs/EPSG/0/4326(32.779,32.780)&subset=Long,http://www.opengis.net/def/crs/
EPSG/0/4326%(-117.128,-117.127) 



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. 15 
 

Annex C: Request and response of GetCoverage for JPIP coverage  

 

Request example: 

http://ows9.csiss.gmu.edu/cgi-
bin/ows9/gmuwcs?service=WCS&version=2.0&request=GetCoverage&coverageid=NIT
F:%22/home/yshao/ows9/jpip/data/NITF_Sample_Data/Files/Case1_HRE10G324642N1
170747W_Uxx.hr5%22:Data&format=text/xml;urn:ogc:def:wcs:2.0:jpip-response 

Response example: 

<?xml version="1.0" encoding="UTF-8"?> 
<Coverages xmlns="http://www.opengis.net/wcs/2.0" 
xmlns:ows="http://www.opengis.net/ows" 
    xmlns:owcs="http://www.opengis.net/wcs/2.0/ows" 
xmlns:xlink="http://www.w3.org/1999/xlink" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://schemas.opengis.net/ows/2.0 ../owsCoverages.xsd"> 
    <Coverage> 
        <Abstract>JPIP (JPEG 2000 Interactive Protocol) is a compression streamlining 
protocol that works with JPEG 2000 to produce an image using the least bandwidth 
required. GMU CSISS developed JPIP-enabled GMLJP2 WCS service which could 
deliver the response of GetCoverage request in JPEG2000 format via JPIP protocol. The 
URL included in this XML could be opened by Kakadu JPIP client, LEADTOOLS JPIP 
Client or any other JPIP clients. 
        </Abstract> 
        <Reference            
xlink:href="jpip://ows9.csiss.gmu.edu:9002/ows9cache/Case1_HRE10G324642N117074
7W_Uxx.20121003143311.jp2"  xlink:role="urn:ogc:def:role:WCS:2.0:coverage"/> 
    </Coverage> 
</Coverages> 



OGC 12-155 

16 Copyright © 2013 Open Geospatial Consortium. 
 

Annex D: Tools to visualize JPIP stream  

1. Kakadu Client  

(1) Download the Kakadu Win32 Executables from here, and install them on your local 
computer.  

(2) Send a GetCoverage request and specify the response format as JPIP protocol, then 
retrieve the JPIP URL from the response, as shown in Annex C.  

(3) Open the executable program named kdu_show.exe, and click File -> Open JPIP 
URL. In the pop up window, specify the following values in the corresponding box: 

Server: ows9.csiss.gmu.edu:9002 

Transport protocol: http-tcp 

Resource or request string: path of the output JPEG2000 data 

 

Then click OK button, the image will be shown in the window, as seen in the following 
figure:   



OGC 12-155 

Copyright © 2013 Open Geospatial Consortium. 17 
 

 

(4) To check the metadata information, click Metadata -> Open Metadata. A window will 
be displayed, as seen in the following figure.   

 

Please note that click the “xml” tag to display the GMLJP2 metadata.  


